function createNotImplementedError$1(e){throw new Error(`[unenv] ${e} is not implemented yet!`)}function notImplemented$1(e){return Object.assign((()=>{throw createNotImplementedError$1(e)}),{__unenv__:!0})}globalThis._importMeta_={url:"file:///_entry.js",env:{}};const e=[],t=[],r="undefined"==typeof Uint8Array?Array:Uint8Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(let r=0,s=64;r<s;++r)e[r]=n[r],t[n.charCodeAt(r)]=r;function toByteArray(e){let n;const s=function(e){const t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");let r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}(e),i=s[0],o=s[1],a=new r(function(e,t,r){return 3*(t+r)/4-r}(0,i,o));let c=0;const l=o>0?i-4:i;let u;for(u=0;u<l;u+=4)n=t[e.charCodeAt(u)]<<18|t[e.charCodeAt(u+1)]<<12|t[e.charCodeAt(u+2)]<<6|t[e.charCodeAt(u+3)],a[c++]=n>>16&255,a[c++]=n>>8&255,a[c++]=255&n;return 2===o&&(n=t[e.charCodeAt(u)]<<2|t[e.charCodeAt(u+1)]>>4,a[c++]=255&n),1===o&&(n=t[e.charCodeAt(u)]<<10|t[e.charCodeAt(u+1)]<<4|t[e.charCodeAt(u+2)]>>2,a[c++]=n>>8&255,a[c++]=255&n),a}function encodeChunk(t,r,n){let s;const i=[];for(let a=r;a<n;a+=3)s=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),i.push(e[(o=s)>>18&63]+e[o>>12&63]+e[o>>6&63]+e[63&o]);var o;return i.join("")}function fromByteArray(t){let r;const n=t.length,s=n%3,i=[],o=16383;for(let e=0,r=n-s;e<r;e+=o)i.push(encodeChunk(t,e,e+o>r?r:e+o));return 1===s?(r=t[n-1],i.push(e[r>>2]+e[r<<4&63]+"==")):2===s&&(r=(t[n-2]<<8)+t[n-1],i.push(e[r>>10]+e[r>>4&63]+e[r<<2&63]+"=")),i.join("")}function read(e,t,r,n,s){let i,o;const a=8*s-n-1,c=(1<<a)-1,l=c>>1;let u=-7,d=r?s-1:0;const f=r?-1:1;let p=e[t+d];for(d+=f,i=p&(1<<-u)-1,p>>=-u,u+=a;u>0;)i=256*i+e[t+d],d+=f,u-=8;for(o=i&(1<<-u)-1,i>>=-u,u+=n;u>0;)o=256*o+e[t+d],d+=f,u-=8;if(0===i)i=1-l;else{if(i===c)return o?Number.NaN:(p?-1:1)*Number.POSITIVE_INFINITY;o+=Math.pow(2,n),i-=l}return(p?-1:1)*o*Math.pow(2,i-n)}function write(e,t,r,n,s,i){let o,a,c,l=8*i-s-1;const u=(1<<l)-1,d=u>>1,f=23===s?Math.pow(2,-24)-Math.pow(2,-77):0;let p=n?0:i-1;const h=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),Number.isNaN(t)||t===Number.POSITIVE_INFINITY?(a=Number.isNaN(t)?1:0,o=u):(o=Math.floor(Math.log2(t)),t*(c=Math.pow(2,-o))<1&&(o--,c*=2),(t+=o+d>=1?f/c:f*Math.pow(2,1-d))*c>=2&&(o++,c/=2),o+d>=u?(a=0,o=u):o+d>=1?(a=(t*c-1)*Math.pow(2,s),o+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,s),o=0));s>=8;)e[r+p]=255&a,p+=h,a/=256,s-=8;for(o=o<<s|a,l+=s;l>0;)e[r+p]=255&o,p+=h,o/=256,l-=8;e[r+p-h]|=128*m}t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63;const s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null,i=2147483647;function createBuffer(e){if(e>i)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,Buffer$1.prototype),t}function Buffer$1(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return allocUnsafe(e)}return from(e,t,r)}function from(e,t,r){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!Buffer$1.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|byteLength(e,t);let n=createBuffer(r);const s=n.write(e,t);s!==r&&(n=n.slice(0,s));return n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(isInstance(e,Uint8Array)){const t=new Uint8Array(e);return fromArrayBuffer(t.buffer,t.byteOffset,t.byteLength)}return fromArrayLike(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(isInstance(e,ArrayBuffer)||e&&isInstance(e.buffer,ArrayBuffer))return fromArrayBuffer(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(isInstance(e,SharedArrayBuffer)||e&&isInstance(e.buffer,SharedArrayBuffer)))return fromArrayBuffer(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return Buffer$1.from(n,t,r);const s=function(e){if(Buffer$1.isBuffer(e)){const t=0|checked(e.length),r=createBuffer(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||numberIsNaN(e.length)?createBuffer(0):fromArrayLike(e);if("Buffer"===e.type&&Array.isArray(e.data))return fromArrayLike(e.data)}(e);if(s)return s;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return Buffer$1.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function assertSize(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function allocUnsafe(e){return assertSize(e),createBuffer(e<0?0:0|checked(e))}function fromArrayLike(e){const t=e.length<0?0:0|checked(e.length),r=createBuffer(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function fromArrayBuffer(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,Buffer$1.prototype),n}function checked(e){if(e>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|e}function byteLength(e,t){if(Buffer$1.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||isInstance(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let s=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return utf8ToBytes(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return base64ToBytes(e).length;default:if(s)return n?-1:utf8ToBytes(e).length;t=(""+t).toLowerCase(),s=!0}}function slowToString(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return hexSlice(this,t,r);case"utf8":case"utf-8":return utf8Slice(this,t,r);case"ascii":return asciiSlice(this,t,r);case"latin1":case"binary":return latin1Slice(this,t,r);case"base64":return base64Slice(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function swap(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function bidirectionalIndexOf(e,t,r,n,s){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),numberIsNaN(r=+r)&&(r=s?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(s)return-1;r=e.length-1}else if(r<0){if(!s)return-1;r=0}if("string"==typeof t&&(t=Buffer$1.from(t,n)),Buffer$1.isBuffer(t))return 0===t.length?-1:arrayIndexOf(e,t,r,n,s);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?s?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):arrayIndexOf(e,[t],r,n,s);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(e,t,r,n,s){let i,o=1,a=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,a/=2,c/=2,r/=2}function read(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(s){let n=-1;for(i=r;i<a;i++)if(read(e,i)===read(t,-1===n?0:i-n)){if(-1===n&&(n=i),i-n+1===c)return n*o}else-1!==n&&(i-=i-n),n=-1}else for(r+c>a&&(r=a-c),i=r;i>=0;i--){let r=!0;for(let n=0;n<c;n++)if(read(e,i+n)!==read(t,n)){r=!1;break}if(r)return i}return-1}function hexWrite(e,t,r,n){r=Number(r)||0;const s=e.length-r;n?(n=Number(n))>s&&(n=s):n=s;const i=t.length;let o;for(n>i/2&&(n=i/2),o=0;o<n;++o){const n=Number.parseInt(t.slice(2*o,2*o+2),16);if(numberIsNaN(n))return o;e[r+o]=n}return o}function utf8Write(e,t,r,n){return blitBuffer(utf8ToBytes(t,e.length-r),e,r,n)}function asciiWrite(e,t,r,n){return blitBuffer(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function base64Write(e,t,r,n){return blitBuffer(base64ToBytes(t),e,r,n)}function ucs2Write(e,t,r,n){return blitBuffer(function(e,t){let r,n,s;const i=[];for(let o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),n=r>>8,s=r%256,i.push(s,n);return i}(t,e.length-r),e,r,n)}function base64Slice(e,t,r){return 0===t&&r===e.length?fromByteArray(e):fromByteArray(e.slice(t,r))}function utf8Slice(e,t,r){r=Math.min(e.length,r);const n=[];let s=t;for(;s<r;){const t=e[s];let i=null,o=t>239?4:t>223?3:t>191?2:1;if(s+o<=r){let r,n,a,c;switch(o){case 1:t<128&&(i=t);break;case 2:r=e[s+1],128==(192&r)&&(c=(31&t)<<6|63&r,c>127&&(i=c));break;case 3:r=e[s+1],n=e[s+2],128==(192&r)&&128==(192&n)&&(c=(15&t)<<12|(63&r)<<6|63&n,c>2047&&(c<55296||c>57343)&&(i=c));break;case 4:r=e[s+1],n=e[s+2],a=e[s+3],128==(192&r)&&128==(192&n)&&128==(192&a)&&(c=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&a,c>65535&&c<1114112&&(i=c))}}null===i?(i=65533,o=1):i>65535&&(i-=65536,n.push(i>>>10&1023|55296),i=56320|1023&i),n.push(i),s+=o}return function(e){const t=e.length;if(t<=o)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=o));return r}(n)}Buffer$1.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch{return!1}}(),Buffer$1.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This environment lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(Buffer$1.prototype,"parent",{enumerable:!0,get:function(){if(Buffer$1.isBuffer(this))return this.buffer}}),Object.defineProperty(Buffer$1.prototype,"offset",{enumerable:!0,get:function(){if(Buffer$1.isBuffer(this))return this.byteOffset}}),Buffer$1.poolSize=8192,Buffer$1.from=function(e,t,r){return from(e,t,r)},Object.setPrototypeOf(Buffer$1.prototype,Uint8Array.prototype),Object.setPrototypeOf(Buffer$1,Uint8Array),Buffer$1.alloc=function(e,t,r){return function(e,t,r){return assertSize(e),e<=0?createBuffer(e):void 0!==t?"string"==typeof r?createBuffer(e).fill(t,r):createBuffer(e).fill(t):createBuffer(e)}(e,t,r)},Buffer$1.allocUnsafe=function(e){return allocUnsafe(e)},Buffer$1.allocUnsafeSlow=function(e){return allocUnsafe(e)},Buffer$1.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==Buffer$1.prototype},Buffer$1.compare=function(e,t){if(isInstance(e,Uint8Array)&&(e=Buffer$1.from(e,e.offset,e.byteLength)),isInstance(t,Uint8Array)&&(t=Buffer$1.from(t,t.offset,t.byteLength)),!Buffer$1.isBuffer(e)||!Buffer$1.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let s=0,i=Math.min(r,n);s<i;++s)if(e[s]!==t[s]){r=e[s],n=t[s];break}return r<n?-1:n<r?1:0},Buffer$1.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer$1.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Buffer$1.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const n=Buffer$1.allocUnsafe(t);let s=0;for(r=0;r<e.length;++r){let t=e[r];if(isInstance(t,Uint8Array))s+t.length>n.length?(Buffer$1.isBuffer(t)||(t=Buffer$1.from(t.buffer,t.byteOffset,t.byteLength)),t.copy(n,s)):Uint8Array.prototype.set.call(n,t,s);else{if(!Buffer$1.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,s)}s+=t.length}return n},Buffer$1.byteLength=byteLength,Buffer$1.prototype._isBuffer=!0,Buffer$1.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)swap(this,t,t+1);return this},Buffer$1.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)swap(this,t,t+3),swap(this,t+1,t+2);return this},Buffer$1.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)swap(this,t,t+7),swap(this,t+1,t+6),swap(this,t+2,t+5),swap(this,t+3,t+4);return this},Buffer$1.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?utf8Slice(this,0,e):Reflect.apply(slowToString,this,arguments)},Buffer$1.prototype.toLocaleString=Buffer$1.prototype.toString,Buffer$1.prototype.equals=function(e){if(!Buffer$1.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Buffer$1.compare(this,e)},Buffer$1.prototype.inspect=function(){let e="";return e=this.toString("hex",0,50).replace(/(.{2})/g,"$1 ").trim(),this.length>50&&(e+=" ... "),"<Buffer "+e+">"},s&&(Buffer$1.prototype[s]=Buffer$1.prototype.inspect),Buffer$1.prototype.compare=function(e,t,r,n,s){if(isInstance(e,Uint8Array)&&(e=Buffer$1.from(e,e.offset,e.byteLength)),!Buffer$1.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===s&&(s=this.length),t<0||r>e.length||n<0||s>this.length)throw new RangeError("out of range index");if(n>=s&&t>=r)return 0;if(n>=s)return-1;if(t>=r)return 1;if(this===e)return 0;let i=(s>>>=0)-(n>>>=0),o=(r>>>=0)-(t>>>=0);const a=Math.min(i,o),c=this.slice(n,s),l=e.slice(t,r);for(let e=0;e<a;++e)if(c[e]!==l[e]){i=c[e],o=l[e];break}return i<o?-1:o<i?1:0},Buffer$1.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},Buffer$1.prototype.indexOf=function(e,t,r){return bidirectionalIndexOf(this,e,t,r,!0)},Buffer$1.prototype.lastIndexOf=function(e,t,r){return bidirectionalIndexOf(this,e,t,r,!1)},Buffer$1.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!Number.isFinite(t))throw new TypeError("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,Number.isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const s=this.length-t;if((void 0===r||r>s)&&(r=s),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let i=!1;for(;;)switch(n){case"hex":return hexWrite(this,e,t,r);case"utf8":case"utf-8":return utf8Write(this,e,t,r);case"ascii":case"latin1":case"binary":return asciiWrite(this,e,t,r);case"base64":return base64Write(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},Buffer$1.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const o=4096;function asciiSlice(e,t,r){let n="";r=Math.min(e.length,r);for(let s=t;s<r;++s)n+=String.fromCharCode(127&e[s]);return n}function latin1Slice(e,t,r){let n="";r=Math.min(e.length,r);for(let s=t;s<r;++s)n+=String.fromCharCode(e[s]);return n}function hexSlice(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let s="";for(let n=t;n<r;++n)s+=l[e[n]];return s}function utf16leSlice(e,t,r){const n=e.slice(t,r);let s="";for(let e=0;e<n.length-1;e+=2)s+=String.fromCharCode(n[e]+256*n[e+1]);return s}function checkOffset(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function checkInt(e,t,r,n,s,i){if(!Buffer$1.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>s||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function wrtBigUInt64LE(e,t,r,n,s){checkIntBI(t,n,s,e,r,7);let i=Number(t&BigInt(4294967295));e[r++]=i,i>>=8,e[r++]=i,i>>=8,e[r++]=i,i>>=8,e[r++]=i;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,r}function wrtBigUInt64BE(e,t,r,n,s){checkIntBI(t,n,s,e,r,7);let i=Number(t&BigInt(4294967295));e[r+7]=i,i>>=8,e[r+6]=i,i>>=8,e[r+5]=i,i>>=8,e[r+4]=i;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=o,o>>=8,e[r+2]=o,o>>=8,e[r+1]=o,o>>=8,e[r]=o,r+8}function checkIEEE754(e,t,r,n,s,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function writeFloat(e,t,r,n,s){return t=+t,r>>>=0,s||checkIEEE754(e,0,r,4),write(e,t,r,n,23,4),r+4}function writeDouble(e,t,r,n,s){return t=+t,r>>>=0,s||checkIEEE754(e,0,r,8),write(e,t,r,n,52,8),r+8}Buffer$1.prototype.slice=function(e,t){const r=this.length;(e=Math.trunc(e))<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:Math.trunc(t))<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,Buffer$1.prototype),n},Buffer$1.prototype.readUintLE=Buffer$1.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||checkOffset(e,t,this.length);let n=this[e],s=1,i=0;for(;++i<t&&(s*=256);)n+=this[e+i]*s;return n},Buffer$1.prototype.readUintBE=Buffer$1.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||checkOffset(e,t,this.length);let n=this[e+--t],s=1;for(;t>0&&(s*=256);)n+=this[e+--t]*s;return n},Buffer$1.prototype.readUint8=Buffer$1.prototype.readUInt8=function(e,t){return e>>>=0,t||checkOffset(e,1,this.length),this[e]},Buffer$1.prototype.readUint16LE=Buffer$1.prototype.readUInt16LE=function(e,t){return e>>>=0,t||checkOffset(e,2,this.length),this[e]|this[e+1]<<8},Buffer$1.prototype.readUint16BE=Buffer$1.prototype.readUInt16BE=function(e,t){return e>>>=0,t||checkOffset(e,2,this.length),this[e]<<8|this[e+1]},Buffer$1.prototype.readUint32LE=Buffer$1.prototype.readUInt32LE=function(e,t){return e>>>=0,t||checkOffset(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Buffer$1.prototype.readUint32BE=Buffer$1.prototype.readUInt32BE=function(e,t){return e>>>=0,t||checkOffset(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Buffer$1.prototype.readBigUInt64LE=defineBigIntMethod((function(e){validateNumber(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||boundsError(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,s=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(s)<<BigInt(32))})),Buffer$1.prototype.readBigUInt64BE=defineBigIntMethod((function(e){validateNumber(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||boundsError(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],s=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(s)})),Buffer$1.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||checkOffset(e,t,this.length);let n=this[e],s=1,i=0;for(;++i<t&&(s*=256);)n+=this[e+i]*s;return s*=128,n>=s&&(n-=Math.pow(2,8*t)),n},Buffer$1.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||checkOffset(e,t,this.length);let n=t,s=1,i=this[e+--n];for(;n>0&&(s*=256);)i+=this[e+--n]*s;return s*=128,i>=s&&(i-=Math.pow(2,8*t)),i},Buffer$1.prototype.readInt8=function(e,t){return e>>>=0,t||checkOffset(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Buffer$1.prototype.readInt16LE=function(e,t){e>>>=0,t||checkOffset(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},Buffer$1.prototype.readInt16BE=function(e,t){e>>>=0,t||checkOffset(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},Buffer$1.prototype.readInt32LE=function(e,t){return e>>>=0,t||checkOffset(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Buffer$1.prototype.readInt32BE=function(e,t){return e>>>=0,t||checkOffset(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Buffer$1.prototype.readBigInt64LE=defineBigIntMethod((function(e){validateNumber(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||boundsError(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),Buffer$1.prototype.readBigInt64BE=defineBigIntMethod((function(e){validateNumber(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||boundsError(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),Buffer$1.prototype.readFloatLE=function(e,t){return e>>>=0,t||checkOffset(e,4,this.length),read(this,e,!0,23,4)},Buffer$1.prototype.readFloatBE=function(e,t){return e>>>=0,t||checkOffset(e,4,this.length),read(this,e,!1,23,4)},Buffer$1.prototype.readDoubleLE=function(e,t){return e>>>=0,t||checkOffset(e,8,this.length),read(this,e,!0,52,8)},Buffer$1.prototype.readDoubleBE=function(e,t){return e>>>=0,t||checkOffset(e,8,this.length),read(this,e,!1,52,8)},Buffer$1.prototype.writeUintLE=Buffer$1.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){checkInt(this,e,t,r,Math.pow(2,8*r)-1,0)}let s=1,i=0;for(this[t]=255&e;++i<r&&(s*=256);)this[t+i]=e/s&255;return t+r},Buffer$1.prototype.writeUintBE=Buffer$1.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){checkInt(this,e,t,r,Math.pow(2,8*r)-1,0)}let s=r-1,i=1;for(this[t+s]=255&e;--s>=0&&(i*=256);)this[t+s]=e/i&255;return t+r},Buffer$1.prototype.writeUint8=Buffer$1.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,1,255,0),this[t]=255&e,t+1},Buffer$1.prototype.writeUint16LE=Buffer$1.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},Buffer$1.prototype.writeUint16BE=Buffer$1.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},Buffer$1.prototype.writeUint32LE=Buffer$1.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},Buffer$1.prototype.writeUint32BE=Buffer$1.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},Buffer$1.prototype.writeBigUInt64LE=defineBigIntMethod((function(e,t=0){return wrtBigUInt64LE(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),Buffer$1.prototype.writeBigUInt64BE=defineBigIntMethod((function(e,t=0){return wrtBigUInt64BE(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),Buffer$1.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);checkInt(this,e,t,r,n-1,-n)}let s=0,i=1,o=0;for(this[t]=255&e;++s<r&&(i*=256);)e<0&&0===o&&0!==this[t+s-1]&&(o=1),this[t+s]=Math.trunc(e/i)-o&255;return t+r},Buffer$1.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);checkInt(this,e,t,r,n-1,-n)}let s=r-1,i=1,o=0;for(this[t+s]=255&e;--s>=0&&(i*=256);)e<0&&0===o&&0!==this[t+s+1]&&(o=1),this[t+s]=Math.trunc(e/i)-o&255;return t+r},Buffer$1.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},Buffer$1.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},Buffer$1.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},Buffer$1.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},Buffer$1.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},Buffer$1.prototype.writeBigInt64LE=defineBigIntMethod((function(e,t=0){return wrtBigUInt64LE(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),Buffer$1.prototype.writeBigInt64BE=defineBigIntMethod((function(e,t=0){return wrtBigUInt64BE(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),Buffer$1.prototype.writeFloatLE=function(e,t,r){return writeFloat(this,e,t,!0,r)},Buffer$1.prototype.writeFloatBE=function(e,t,r){return writeFloat(this,e,t,!1,r)},Buffer$1.prototype.writeDoubleLE=function(e,t,r){return writeDouble(this,e,t,!0,r)},Buffer$1.prototype.writeDoubleBE=function(e,t,r){return writeDouble(this,e,t,!1,r)},Buffer$1.prototype.copy=function(e,t,r,n){if(!Buffer$1.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);const s=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),s},Buffer$1.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!Buffer$1.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let s;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(s=t;s<r;++s)this[s]=e;else{const i=Buffer$1.isBuffer(e)?e:Buffer$1.from(e,n),o=i.length;if(0===o)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<r-t;++s)this[s+t]=i[s%o]}return this};const a={};function E(e,t,r){a[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:Reflect.apply(t,this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function addNumericalSeparator(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function checkIntBI(e,t,r,n,s,i){if(e>r||e<t){const n="bigint"==typeof t?"n":"";let s;throw s=i>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(i+1)}${n}`:`>= -(2${n} ** ${8*(i+1)-1}${n}) and < 2 ** ${8*(i+1)-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new a.ERR_OUT_OF_RANGE("value",s,e)}!function(e,t,r){validateNumber(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||boundsError(t,e.length-(r+1))}(n,s,i)}function validateNumber(e,t){if("number"!=typeof e)throw new a.ERR_INVALID_ARG_TYPE(t,"number",e)}function boundsError(e,t,r){if(Math.floor(e)!==e)throw validateNumber(e,r),new a.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new a.ERR_BUFFER_OUT_OF_BOUNDS;throw new a.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}E("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),E("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),E("ERR_OUT_OF_RANGE",(function(e,t,r){let n=`The value of "${e}" is out of range.`,s=r;return Number.isInteger(r)&&Math.abs(r)>2**32?s=addNumericalSeparator(String(r)):"bigint"==typeof r&&(s=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(s=addNumericalSeparator(s)),s+="n"),n+=` It must be ${t}. Received ${s}`,n}),RangeError);const c=/[^\w+/-]/g;function utf8ToBytes(e,t){let r;t=t||Number.POSITIVE_INFINITY;const n=e.length;let s=null;const i=[];for(let o=0;o<n;++o){if(r=e.charCodeAt(o),r>55295&&r<57344){if(!s){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&i.push(239,191,189);continue}s=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),s=r;continue}r=65536+(s-55296<<10|r-56320)}else s&&(t-=3)>-1&&i.push(239,191,189);if(s=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function base64ToBytes(e){return toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(c,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function blitBuffer(e,t,r,n){let s;for(s=0;s<n&&!(s+r>=t.length||s>=e.length);++s)t[s+r]=e[s];return s}function isInstance(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function numberIsNaN(e){return e!=e}const l=function(){const e="0123456789abcdef",t=Array.from({length:256});for(let r=0;r<16;++r){const n=16*r;for(let s=0;s<16;++s)t[n+s]=e[r]+e[s]}return t}();function defineBigIntMethod(e){return"undefined"==typeof BigInt?BufferBigIntNotDefined:e}function BufferBigIntNotDefined(){throw new Error("BigInt not supported")}const u=globalThis.Buffer||Buffer$1;notImplemented$1("buffer.resolveObjectURL"),notImplemented$1("buffer.transcode"),notImplemented$1("buffer.isUtf8"),notImplemented$1("buffer.isAscii");const d=/#/g,f=/&/g,p=/\//g,h=/=/g,m=/\+/g,y=/%5e/gi,g=/%60/gi,b=/%7c/gi,_=/%20/gi;function encodeQueryValue(e){return function(e){return encodeURI(""+e).replace(b,"|")}("string"==typeof e?e:JSON.stringify(e)).replace(m,"%2B").replace(_,"+").replace(d,"%23").replace(f,"%26").replace(g,"`").replace(y,"^").replace(p,"%2F")}function encodeQueryKey(e){return encodeQueryValue(e).replace(h,"%3D")}function decode$3(e=""){try{return decodeURIComponent(""+e)}catch{return""+e}}function decodeQueryKey(e){return decode$3(e.replace(m," "))}function decodeQueryValue(e){return decode$3(e.replace(m," "))}function parseQuery(e=""){const t={};"?"===e[0]&&(e=e.slice(1));for(const r of e.split("&")){const e=r.match(/([^=]+)=?(.*)/)||[];if(e.length<2)continue;const n=decodeQueryKey(e[1]);if("__proto__"===n||"constructor"===n)continue;const s=decodeQueryValue(e[2]||"");void 0===t[n]?t[n]=s:Array.isArray(t[n])?t[n].push(s):t[n]=[t[n],s]}return t}function stringifyQuery(e){return Object.keys(e).filter((t=>void 0!==e[t])).map((t=>{return r=t,"number"!=typeof(n=e[t])&&"boolean"!=typeof n||(n=String(n)),n?Array.isArray(n)?n.map((e=>`${encodeQueryKey(r)}=${encodeQueryValue(e)}`)).join("&"):`${encodeQueryKey(r)}=${encodeQueryValue(n)}`:encodeQueryKey(r);var r,n})).filter(Boolean).join("&")}const w=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,v=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,S=/^([/\\]\s*){2,}[^/\\]/,I=/\/$|\/\?|\/#/,k=/^\.?\//;function hasProtocol(e,t={}){return"boolean"==typeof t&&(t={acceptRelative:t}),t.strict?w.test(e):v.test(e)||!!t.acceptRelative&&S.test(e)}function hasTrailingSlash(e="",t){return t?I.test(e):e.endsWith("/")}function withoutTrailingSlash(e="",t){if(!t)return(hasTrailingSlash(e)?e.slice(0,-1):e)||"/";if(!hasTrailingSlash(e,!0))return e||"/";let r=e,n="";const s=e.indexOf("#");s>=0&&(r=e.slice(0,s),n=e.slice(s));const[i,...o]=r.split("?");return(i.slice(0,-1)||"/")+(o.length>0?`?${o.join("?")}`:"")+n}function withTrailingSlash(e="",t){if(!t)return e.endsWith("/")?e:e+"/";if(hasTrailingSlash(e,!0))return e||"/";let r=e,n="";const s=e.indexOf("#");if(s>=0&&(r=e.slice(0,s),n=e.slice(s),!r))return n;const[i,...o]=r.split("?");return i+"/"+(o.length>0?`?${o.join("?")}`:"")+n}function withoutBase(e,t){if(isEmptyURL(t))return e;const r=withoutTrailingSlash(t);if(!e.startsWith(r))return e;const n=e.slice(r.length);return"/"===n[0]?n:"/"+n}function withQuery(e,t){const r=parseURL(e),n={...parseQuery(r.search),...t};return r.search=stringifyQuery(n),function(e){const t=e.pathname||"",r=e.search?(e.search.startsWith("?")?"":"?")+e.search:"",n=e.hash||"",s=e.auth?e.auth+"@":"",i=e.host||"",o=e.protocol||e[T]?(e.protocol||"")+"//":"";return o+s+i+t+r+n}(r)}function isEmptyURL(e){return!e||"/"===e}function joinURL(e,...t){let r=e||"";for(const e of t.filter((e=>function(e){return e&&"/"!==e}(e))))if(r){const t=e.replace(k,"");r=withTrailingSlash(r)+t}else r=e;return r}const T=Symbol.for("ufo:protocolRelative");function parseURL(e="",t){const r=e.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(r){const[,e,t=""]=r;return{protocol:e.toLowerCase(),pathname:t,href:e+t,auth:"",host:"",search:"",hash:""}}if(!hasProtocol(e,{acceptRelative:!0}))return t?parseURL(t+e):parsePath$1(e);const[,n="",s,i=""]=e.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[],[,o="",a=""]=i.match(/([^#/?]*)(.*)?/)||[],{pathname:c,search:l,hash:u}=parsePath$1(a.replace(/\/(?=[A-Za-z]:)/,""));return{protocol:n.toLowerCase(),auth:s?s.slice(0,Math.max(0,s.length-1)):"",host:o,pathname:c,search:l,hash:u,[T]:!n}}function parsePath$1(e=""){const[t="",r="",n=""]=(e.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:t,search:r,hash:n}}const O=Object.freeze({ignoreUnknown:!1,respectType:!1,respectFunctionNames:!1,respectFunctionProperties:!1,unorderedObjects:!0,unorderedArrays:!1,unorderedSets:!1,excludeKeys:void 0,excludeValues:void 0,replacer:void 0});function objectHash(e,t){const r=createHasher(t=t?{...O,...t}:O);return r.dispatch(e),r.toString()}const x=Object.freeze(["prototype","__proto__","constructor"]);function createHasher(e){let t="",r=new Map;const write=e=>{t+=e};return{toString:()=>t,getContext:()=>r,dispatch(t){e.replacer&&(t=e.replacer(t));return this[null===t?"null":typeof t](t)},object(t){if(t&&"function"==typeof t.toJSON)return this.object(t.toJSON());const n=Object.prototype.toString.call(t);let s="";const i=n.length;s=i<10?"unknown:["+n+"]":n.slice(8,i-1),s=s.toLowerCase();let o=null;if(void 0!==(o=r.get(t)))return this.dispatch("[CIRCULAR:"+o+"]");if(r.set(t,r.size),void 0!==u&&u.isBuffer&&u.isBuffer(t))return write("buffer:"),write(t.toString("utf8"));if("object"!==s&&"function"!==s&&"asyncfunction"!==s)this[s]?this[s](t):e.ignoreUnknown||this.unkown(t,s);else{let r=Object.keys(t);e.unorderedObjects&&(r=r.sort());let n=[];!1===e.respectType||isNativeFunction(t)||(n=x),e.excludeKeys&&(r=r.filter((t=>!e.excludeKeys(t))),n=n.filter((t=>!e.excludeKeys(t)))),write("object:"+(r.length+n.length)+":");const dispatchForKey=r=>{this.dispatch(r),write(":"),e.excludeValues||this.dispatch(t[r]),write(",")};for(const e of r)dispatchForKey(e);for(const e of n)dispatchForKey(e)}},array(t,n){if(n=void 0===n?!1!==e.unorderedArrays:n,write("array:"+t.length+":"),!n||t.length<=1){for(const e of t)this.dispatch(e);return}const s=new Map,i=t.map((t=>{const r=createHasher(e);r.dispatch(t);for(const[e,t]of r.getContext())s.set(e,t);return r.toString()}));return r=s,i.sort(),this.array(i,!1)},date:e=>write("date:"+e.toJSON()),symbol:e=>write("symbol:"+e.toString()),unkown(e,t){if(write(t),e)return write(":"),e&&"function"==typeof e.entries?this.array(Array.from(e.entries()),!0):void 0},error:e=>write("error:"+e.toString()),boolean:e=>write("bool:"+e),string(e){write("string:"+e.length+":"),write(e)},function(t){write("fn:"),isNativeFunction(t)?this.dispatch("[native]"):this.dispatch(t.toString()),!1!==e.respectFunctionNames&&this.dispatch("function-name:"+String(t.name)),e.respectFunctionProperties&&this.object(t)},number:e=>write("number:"+e),xml:e=>write("xml:"+e.toString()),null:()=>write("Null"),undefined:()=>write("Undefined"),regexp:e=>write("regex:"+e.toString()),uint8array(e){return write("uint8array:"),this.dispatch(Array.prototype.slice.call(e))},uint8clampedarray(e){return write("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(e))},int8array(e){return write("int8array:"),this.dispatch(Array.prototype.slice.call(e))},uint16array(e){return write("uint16array:"),this.dispatch(Array.prototype.slice.call(e))},int16array(e){return write("int16array:"),this.dispatch(Array.prototype.slice.call(e))},uint32array(e){return write("uint32array:"),this.dispatch(Array.prototype.slice.call(e))},int32array(e){return write("int32array:"),this.dispatch(Array.prototype.slice.call(e))},float32array(e){return write("float32array:"),this.dispatch(Array.prototype.slice.call(e))},float64array(e){return write("float64array:"),this.dispatch(Array.prototype.slice.call(e))},arraybuffer(e){return write("arraybuffer:"),this.dispatch(new Uint8Array(e))},url:e=>write("url:"+e.toString()),map(t){write("map:");const r=[...t];return this.array(r,!1!==e.unorderedSets)},set(t){write("set:");const r=[...t];return this.array(r,!1!==e.unorderedSets)},file(e){return write("file:"),this.dispatch([e.name,e.size,e.type,e.lastModfied])},blob(){if(e.ignoreUnknown)return write("[blob]");throw new Error('Hashing Blob objects is currently not supported\nUse "options.replacer" or "options.ignoreUnknown"\n')},domwindow:()=>write("domwindow"),bigint:e=>write("bigint:"+e.toString()),process:()=>write("process"),timer:()=>write("timer"),pipe:()=>write("pipe"),tcp:()=>write("tcp"),udp:()=>write("udp"),tty:()=>write("tty"),statwatcher:()=>write("statwatcher"),securecontext:()=>write("securecontext"),connection:()=>write("connection"),zlib:()=>write("zlib"),context:()=>write("context"),nodescript:()=>write("nodescript"),httpparser:()=>write("httpparser"),dataview:()=>write("dataview"),signal:()=>write("signal"),fsevent:()=>write("fsevent"),tlswrap:()=>write("tlswrap")}}const C="[native code] }",P=C.length;function isNativeFunction(e){return"function"==typeof e&&Function.prototype.toString.call(e).slice(-P)===C}class WordArray{constructor(e,t){e=this.words=e||[],this.sigBytes=void 0===t?4*e.length:t}toString(e){return(e||A).stringify(this)}concat(e){if(this.clamp(),this.sigBytes%4)for(let t=0;t<e.sigBytes;t++){const r=e.words[t>>>2]>>>24-t%4*8&255;this.words[this.sigBytes+t>>>2]|=r<<24-(this.sigBytes+t)%4*8}else for(let t=0;t<e.sigBytes;t+=4)this.words[this.sigBytes+t>>>2]=e.words[t>>>2];return this.sigBytes+=e.sigBytes,this}clamp(){this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4)}clone(){return new WordArray([...this.words])}}const A={stringify(e){const t=[];for(let r=0;r<e.sigBytes;r++){const n=e.words[r>>>2]>>>24-r%4*8&255;t.push((n>>>4).toString(16),(15&n).toString(16))}return t.join("")}},N={stringify(e){const t=[];for(let r=0;r<e.sigBytes;r+=3){const n=(e.words[r>>>2]>>>24-r%4*8&255)<<16|(e.words[r+1>>>2]>>>24-(r+1)%4*8&255)<<8|e.words[r+2>>>2]>>>24-(r+2)%4*8&255;for(let s=0;s<4&&8*r+6*s<8*e.sigBytes;s++)t.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n>>>6*(3-s)&63))}return t.join("")}},R={parse(e){const t=e.length,r=[];for(let n=0;n<t;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new WordArray(r,t)}},j={parse:e=>R.parse(unescape(encodeURIComponent(e)))};class BufferedBlockAlgorithm{constructor(){this._data=new WordArray,this._nDataBytes=0,this._minBufferSize=0,this.blockSize=16}reset(){this._data=new WordArray,this._nDataBytes=0}_append(e){"string"==typeof e&&(e=j.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes}_doProcessBlock(e,t){}_process(e){let t,r=this._data.sigBytes/(4*this.blockSize);r=e?Math.ceil(r):Math.max((0|r)-this._minBufferSize,0);const n=r*this.blockSize,s=Math.min(4*n,this._data.sigBytes);if(n){for(let e=0;e<n;e+=this.blockSize)this._doProcessBlock(this._data.words,e);t=this._data.words.splice(0,n),this._data.sigBytes-=s}return new WordArray(t,s)}}class Hasher extends BufferedBlockAlgorithm{update(e){return this._append(e),this._process(),this}finalize(e){e&&this._append(e)}}const q=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],$=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],M=[];class SHA256 extends Hasher{constructor(){super(...arguments),this._hash=new WordArray([...q])}reset(){super.reset(),this._hash=new WordArray([...q])}_doProcessBlock(e,t){const r=this._hash.words;let n=r[0],s=r[1],i=r[2],o=r[3],a=r[4],c=r[5],l=r[6],u=r[7];for(let r=0;r<64;r++){if(r<16)M[r]=0|e[t+r];else{const e=M[r-15],t=(e<<25|e>>>7)^(e<<14|e>>>18)^e>>>3,n=M[r-2],s=(n<<15|n>>>17)^(n<<13|n>>>19)^n>>>10;M[r]=t+M[r-7]+s+M[r-16]}const d=n&s^n&i^s&i,f=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),p=u+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&c^~a&l)+$[r]+M[r];u=l,l=c,c=a,a=o+p|0,o=i,i=s,s=n,n=p+(f+d)|0}r[0]=r[0]+n|0,r[1]=r[1]+s|0,r[2]=r[2]+i|0,r[3]=r[3]+o|0,r[4]=r[4]+a|0,r[5]=r[5]+c|0,r[6]=r[6]+l|0,r[7]=r[7]+u|0}finalize(e){super.finalize(e);const t=8*this._nDataBytes,r=8*this._data.sigBytes;return this._data.words[r>>>5]|=128<<24-r%32,this._data.words[14+(r+64>>>9<<4)]=Math.floor(t/4294967296),this._data.words[15+(r+64>>>9<<4)]=t,this._data.sigBytes=4*this._data.words.length,this._process(),this._hash}}function hash(e,t={}){const r="string"==typeof e?e:objectHash(e,t);return(n=r,(new SHA256).finalize(n).toString(N)).slice(0,10);var n}const B={NORMAL:0,WILDCARD:1,PLACEHOLDER:2};function createRouter$1(e={}){const t={options:e,rootNode:createRadixNode(),staticRoutesMap:{}},normalizeTrailingSlash=t=>e.strictTrailingSlash?t:t.replace(/\/$/,"")||"/";if(e.routes)for(const r in e.routes)insert(t,normalizeTrailingSlash(r),e.routes[r]);return{ctx:t,lookup:e=>function(e,t){const r=e.staticRoutesMap[t];if(r)return r.data;const n=t.split("/"),s={};let i=!1,o=null,a=e.rootNode,c=null;for(let e=0;e<n.length;e++){const t=n[e];null!==a.wildcardChildNode&&(o=a.wildcardChildNode,c=n.slice(e).join("/"));const r=a.children.get(t);if(void 0!==r)a=r;else{if(a=a.placeholderChildNode,null===a)break;s[a.paramName]=t,i=!0}}null!==a&&null!==a.data||null===o||(a=o,s[a.paramName||"_"]=c,i=!0);if(!a)return null;if(i)return{...a.data,params:i?s:void 0};return a.data}(t,normalizeTrailingSlash(e)),insert:(e,r)=>insert(t,normalizeTrailingSlash(e),r),remove:e=>function(e,t){let r=!1;const n=t.split("/");let s=e.rootNode;for(const e of n)if(s=s.children.get(e),!s)return r;if(s.data){const e=n[n.length-1];if(s.data=null,0===Object.keys(s.children).length){const t=s.parent;t.children.delete(e),t.wildcardChildNode=null,t.placeholderChildNode=null}r=!0}return r}(t,normalizeTrailingSlash(e))}}function insert(e,t,r){let n=!0;const s=t.split("/");let i=e.rootNode,o=0;for(const e of s){let t;if(t=i.children.get(e))i=t;else{const r=getNodeType(e);t=createRadixNode({type:r,parent:i}),i.children.set(e,t),r===B.PLACEHOLDER?(t.paramName="*"===e?"_"+o++:e.slice(1),i.placeholderChildNode=t,n=!1):r===B.WILDCARD&&(i.wildcardChildNode=t,t.paramName=e.slice(3)||"_",n=!1),i=t}}return i.data=r,!0===n&&(e.staticRoutesMap[t]=i),i}function createRadixNode(e={}){return{type:e.type||B.NORMAL,parent:e.parent||null,children:new Map,data:e.data||null,paramName:e.paramName||null,wildcardChildNode:null,placeholderChildNode:null}}function getNodeType(e){return e.startsWith("**")?B.WILDCARD:":"===e[0]||"*"===e?B.PLACEHOLDER:B.NORMAL}function toRouteMatcher(e){return function(e){return{ctx:{table:e},matchAll:t=>_matchRoutes(t,e)}}(_routerNodeToTable("",e.ctx.rootNode))}function _matchRoutes(e,t){const r=[];for(const[n,s]of _sortRoutesMap(t.wildcard))e.startsWith(n)&&r.push(s);for(const[n,s]of _sortRoutesMap(t.dynamic))if(e.startsWith(n+"/")){const t="/"+e.slice(n.length).split("/").splice(2).join("/");r.push(..._matchRoutes(t,s))}const n=t.static.get(e);return n&&r.push(n),r.filter(Boolean)}function _sortRoutesMap(e){return[...e.entries()].sort(((e,t)=>e[0].length-t[0].length))}function _routerNodeToTable(e,t){const r={static:new Map,wildcard:new Map,dynamic:new Map};return function _addNode(e,t){if(e)if(t.type!==B.NORMAL||e.includes("*")||e.includes(":")){if(t.type===B.WILDCARD)r.wildcard.set(e.replace("/**",""),t.data);else if(t.type===B.PLACEHOLDER){const n=_routerNodeToTable("",t);return t.data&&n.static.set("/",t.data),void r.dynamic.set(e.replace(/\/\*|\/:\w+/,""),n)}}else r.static.set(e,t.data);for(const[r,n]of t.children.entries())_addNode(`${e}/${r}`.replace("//","/"),n)}(e,t),r}const L=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,U=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,D=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function jsonParseTransform(e,t){if(!("__proto__"===e||"constructor"===e&&t&&"object"==typeof t&&"prototype"in t))return t;!function(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}(e)}function destr(e,t={}){if("string"!=typeof e)return e;const r=e.trim();if('"'===e[0]&&'"'===e.at(-1)&&!e.includes("\\"))return r.slice(1,-1);if(r.length<=9){const e=r.toLowerCase();if("true"===e)return!0;if("false"===e)return!1;if("undefined"===e)return;if("null"===e)return null;if("nan"===e)return Number.NaN;if("infinity"===e)return Number.POSITIVE_INFINITY;if("-infinity"===e)return Number.NEGATIVE_INFINITY}if(!D.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(L.test(e)||U.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,jsonParseTransform)}return JSON.parse(e)}catch(r){if(t.strict)throw r;return e}}function isPlainObject$2(e){if(null===e||"object"!=typeof e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&(!(Symbol.iterator in e)&&(!(Symbol.toStringTag in e)||"[object Module]"===Object.prototype.toString.call(e)))}function _defu(e,t,r=".",n){if(!isPlainObject$2(t))return _defu(e,{},r,n);const s=Object.assign({},t);for(const t in e){if("__proto__"===t||"constructor"===t)continue;const i=e[t];null!=i&&(n&&n(s,t,i,r)||(Array.isArray(i)&&Array.isArray(s[t])?s[t]=[...i,...s[t]]:isPlainObject$2(i)&&isPlainObject$2(s[t])?s[t]=_defu(i,s[t],(r?`${r}.`:"")+t.toString(),n):s[t]=i))}return s}function createDefu(e){return(...t)=>t.reduce(((t,r)=>_defu(t,r,"",e)),{})}const Z=createDefu(),K=createDefu(((e,t,r)=>{if(void 0!==e[t]&&"function"==typeof r)return e[t]=r(e[t]),!0}));let F=10,z=class{__unenv__=!0;_events=Object.create(null);_maxListeners;static get defaultMaxListeners(){return F}static set defaultMaxListeners(e){if("number"!=typeof e||e<0||Number.isNaN(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");F=e}setMaxListeners(e){if("number"!=typeof e||e<0||Number.isNaN(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this}getMaxListeners(){return _getMaxListeners$1(this)}emit(e,...t){if(!this._events[e]||0===this._events[e].length)return!1;if("error"===e){let e;if(t.length>0&&(e=t[0]),e instanceof Error)throw e;const r=new Error("Unhandled error."+(e?" ("+e.message+")":""));throw r.context=e,r}for(const r of this._events[e])(r.listener||r).apply(this,t);return!0}addListener(e,t){return _addListener$1(this,e,t,!1)}on(e,t){return _addListener$1(this,e,t,!1)}prependListener(e,t){return _addListener$1(this,e,t,!0)}once(e,t){return this.on(e,_wrapOnce$1(this,e,t))}prependOnceListener(e,t){return this.prependListener(e,_wrapOnce$1(this,e,t))}removeListener(e,t){return function(e,t,r){if(_checkListener$1(r),!e._events[t]||0===e._events[t].length)return e;const n=e._events[t].length;if(e._events[t]=e._events[t].filter((e=>e!==r)),n===e._events[t].length)return e;e._events.removeListener&&e.emit("removeListener",t,r.listener||r);0===e._events[t].length&&delete e._events[t];return e}(this,e,t)}off(e,t){return this.removeListener(e,t)}removeAllListeners(e){return function(e,t){if(!e._events[t]||0===e._events[t].length)return e;if(e._events.removeListener)for(const r of e._events[t])e.emit("removeListener",t,r.listener||r);return delete e._events[t],e}(this,e)}listeners(e){return _listeners$1(this,e,!0)}rawListeners(e){return _listeners$1(this,e,!1)}listenerCount(e){return this.rawListeners(e).length}eventNames(){return Object.keys(this._events)}};function _addListener$1(e,t,r,n){_checkListener$1(r),void 0!==e._events.newListener&&e.emit("newListener",t,r.listener||r),e._events[t]||(e._events[t]=[]),n?e._events[t].unshift(r):e._events[t].push(r);const s=_getMaxListeners$1(e);if(s>0&&e._events[t].length>s&&!e._events[t].warned){e._events[t].warned=!0;const r=new Error(`[unenv] Possible EventEmitter memory leak detected. ${e._events[t].length} ${t} listeners added. Use emitter.setMaxListeners() to increase limit`);r.name="MaxListenersExceededWarning",r.emitter=e,r.type=t,r.count=e._events[t]?.length,console.warn(r)}return e}function _wrapOnce$1(e,t,r){let n=!1;const wrapper=(...s)=>{if(!n)return e.removeListener(t,wrapper),n=!0,0===s.length?r.call(e):r.apply(e,s)};return wrapper.listener=r,wrapper}function _getMaxListeners$1(e){return e._maxListeners??z.defaultMaxListeners}function _listeners$1(e,t,r){let n=e._events[t];return"function"==typeof n&&(n=[n]),r?n.map((e=>e.listener||e)):n}function _checkListener$1(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}const H=globalThis.EventEmitter||z;let W=class _Readable extends H{__unenv__=!0;readableEncoding=null;readableEnded=!0;readableFlowing=!1;readableHighWaterMark=0;readableLength=0;readableObjectMode=!1;readableAborted=!1;readableDidRead=!1;closed=!1;errored=null;readable=!1;destroyed=!1;static from(e,t){return new _Readable(t)}constructor(e){super()}_read(e){}read(e){}setEncoding(e){return this}pause(){return this}resume(){return this}isPaused(){return!0}unpipe(e){return this}unshift(e,t){}wrap(e){return this}push(e,t){return!1}_destroy(e,t){this.removeAllListeners()}destroy(e){return this.destroyed=!0,this._destroy(e),this}pipe(e,t){return{}}compose(e,t){throw new Error("[unenv] Method not implemented.")}[Symbol.asyncDispose](){return this.destroy(),Promise.resolve()}async*[Symbol.asyncIterator](){throw createNotImplementedError$1("Readable.asyncIterator")}iterator(e){throw createNotImplementedError$1("Readable.iterator")}map(e,t){throw createNotImplementedError$1("Readable.map")}filter(e,t){throw createNotImplementedError$1("Readable.filter")}forEach(e,t){throw createNotImplementedError$1("Readable.forEach")}reduce(e,t,r){throw createNotImplementedError$1("Readable.reduce")}find(e,t){throw createNotImplementedError$1("Readable.find")}findIndex(e,t){throw createNotImplementedError$1("Readable.findIndex")}some(e,t){throw createNotImplementedError$1("Readable.some")}toArray(e){throw createNotImplementedError$1("Readable.toArray")}every(e,t){throw createNotImplementedError$1("Readable.every")}flatMap(e,t){throw createNotImplementedError$1("Readable.flatMap")}drop(e,t){throw createNotImplementedError$1("Readable.drop")}take(e,t){throw createNotImplementedError$1("Readable.take")}asIndexedPairs(e){throw createNotImplementedError$1("Readable.asIndexedPairs")}};const V=globalThis.Readable||W;const Q=globalThis.Writable||class extends H{__unenv__=!0;writable=!0;writableEnded=!1;writableFinished=!1;writableHighWaterMark=0;writableLength=0;writableObjectMode=!1;writableCorked=0;closed=!1;errored=null;writableNeedDrain=!1;destroyed=!1;_data;_encoding="utf-8";constructor(e){super()}pipe(e,t){return{}}_write(e,t,r){if(this.writableEnded)r&&r();else{if(void 0===this._data)this._data=e;else{const r="string"==typeof this._data?u.from(this._data,this._encoding||t||"utf8"):this._data,n="string"==typeof e?u.from(e,t||this._encoding||"utf8"):e;this._data=u.concat([r,n])}this._encoding=t,r&&r()}}_writev(e,t){}_destroy(e,t){}_final(e){}write(e,t,r){const n="string"==typeof t?this._encoding:"utf-8",s="function"==typeof t?t:"function"==typeof r?r:void 0;return this._write(e,n,s),!0}setDefaultEncoding(e){return this}end(e,t,r){const n="function"==typeof e?e:"function"==typeof t?t:"function"==typeof r?r:void 0;if(this.writableEnded)return n&&n(),this;const s=e===n?void 0:e;if(s){const e=t===n?void 0:t;this.write(s,e,n)}return this.writableEnded=!0,this.writableFinished=!0,this.emit("close"),this.emit("finish"),this}cork(){}uncork(){}destroy(e){return this.destroyed=!0,delete this._data,this.removeAllListeners(),this}compose(e,t){throw new Error("[h3] Method not implemented.")}},J=class{allowHalfOpen=!0;_destroy;constructor(e=new V,t=new Q){Object.assign(this,e),Object.assign(this,t),this._destroy=function(...e){return function(...t){for(const r of e)r(...t)}}(e._destroy,t._destroy)}};function getDuplex$1(){return Object.assign(J.prototype,V.prototype),Object.assign(J.prototype,Q.prototype),J}const G=getDuplex$1(),Y=globalThis.Duplex||G;let X=class extends Y{__unenv__=!0;bufferSize=0;bytesRead=0;bytesWritten=0;connecting=!1;destroyed=!1;pending=!1;localAddress="";localPort=0;remoteAddress="";remoteFamily="";remotePort=0;autoSelectFamilyAttemptedAddresses=[];readyState="readOnly";constructor(e){super()}write(e,t,r){return!1}connect(e,t,r){return this}end(e,t,r){return this}setEncoding(e){return this}pause(){return this}resume(){return this}setTimeout(e,t){return this}setNoDelay(e){return this}setKeepAlive(e,t){return this}address(){return{}}unref(){return this}ref(){return this}destroySoon(){this.destroy()}resetAndDestroy(){const e=new Error("ERR_SOCKET_CLOSED");return e.code="ERR_SOCKET_CLOSED",this.destroy(e),this}},ee=class extends V{__unenv__={};aborted=!1;httpVersion="1.1";httpVersionMajor=1;httpVersionMinor=1;complete=!0;connection;socket;headers={};trailers={};method="GET";url="/";statusCode=200;statusMessage="";closed=!1;errored=null;readable=!1;constructor(e){super(),this.socket=this.connection=e||new X}get rawHeaders(){return function(e){const t=[];for(const r in e)if(Array.isArray(e[r]))for(const n of e[r])t.push(r,n);else t.push(r,e[r]);return t}(this.headers)}get rawTrailers(){return[]}setTimeout(e,t){return this}get headersDistinct(){return _distinct$1(this.headers)}get trailersDistinct(){return _distinct$1(this.trailers)}};function _distinct$1(e){const t={};for(const[r,n]of Object.entries(e))r&&(t[r]=(Array.isArray(n)?n:[n]).filter(Boolean));return t}let te=class extends Q{__unenv__=!0;statusCode=200;statusMessage="";upgrading=!1;chunkedEncoding=!1;shouldKeepAlive=!1;useChunkedEncodingByDefault=!1;sendDate=!1;finished=!1;headersSent=!1;strictContentLength=!1;connection=null;socket=null;req;_headers={};constructor(e){super(),this.req=e}assignSocket(e){e._httpMessage=this,this.socket=e,this.connection=e,this.emit("socket",e),this._flush()}_flush(){this.flushHeaders()}detachSocket(e){}writeContinue(e){}writeHead(e,t,r){e&&(this.statusCode=e),"string"==typeof t&&(this.statusMessage=t,t=void 0);const n=r||t;if(n)if(Array.isArray(n));else for(const e in n)this.setHeader(e,n[e]);return this.headersSent=!0,this}writeProcessing(){}setTimeout(e,t){return this}appendHeader(e,t){e=e.toLowerCase();const r=this._headers[e],n=[...Array.isArray(r)?r:[r],...Array.isArray(t)?t:[t]].filter(Boolean);return this._headers[e]=n.length>1?n:n[0],this}setHeader(e,t){return this._headers[e.toLowerCase()]=t,this}getHeader(e){return this._headers[e.toLowerCase()]}getHeaders(){return this._headers}getHeaderNames(){return Object.keys(this._headers)}hasHeader(e){return e.toLowerCase()in this._headers}removeHeader(e){delete this._headers[e.toLowerCase()]}addTrailers(e){}flushHeaders(){}writeEarlyHints(e,t){"function"==typeof t&&t()}};function hasProp(e,t){try{return t in e}catch{return!1}}var re=Object.defineProperty,__publicField$1=(e,t,r)=>(((e,t,r)=>{t in e?re(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class H3Error extends Error{constructor(e,t={}){super(e,t),__publicField$1(this,"statusCode",500),__publicField$1(this,"fatal",!1),__publicField$1(this,"unhandled",!1),__publicField$1(this,"statusMessage"),__publicField$1(this,"data"),__publicField$1(this,"cause"),t.cause&&!this.cause&&(this.cause=t.cause)}toJSON(){const e={message:this.message,statusCode:sanitizeStatusCode(this.statusCode,500)};return this.statusMessage&&(e.statusMessage=sanitizeStatusMessage(this.statusMessage)),void 0!==this.data&&(e.data=this.data),e}}function createError(e){if("string"==typeof e)return new H3Error(e);if(isError$1(e))return e;const t=new H3Error(e.message??e.statusMessage??"",{cause:e.cause||e});if(hasProp(e,"stack"))try{Object.defineProperty(t,"stack",{get:()=>e.stack})}catch{try{t.stack=e.stack}catch{}}if(e.data&&(t.data=e.data),e.statusCode?t.statusCode=sanitizeStatusCode(e.statusCode,t.statusCode):e.status&&(t.statusCode=sanitizeStatusCode(e.status,t.statusCode)),e.statusMessage?t.statusMessage=e.statusMessage:e.statusText&&(t.statusMessage=e.statusText),t.statusMessage){const e=t.statusMessage;sanitizeStatusMessage(t.statusMessage)!==e&&console.warn("[h3] Please prefer using `message` for longer error messages instead of `statusMessage`. In the future, `statusMessage` will be sanitized by default.")}return void 0!==e.fatal&&(t.fatal=e.fatal),void 0!==e.unhandled&&(t.unhandled=e.unhandled),t}function isError$1(e){return!0===e?.constructor?.__h3_error__}function getRequestHeaders(e){const t={};for(const r in e.node.req.headers){const n=e.node.req.headers[r];t[r]=Array.isArray(n)?n.filter(Boolean).join(", "):n}return t}__publicField$1(H3Error,"__h3_error__",!0);const ne=Symbol.for("h3RawBody"),se=["PATCH","POST","PUT","DELETE"];function readRawBody(e,t="utf8"){!function(e,t,r){if(!function(e,t,r){if(r&&"HEAD"===e.method)return!0;if("string"==typeof t){if(e.method===t)return!0}else if(t.includes(e.method))return!0;return!1}(e,t,r))throw createError({statusCode:405,statusMessage:"HTTP method is not allowed."})}(e,se);const r=e._requestBody||e.web?.request?.body||e.node.req[ne]||e.node.req.rawBody||e.node.req.body;if(r){const e=Promise.resolve(r).then((e=>u.isBuffer(e)?e:"function"==typeof e.pipeTo?new Promise(((t,r)=>{const n=[];e.pipeTo(new WritableStream({write(e){n.push(e)},close(){t(u.concat(n))},abort(e){r(e)}})).catch(r)})):"function"==typeof e.pipe?new Promise(((t,r)=>{const n=[];e.on("data",(e=>{n.push(e)})).on("end",(()=>{t(u.concat(n))})).on("error",r)})):e.constructor===Object?u.from(JSON.stringify(e)):u.from(e)));return t?e.then((e=>e.toString(t))):e}if(!Number.parseInt(e.node.req.headers["content-length"]||""))return Promise.resolve(void 0);const n=e.node.req[ne]=new Promise(((t,r)=>{const n=[];e.node.req.on("error",(e=>{r(e)})).on("data",(e=>{n.push(e)})).on("end",(()=>{t(u.concat(n))}))}));return t?n.then((e=>e.toString(t))):n}function handleCacheHeaders(e,t){const r=["public",...t.cacheControls||[]];let n=!1;if(void 0!==t.maxAge&&r.push("max-age="+ +t.maxAge,"s-maxage="+ +t.maxAge),t.modifiedTime){const r=new Date(t.modifiedTime),s=e.node.req.headers["if-modified-since"];e.node.res.setHeader("last-modified",r.toUTCString()),s&&new Date(s)>=t.modifiedTime&&(n=!0)}if(t.etag){e.node.res.setHeader("etag",t.etag);e.node.req.headers["if-none-match"]===t.etag&&(n=!0)}return e.node.res.setHeader("cache-control",r.join(", ")),!!n&&(e.node.res.statusCode=304,e.handled||e.node.res.end(),!0)}const ie={html:"text/html",json:"application/json"},oe=/[^\u0009\u0020-\u007E]/g;function sanitizeStatusMessage(e=""){return e.replace(oe,"")}function sanitizeStatusCode(e,t=200){return e?("string"==typeof e&&(e=Number.parseInt(e,10)),e<100||e>999?t:e):t}function splitCookiesString(e){if(Array.isArray(e))return e.flatMap((e=>splitCookiesString(e)));if("string"!=typeof e)return[];const t=[];let r,n,s,i,o,a=0;const skipWhitespace=()=>{for(;a<e.length&&/\s/.test(e.charAt(a));)a+=1;return a<e.length};for(;a<e.length;){for(r=a,o=!1;skipWhitespace();)if(n=e.charAt(a),","===n){for(s=a,a+=1,skipWhitespace(),i=a;a<e.length&&(n=e.charAt(a),"="!==n&&";"!==n&&","!==n);)a+=1;a<e.length&&"="===e.charAt(a)?(o=!0,a=i,t.push(e.slice(r,s)),r=a):a=s+1}else a+=1;(!o||a>=e.length)&&t.push(e.slice(r,e.length))}return t}const ae="undefined"==typeof setImmediate?e=>e():setImmediate;function send(e,t,r){return r&&function(e,t){t&&304!==e.node.res.statusCode&&!e.node.res.getHeader("content-type")&&e.node.res.setHeader("content-type",t)}(e,r),new Promise((r=>{ae((()=>{e.handled||e.node.res.end(t),r()}))}))}function setResponseStatus(e,t,r){t&&(e.node.res.statusCode=sanitizeStatusCode(t,e.node.res.statusCode)),r&&(e.node.res.statusMessage=sanitizeStatusMessage(r))}const setHeaders=function(e,t){for(const[r,n]of Object.entries(t))e.node.res.setHeader(r,n)};function setResponseHeader(e,t,r){e.node.res.setHeader(t,r)}function sendStream(e,t){if(!t||"object"!=typeof t)throw new Error("[h3] Invalid stream provided.");if(e.node.res._data=t,!e.node.res.socket)return e._handled=!0,Promise.resolve();if(hasProp(t,"pipeTo")&&"function"==typeof t.pipeTo)return t.pipeTo(new WritableStream({write(t){e.node.res.write(t)}})).then((()=>{e.node.res.end()}));if(hasProp(t,"pipe")&&"function"==typeof t.pipe)return new Promise(((r,n)=>{t.pipe(e.node.res),t.on&&(t.on("end",(()=>{e.node.res.end(),r()})),t.on("error",(e=>{n(e)}))),e.node.res.on("close",(()=>{t.abort&&t.abort()}))}));throw new Error("[h3] Invalid or incompatible stream provided.")}function sendWebResponse(e,t){for(const[r,n]of t.headers)"set-cookie"===r?e.node.res.appendHeader(r,splitCookiesString(n)):e.node.res.setHeader(r,n);if(t.status&&(e.node.res.statusCode=sanitizeStatusCode(t.status,e.node.res.statusCode)),t.statusText&&(e.node.res.statusMessage=sanitizeStatusMessage(t.statusText)),t.redirected&&e.node.res.setHeader("location",t.url),t.body)return sendStream(e,t.body);e.node.res.end()}const ce=new Set(["PATCH","POST","PUT","DELETE"]),le=new Set(["transfer-encoding","connection","keep-alive","upgrade","expect","host"]);async function proxyRequest(e,t,r={}){let n,s;ce.has(e.method)&&(r.streamRequest?(n=function(e){if(!se.includes(e.method))return;const t=e.web?.request?.body||e._requestBody;return t||(ne in e.node.req||"rawBody"in e.node.req||"body"in e.node.req||"__unenv__"in e.node.req?new ReadableStream({async start(t){const r=await readRawBody(e,!1);r&&t.enqueue(r),t.close()}}):new ReadableStream({start:t=>{e.node.req.on("data",(e=>{t.enqueue(e)})),e.node.req.on("end",(()=>{t.close()})),e.node.req.on("error",(e=>{t.error(e)}))}}))}(e),s="half"):n=await readRawBody(e,!1).catch((()=>{})));const i=r.fetchOptions?.method||e.method,o=function(e,...t){const r=t.filter(Boolean);if(0===r.length)return e;const n=new Headers(e);for(const e of r)for(const[t,r]of Object.entries(e))void 0!==r&&n.set(t,r);return n}(getProxyRequestHeaders(e),r.fetchOptions?.headers,r.headers);return async function(e,t,r={}){const n=await _getFetch(r.fetch)(t,{headers:r.headers,ignoreResponseError:!0,...r.fetchOptions});e.node.res.statusCode=sanitizeStatusCode(n.status,e.node.res.statusCode),e.node.res.statusMessage=sanitizeStatusMessage(n.statusText);const s=[];for(const[t,r]of n.headers.entries())"content-encoding"!==t&&"content-length"!==t&&("set-cookie"!==t?e.node.res.setHeader(t,r):s.push(...splitCookiesString(r)));s.length>0&&e.node.res.setHeader("set-cookie",s.map((e=>(r.cookieDomainRewrite&&(e=rewriteCookieProperty(e,r.cookieDomainRewrite,"domain")),r.cookiePathRewrite&&(e=rewriteCookieProperty(e,r.cookiePathRewrite,"path")),e))));r.onResponse&&await r.onResponse(e,n);if(void 0!==n._data)return n._data;if(e.handled)return;if(!1===r.sendStream){const t=new Uint8Array(await n.arrayBuffer());return e.node.res.end(t)}if(n.body)for await(const t of n.body)e.node.res.write(t);return e.node.res.end()}(e,t,{...r,fetchOptions:{method:i,body:n,duplex:s,...r.fetchOptions,headers:o}})}function getProxyRequestHeaders(e){const t=Object.create(null),r=getRequestHeaders(e);for(const e in r)le.has(e)||(t[e]=r[e]);return t}function fetchWithEvent(e,t,r,n){return _getFetch(n?.fetch)(t,{...r,context:r?.context||e.context,headers:{...getProxyRequestHeaders(e),...r?.headers}})}function _getFetch(e){if(e)return e;if(globalThis.fetch)return globalThis.fetch;throw new Error("fetch is not available. Try importing `node-fetch-native/polyfill` for Node.js.")}function rewriteCookieProperty(e,t,r){const n="string"==typeof t?{"*":t}:t;return e.replace(new RegExp(`(;\\s*${r}=)([^;]+)`,"gi"),((e,t,r)=>{let s;if(r in n)s=n[r];else{if(!("*"in n))return e;s=n["*"]}return s?t+s:""}))}var ue=Object.defineProperty,__publicField=(e,t,r)=>(((e,t,r)=>{t in e?ue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class H3Event{constructor(e,t){__publicField(this,"__is_event__",!0),__publicField(this,"node"),__publicField(this,"web"),__publicField(this,"context",{}),__publicField(this,"_method"),__publicField(this,"_path"),__publicField(this,"_headers"),__publicField(this,"_requestBody"),__publicField(this,"_handled",!1),this.node={req:e,res:t}}get method(){return this._method||(this._method=(this.node.req.method||"GET").toUpperCase()),this._method}get path(){return this._path||this.node.req.url||"/"}get headers(){return this._headers||(this._headers=function(e){const t=new Headers;for(const[r,n]of Object.entries(e))if(Array.isArray(n))for(const e of n)t.append(r,e);else n&&t.set(r,n);return t}(this.node.req.headers)),this._headers}get handled(){return this._handled||this.node.res.writableEnded||this.node.res.headersSent}respondWith(e){return Promise.resolve(e).then((e=>sendWebResponse(this,e)))}toString(){return`[${this.method}] ${this.path}`}toJSON(){return this.toString()}get req(){return this.node.req}get res(){return this.node.res}}function isEvent(e){return hasProp(e,"__is_event__")}function createEvent(e,t){return new H3Event(e,t)}function defineEventHandler(e){if("function"==typeof e)return Object.assign(e,{__is_handler__:!0});const t={onRequest:_normalizeArray(e.onRequest),onBeforeResponse:_normalizeArray(e.onBeforeResponse)};return Object.assign((r=>async function(e,t,r){if(r.onRequest)for(const t of r.onRequest)if(await t(e),e.handled)return;const n=await t(e),s={body:n};if(r.onBeforeResponse)for(const t of r.onBeforeResponse)await t(e,s);return s.body}(r,e.handler,t)),{__is_handler__:!0})}function _normalizeArray(e){return e?Array.isArray(e)?e:[e]:void 0}const de=defineEventHandler;function isEventHandler(e){return hasProp(e,"__is_handler__")}function toEventHandler(e,t,r){return isEventHandler(e)||console.warn("[h3] Implicit event handler conversion is deprecated. Use `eventHandler()` or `fromNodeMiddleware()` to define event handlers.",r&&"/"!==r?`\n     Route: ${r}`:"",`\n     Handler: ${e}`),e}const lazyEventHandler=function(e){let t,r;return de((n=>r?r(n):(r?Promise.resolve(r):(t||(t=Promise.resolve(e()).then((e=>{const t=e.default||e;if("function"!=typeof t)throw new TypeError("Invalid lazy handler result. It should be a function:",t);return r=toEventHandler(e.default||e),r}))),t)).then((e=>e(n)))))};function createApp(e={}){const t=[],r=function(e,t){const r=t.debug?2:void 0;return de((async n=>{n.node.req.originalUrl=n.node.req.originalUrl||n.node.req.url||"/";const s=n._path||n.node.req.url||"/";let i;t.onRequest&&await t.onRequest(n);for(const o of e){if(o.route.length>1){if(!s.startsWith(o.route))continue;i=s.slice(o.route.length)||"/"}else i=s;if(o.match&&!o.match(i,n))continue;n._path=i,n.node.req.url=i;const e=await o.handler(n),a=void 0===e?void 0:await e;if(void 0!==a){const e={body:a};return t.onBeforeResponse&&await t.onBeforeResponse(n,e),await handleHandlerResponse(n,e.body,r),void(t.onAfterResponse&&await t.onAfterResponse(n,e))}if(n.handled)return void(t.onAfterResponse&&await t.onAfterResponse(n,void 0))}if(!n.handled)throw createError({statusCode:404,statusMessage:`Cannot find any path matching ${n.path||"/"}.`});t.onAfterResponse&&await t.onAfterResponse(n,void 0)}))}(t,e),n={use:(e,t,r)=>use(n,e,t,r),handler:r,stack:t,options:e};return n}function use(e,t,r,n){if(Array.isArray(t))for(const s of t)use(e,s,r,n);else if(Array.isArray(r))for(const s of r)use(e,t,s,n);else"string"==typeof t?e.stack.push(normalizeLayer({...n,route:t,handler:r})):"function"==typeof t?e.stack.push(normalizeLayer({...r,route:"/",handler:t})):e.stack.push(normalizeLayer({...t}));return e}function normalizeLayer(e){let t=e.handler;return t.handler&&(t=t.handler),e.lazy?t=lazyEventHandler(t):isEventHandler(t)||(t=toEventHandler(t,0,e.route)),{route:withoutTrailingSlash(e.route),match:e.match,handler:t}}function handleHandlerResponse(e,t,r){if(null===t)return function(e,t){if(e.handled)return;t||200===e.node.res.statusCode||(t=e.node.res.statusCode);const r=sanitizeStatusCode(t,204);204===r&&e.node.res.removeHeader("content-length"),e.node.res.writeHead(r),e.node.res.end()}(e);if(t){if(n=t,"undefined"!=typeof Response&&n instanceof Response)return sendWebResponse(e,t);if(function(e){if(!e||"object"!=typeof e)return!1;if("function"==typeof e.pipe){if("function"==typeof e._read)return!0;if("function"==typeof e.abort)return!0}return"function"==typeof e.pipeTo}(t))return sendStream(e,t);if(t.buffer)return send(e,t);if(t.arrayBuffer&&"function"==typeof t.arrayBuffer)return t.arrayBuffer().then((r=>send(e,u.from(r),t.type)));if(t instanceof Error)throw createError(t);if("function"==typeof t.end)return!0}var n;const s=typeof t;if("string"===s)return send(e,t,ie.html);if("object"===s||"boolean"===s||"number"===s)return send(e,JSON.stringify(t,void 0,r),ie.json);if("bigint"===s)return send(e,t.toString(),ie.json);throw createError({statusCode:500,statusMessage:`[h3] Cannot send ${s} as response.`})}const fe=["connect","delete","get","head","options","post","put","trace","patch"];function toNodeListener(e){return async function(t,r){const n=createEvent(t,r);try{await e.handler(n)}catch(t){const r=createError(t);if(isError$1(t)||(r.unhandled=!0),e.options.onError&&await e.options.onError(r,n),n.handled)return;(r.unhandled||r.fatal)&&console.error("[h3]",r.fatal?"[fatal]":"[unhandled]",r),await function(e,t,r){if(e.handled)return;const n=isError$1(t)?t:createError(t),s={statusCode:n.statusCode,statusMessage:n.statusMessage,stack:[],data:n.data};if(r&&(s.stack=(n.stack||"").split("\n").map((e=>e.trim()))),e.handled)return;setResponseStatus(e,Number.parseInt(n.statusCode),n.statusMessage),e.node.res.setHeader("content-type",ie.json),e.node.res.end(JSON.stringify(s,void 0,2))}(n,r,!!e.options.debug)}}}class FetchError extends Error{constructor(e,t){super(e,t),this.name="FetchError",t?.cause&&!this.cause&&(this.cause=t.cause)}}const pe=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function isPayloadMethod(e="GET"){return pe.has(e.toUpperCase())}const he=new Set(["image/svg","application/xml","application/xhtml","application/html"]),me=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function mergeFetchOptions(e,t,r=globalThis.Headers){const n={...t,...e};if(t?.params&&e?.params&&(n.params={...t?.params,...e?.params}),t?.query&&e?.query&&(n.query={...t?.query,...e?.query}),t?.headers&&e?.headers){n.headers=new r(t?.headers||{});for(const[t,s]of new r(e?.headers||{}))n.headers.set(t,s)}return n}const ye=new Set([408,409,425,429,500,502,503,504]),ge=new Set([101,204,205,304]);function createFetch$1(e={}){const{fetch:t=globalThis.fetch,Headers:r=globalThis.Headers,AbortController:n=globalThis.AbortController}=e;async function onError(e){const t=e.error&&"AbortError"===e.error.name&&!e.options.timeout||!1;if(!1!==e.options.retry&&!t){let t;t="number"==typeof e.options.retry?e.options.retry:isPayloadMethod(e.options.method)?0:1;const r=e.response&&e.response.status||500;if(t>0&&(Array.isArray(e.options.retryStatusCodes)?e.options.retryStatusCodes.includes(r):ye.has(r))){const r=e.options.retryDelay||0;return r>0&&await new Promise((e=>setTimeout(e,r))),$fetchRaw(e.request,{...e.options,retry:t-1,timeout:e.options.timeout})}}const r=function(e){const t=e.error?.message||e.error?.toString()||"",r=e.request?.method||e.options?.method||"GET",n=e.request?.url||String(e.request)||"/",s=`[${r}] ${JSON.stringify(n)}`,i=e.response?`${e.response.status} ${e.response.statusText}`:"<no response>",o=new FetchError(`${s}: ${i}${t?` ${t}`:""}`,e.error?{cause:e.error}:void 0);for(const t of["request","options","response"])Object.defineProperty(o,t,{get:()=>e[t]});for(const[t,r]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(o,t,{get:()=>e.response&&e.response[r]});return o}(e);throw Error.captureStackTrace&&Error.captureStackTrace(r,$fetchRaw),r}const $fetchRaw=async function(s,i={}){const o={request:s,options:mergeFetchOptions(i,e.defaults,r),response:void 0,error:void 0};if(o.options.method=o.options.method?.toUpperCase(),o.options.onRequest&&await o.options.onRequest(o),"string"==typeof o.request&&(o.options.baseURL&&(o.request=function(e,t){if(isEmptyURL(t)||hasProtocol(e))return e;const r=withoutTrailingSlash(t);return e.startsWith(r)?e:joinURL(r,e)}(o.request,o.options.baseURL)),(o.options.query||o.options.params)&&(o.request=withQuery(o.request,{...o.options.params,...o.options.query}))),o.options.body&&isPayloadMethod(o.options.method)&&(!function(e){if(void 0===e)return!1;const t=typeof e;return"string"===t||"number"===t||"boolean"===t||null===t||"object"===t&&(!!Array.isArray(e)||!e.buffer&&(e.constructor&&"Object"===e.constructor.name||"function"==typeof e.toJSON))}(o.options.body)?("pipeTo"in o.options.body&&"function"==typeof o.options.body.pipeTo||"function"==typeof o.options.body.pipe)&&("duplex"in o.options||(o.options.duplex="half")):(o.options.body="string"==typeof o.options.body?o.options.body:JSON.stringify(o.options.body),o.options.headers=new r(o.options.headers||{}),o.options.headers.has("content-type")||o.options.headers.set("content-type","application/json"),o.options.headers.has("accept")||o.options.headers.set("accept","application/json"))),!o.options.signal&&o.options.timeout){const e=new n;setTimeout((()=>e.abort()),o.options.timeout),o.options.signal=e.signal}try{o.response=await t(o.request,o.options)}catch(e){return o.error=e,o.options.onRequestError&&await o.options.onRequestError(o),await onError(o)}if(o.response.body&&!ge.has(o.response.status)&&"HEAD"!==o.options.method){const e=(o.options.parseResponse?"json":o.options.responseType)||function(e=""){if(!e)return"json";const t=e.split(";").shift()||"";return me.test(t)?"json":he.has(t)||t.startsWith("text/")?"text":"blob"}(o.response.headers.get("content-type")||"");switch(e){case"json":{const e=await o.response.text(),t=o.options.parseResponse||destr;o.response._data=t(e);break}case"stream":o.response._data=o.response.body;break;default:o.response._data=await o.response[e]()}}return o.options.onResponse&&await o.options.onResponse(o),!o.options.ignoreResponseError&&o.response.status>=400&&o.response.status<600?(o.options.onResponseError&&await o.options.onResponseError(o),await onError(o)):o.response},$fetch=async function(e,t){return(await $fetchRaw(e,t))._data};return $fetch.raw=$fetchRaw,$fetch.native=(...e)=>t(...e),$fetch.create=(t={})=>createFetch$1({...e,defaults:{...e.defaults,...t}}),$fetch}const be=function(){if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}(),_e=be.fetch||(()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!"))),we=be.Headers,ve=be.AbortController;createFetch$1({fetch:_e,Headers:we,AbortController:ve});const Se=new Set([101,204,205,304]);function flatHooks(e,t={},r){for(const n in e){const s=e[n],i=r?`${r}:${n}`:n;"object"==typeof s&&null!==s?flatHooks(s,t,i):"function"==typeof s&&(t[i]=s)}return t}const Ie={run:e=>e()},ke=void 0!==console.createTask?console.createTask:()=>Ie;function serialTaskCaller(e,t){const r=t.shift(),n=ke(r);return e.reduce(((e,r)=>e.then((()=>n.run((()=>r(...t)))))),Promise.resolve())}function parallelTaskCaller(e,t){const r=t.shift(),n=ke(r);return Promise.all(e.map((e=>n.run((()=>e(...t))))))}function callEachWith(e,t){for(const r of[...e])r(t)}class Hookable{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(e,t,r={}){if(!e||"function"!=typeof t)return()=>{};const n=e;let s;for(;this._deprecatedHooks[e];)s=this._deprecatedHooks[e],e=s.to;if(s&&!r.allowDeprecated){let e=s.message;e||(e=`${n} hook has been deprecated`+(s.to?`, please use ${s.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(e)||(console.warn(e),this._deprecatedMessages.add(e))}if(!t.name)try{Object.defineProperty(t,"name",{get:()=>"_"+e.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[e]=this._hooks[e]||[],this._hooks[e].push(t),()=>{t&&(this.removeHook(e,t),t=void 0)}}hookOnce(e,t){let r,_function=(...e)=>("function"==typeof r&&r(),r=void 0,_function=void 0,t(...e));return r=this.hook(e,_function),r}removeHook(e,t){if(this._hooks[e]){const r=this._hooks[e].indexOf(t);-1!==r&&this._hooks[e].splice(r,1),0===this._hooks[e].length&&delete this._hooks[e]}}deprecateHook(e,t){this._deprecatedHooks[e]="string"==typeof t?{to:t}:t;const r=this._hooks[e]||[];delete this._hooks[e];for(const t of r)this.hook(e,t)}deprecateHooks(e){Object.assign(this._deprecatedHooks,e);for(const t in e)this.deprecateHook(t,e[t])}addHooks(e){const t=flatHooks(e),r=Object.keys(t).map((e=>this.hook(e,t[e])));return()=>{for(const e of r.splice(0,r.length))e()}}removeHooks(e){const t=flatHooks(e);for(const e in t)this.removeHook(e,t[e])}removeAllHooks(){for(const e in this._hooks)delete this._hooks[e]}callHook(e,...t){return t.unshift(e),this.callHookWith(serialTaskCaller,e,...t)}callHookParallel(e,...t){return t.unshift(e),this.callHookWith(parallelTaskCaller,e,...t)}callHookWith(e,t,...r){const n=this._before||this._after?{name:t,args:r,context:{}}:void 0;this._before&&callEachWith(this._before,n);const s=e(t in this._hooks?[...this._hooks[t]]:[],r);return s instanceof Promise?s.finally((()=>{this._after&&n&&callEachWith(this._after,n)})):(this._after&&n&&callEachWith(this._after,n),s)}beforeEach(e){return this._before=this._before||[],this._before.push(e),()=>{if(void 0!==this._before){const t=this._before.indexOf(e);-1!==t&&this._before.splice(t,1)}}}afterEach(e){return this._after=this._after||[],this._after.push(e),()=>{if(void 0!==this._after){const t=this._after.indexOf(e);-1!==t&&this._after.splice(t,1)}}}}const Te=/\d/,Ee=["-","_","/","."];function isUppercase(e=""){if(!Te.test(e))return e!==e.toLowerCase()}function kebabCase(e,t){return e?(Array.isArray(e)?e:function(e,t){const r=t??Ee,n=[];if(!e||"string"!=typeof e)return n;let s,i,o="";for(const t of e){const e=r.includes(t);if(!0===e){n.push(o),o="",s=void 0;continue}const a=isUppercase(t);if(!1===i){if(!1===s&&!0===a){n.push(o),o=t,s=a;continue}if(!0===s&&!1===a&&o.length>1){const e=o.at(-1);n.push(o.slice(0,Math.max(0,o.length-1))),o=e+t,s=a;continue}}o+=t,s=a,i=e}return n.push(o),n}(e)).map((e=>e.toLowerCase())).join(t??"-"):""}function klona(e){if("object"!=typeof e)return e;var t,r,n=Object.prototype.toString.call(e);if("[object Object]"===n){if(e.constructor!==Object&&"function"==typeof e.constructor)for(t in r=new e.constructor,e)e.hasOwnProperty(t)&&r[t]!==e[t]&&(r[t]=klona(e[t]));else for(t in r={},e)"__proto__"===t?Object.defineProperty(r,t,{value:klona(e[t]),configurable:!0,enumerable:!0,writable:!0}):r[t]=klona(e[t]);return r}if("[object Array]"===n){for(t=e.length,r=Array(t);t--;)r[t]=klona(e[t]);return r}return"[object Set]"===n?(r=new Set,e.forEach((function(e){r.add(klona(e))})),r):"[object Map]"===n?(r=new Map,e.forEach((function(e,t){r.set(klona(t),klona(e))})),r):"[object Date]"===n?new Date(+e):"[object RegExp]"===n?((r=new RegExp(e.source,e.flags)).lastIndex=e.lastIndex,r):"[object DataView]"===n?new e.constructor(klona(e.buffer)):"[object ArrayBuffer]"===n?e.slice(0):"Array]"===n.slice(-6)?new e.constructor(e):e}const Oe=K({}),xe={app:{baseURL:"/"},nitro:{routeRules:{"/music/**":{proxy:{to:"https://api.deezer.com/**",_proxyStripBase:"/music"}}}}},Ce="NITRO_",Pe=xe.nitro.envPrefix??process.env.NITRO_ENV_PREFIX??"_",Ae=_deepFreeze(_applyEnv(klona(xe)));function useRuntimeConfig(e){if(!e)return Ae;if(e.context.nitro.runtimeConfig)return e.context.nitro.runtimeConfig;const t=klona(xe);return _applyEnv(t),e.context.nitro.runtimeConfig=t,t}function _getEnv(e){const t=(r=e,kebabCase(r||"","_")).toUpperCase();var r;return destr(process.env[Ce+t]??process.env[Pe+t])}function _isObject(e){return"object"==typeof e&&!Array.isArray(e)}function _applyEnv(e,t=""){for(const r in e){const n=t?`${t}_${r}`:r,s=_getEnv(n);_isObject(e[r])?(_isObject(s)&&(e[r]={...e[r],...s}),_applyEnv(e[r],n)):e[r]=s??e[r]}return e}function _deepFreeze(e){const t=Object.getOwnPropertyNames(e);for(const r of t){const t=e[r];t&&"object"==typeof t&&_deepFreeze(t)}return Object.freeze(e)}function asyncCall(e,...t){try{return(r=e(...t))&&"function"==typeof r.then?r:Promise.resolve(r)}catch(e){return Promise.reject(e)}var r}function stringify$1(e){if(function(e){const t=typeof e;return null===e||"object"!==t&&"function"!==t}(e))return String(e);if(function(e){const t=Object.getPrototypeOf(e);return!t||t.isPrototypeOf(Object)}(e)||Array.isArray(e))return JSON.stringify(e);if("function"==typeof e.toJSON)return stringify$1(e.toJSON());throw new Error("[unstorage] Cannot stringify value!")}function checkBufferSupport(){if(void 0===typeof u)throw new TypeError("[unstorage] Buffer is not supported!")}_deepFreeze(klona(Oe)),new Proxy(Object.create(null),{get:(e,t)=>{console.warn("Please use `useRuntimeConfig()` instead of accessing config directly.");const r=useRuntimeConfig();if(t in r)return r[t]}});const Ne="base64:";const Re=["hasItem","getItem","getItemRaw","setItem","setItemRaw","removeItem","getMeta","setMeta","removeMeta","getKeys","clear","mount","unmount"];function normalizeKey$1(e){return e?e.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function joinKeys(...e){return normalizeKey$1(e.join(":"))}function normalizeBaseKey(e){return(e=normalizeKey$1(e))?e+":":""}const memory=()=>{const e=new Map;return{name:"memory",options:{},hasItem:t=>e.has(t),getItem:t=>e.get(t)??null,getItemRaw:t=>e.get(t)??null,setItem(t,r){e.set(t,r)},setItemRaw(t,r){e.set(t,r)},removeItem(t){e.delete(t)},getKeys:()=>Array.from(e.keys()),clear(){e.clear()},dispose(){e.clear()}}};function watch(e,t,r){return e.watch?e.watch(((e,n)=>t(e,r+n))):()=>{}}async function dispose(e){"function"==typeof e.dispose&&await asyncCall(e.dispose)}const je={},normalizeKey=function(e){return e?e.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""},qe={getKeys:()=>Promise.resolve(Object.keys(je)),hasItem:e=>(e=normalizeKey(e),Promise.resolve(e in je)),getItem:e=>(e=normalizeKey(e),Promise.resolve(je[e]?je[e].import():null)),getMeta:e=>(e=normalizeKey(e),Promise.resolve(je[e]?je[e].meta:{}))},$e=function(e={}){const t={mounts:{"":e.driver||memory()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},getMount=e=>{for(const r of t.mountpoints)if(e.startsWith(r))return{base:r,relativeKey:e.slice(r.length),driver:t.mounts[r]};return{base:"",relativeKey:e,driver:t.mounts[""]}},getMounts=(e,r)=>t.mountpoints.filter((t=>t.startsWith(e)||r&&e.startsWith(t))).map((r=>({relativeBase:e.length>r.length?e.slice(r.length):void 0,mountpoint:r,driver:t.mounts[r]}))),onChange=(e,r)=>{if(t.watching){r=normalizeKey$1(r);for(const n of t.watchListeners)n(e,r)}},stopWatch=async()=>{if(t.watching){for(const e in t.unwatch)await t.unwatch[e]();t.unwatch={},t.watching=!1}},runBatch=(e,t,r)=>{const n=new Map,getBatch=e=>{let t=n.get(e.base);return t||(t={driver:e.driver,base:e.base,items:[]},n.set(e.base,t)),t};for(const r of e){const e="string"==typeof r,n=normalizeKey$1(e?r:r.key),s=e?void 0:r.value,i=e||!r.options?t:{...t,...r.options},o=getMount(n);getBatch(o).items.push({key:n,value:s,relativeKey:o.relativeKey,options:i})}return Promise.all([...n.values()].map((e=>r(e)))).then((e=>e.flat()))},r={hasItem(e,t={}){e=normalizeKey$1(e);const{relativeKey:r,driver:n}=getMount(e);return asyncCall(n.hasItem,r,t)},getItem(e,t={}){e=normalizeKey$1(e);const{relativeKey:r,driver:n}=getMount(e);return asyncCall(n.getItem,r,t).then((e=>destr(e)))},getItems:(e,t)=>runBatch(e,t,(e=>e.driver.getItems?asyncCall(e.driver.getItems,e.items.map((e=>({key:e.relativeKey,options:e.options}))),t).then((t=>t.map((t=>({key:joinKeys(e.base,t.key),value:destr(t.value)}))))):Promise.all(e.items.map((t=>asyncCall(e.driver.getItem,t.relativeKey,t.options).then((e=>({key:t.key,value:destr(e)})))))))),getItemRaw(e,t={}){e=normalizeKey$1(e);const{relativeKey:r,driver:n}=getMount(e);return n.getItemRaw?asyncCall(n.getItemRaw,r,t):asyncCall(n.getItem,r,t).then((e=>function(e){return"string"!=typeof e?e:e.startsWith(Ne)?(checkBufferSupport(),u.from(e.slice(Ne.length),"base64")):e}(e)))},async setItem(e,t,n={}){if(void 0===t)return r.removeItem(e);e=normalizeKey$1(e);const{relativeKey:s,driver:i}=getMount(e);i.setItem&&(await asyncCall(i.setItem,s,stringify$1(t),n),i.watch||onChange("update",e))},async setItems(e,t){await runBatch(e,t,(async e=>{e.driver.setItems&&await asyncCall(e.driver.setItems,e.items.map((e=>({key:e.relativeKey,value:stringify$1(e.value),options:e.options}))),t),e.driver.setItem&&await Promise.all(e.items.map((t=>asyncCall(e.driver.setItem,t.relativeKey,stringify$1(t.value),t.options))))}))},async setItemRaw(e,t,n={}){if(void 0===t)return r.removeItem(e,n);e=normalizeKey$1(e);const{relativeKey:s,driver:i}=getMount(e);if(i.setItemRaw)await asyncCall(i.setItemRaw,s,t,n);else{if(!i.setItem)return;await asyncCall(i.setItem,s,function(e){if("string"==typeof e)return e;checkBufferSupport();const t=u.from(e).toString("base64");return Ne+t}(t),n)}i.watch||onChange("update",e)},async removeItem(e,t={}){"boolean"==typeof t&&(t={removeMeta:t}),e=normalizeKey$1(e);const{relativeKey:r,driver:n}=getMount(e);n.removeItem&&(await asyncCall(n.removeItem,r,t),(t.removeMeta||t.removeMata)&&await asyncCall(n.removeItem,r+"$",t),n.watch||onChange("remove",e))},async getMeta(e,t={}){"boolean"==typeof t&&(t={nativeOnly:t}),e=normalizeKey$1(e);const{relativeKey:r,driver:n}=getMount(e),s=Object.create(null);if(n.getMeta&&Object.assign(s,await asyncCall(n.getMeta,r,t)),!t.nativeOnly){const e=await asyncCall(n.getItem,r+"$",t).then((e=>destr(e)));e&&"object"==typeof e&&("string"==typeof e.atime&&(e.atime=new Date(e.atime)),"string"==typeof e.mtime&&(e.mtime=new Date(e.mtime)),Object.assign(s,e))}return s},setMeta(e,t,r={}){return this.setItem(e+"$",t,r)},removeMeta(e,t={}){return this.removeItem(e+"$",t)},async getKeys(e,t={}){e=normalizeBaseKey(e);const r=getMounts(e,!0);let n=[];const s=[];for(const e of r){const r=(await asyncCall(e.driver.getKeys,e.relativeBase,t)).map((t=>e.mountpoint+normalizeKey$1(t))).filter((e=>!n.some((t=>e.startsWith(t)))));s.push(...r),n=[e.mountpoint,...n.filter((t=>!t.startsWith(e.mountpoint)))]}return e?s.filter((t=>t.startsWith(e)&&!t.endsWith("$"))):s.filter((e=>!e.endsWith("$")))},async clear(e,t={}){e=normalizeBaseKey(e),await Promise.all(getMounts(e,!1).map((async e=>{if(e.driver.clear)return asyncCall(e.driver.clear,e.relativeBase,t);if(e.driver.removeItem){const r=await e.driver.getKeys(e.relativeBase||"",t);return Promise.all(r.map((r=>e.driver.removeItem(r,t))))}})))},async dispose(){await Promise.all(Object.values(t.mounts).map((e=>dispose(e))))},watch:async e=>(await(async()=>{if(!t.watching){t.watching=!0;for(const e in t.mounts)t.unwatch[e]=await watch(t.mounts[e],onChange,e)}})(),t.watchListeners.push(e),async()=>{t.watchListeners=t.watchListeners.filter((t=>t!==e)),0===t.watchListeners.length&&await stopWatch()}),async unwatch(){t.watchListeners=[],await stopWatch()},mount(e,n){if((e=normalizeBaseKey(e))&&t.mounts[e])throw new Error(`already mounted at ${e}`);return e&&(t.mountpoints.push(e),t.mountpoints.sort(((e,t)=>t.length-e.length))),t.mounts[e]=n,t.watching&&Promise.resolve(watch(n,onChange,e)).then((r=>{t.unwatch[e]=r})).catch(console.error),r},async unmount(e,r=!0){(e=normalizeBaseKey(e))&&t.mounts[e]&&(t.watching&&e in t.unwatch&&(t.unwatch[e](),delete t.unwatch[e]),r&&await dispose(t.mounts[e]),t.mountpoints=t.mountpoints.filter((t=>t!==e)),delete t.mounts[e])},getMount(e=""){e=normalizeKey$1(e)+":";const t=getMount(e);return{driver:t.driver,base:t.base}},getMounts(e="",t={}){e=normalizeKey$1(e);return getMounts(e,t.parents).map((e=>({driver:e.driver,base:e.mountpoint})))}};return r}({});function useStorage(e=""){return e?function(e,t){if(!(t=normalizeBaseKey(t)))return e;const r={...e};for(const n of Re)r[n]=(r="",...s)=>e[n](t+r,...s);return r.getKeys=(r="",...n)=>e.getKeys(t+r,...n).then((e=>e.map((e=>e.slice(t.length))))),r}($e,e):$e}$e.mount("/assets",qe);const Me={name:"_",base:"/cache",swr:!0,maxAge:1};const cachedFunction=function(e,t={}){t={...Me,...t};const r={},n=t.group||"nitro/functions",s=t.name||e.name||"_",i=t.integrity||hash([e,t]),o=t.validate||(e=>void 0!==e.value);return async(...a)=>{const c=t.shouldBypassCache?.(...a);if(c)return e(...a);const l=await(t.getKey||getKey)(...a),u=t.shouldInvalidateCache?.(...a),d=await async function(e,a,c,l){const u=[t.base,n,s,e+".json"].filter(Boolean).join(":").replace(/:\/$/,":index"),d=await useStorage().getItem(u)||{},f=1e3*(t.maxAge??t.maxAge??0);f&&(d.expires=Date.now()+f);const p=c||d.integrity!==i||f&&Date.now()-(d.mtime||0)>f||!1===o(d),h=p?(async()=>{const n=r[e];n||(void 0!==d.value&&(t.staleMaxAge||0)>=0&&!1===t.swr&&(d.value=void 0,d.integrity=void 0,d.mtime=void 0,d.expires=void 0),r[e]=Promise.resolve(a()));try{d.value=await r[e]}catch(t){throw n||delete r[e],t}if(!n&&(d.mtime=Date.now(),d.integrity=i,delete r[e],!1!==o(d))){const e=useStorage().setItem(u,d).catch((e=>{console.error("[nitro] [cache] Cache write error.",e),useNitroApp().captureError(e,{event:l,tags:["cache"]})}));l&&l.waitUntil&&l.waitUntil(e)}})():Promise.resolve();return void 0===d.value?await h:p&&l&&l.waitUntil&&l.waitUntil(h),t.swr&&!1!==o(d)?(h.catch((e=>{console.error("[nitro] [cache] SWR handler error.",e),useNitroApp().captureError(e,{event:l,tags:["cache"]})})),d):h.then((()=>d))}(l,(()=>e(...a)),u,a[0]&&isEvent(a[0])?a[0]:void 0);let f=d.value;return t.transform&&(f=await t.transform(d,...a)||f),f}};function getKey(...e){return e.length>0?hash(e,{}):""}function escapeKey$1(e){return String(e).replace(/\W/g,"")}function cloneWithProxy(e,t){return new Proxy(e,{get:(e,r,n)=>r in t?t[r]:Reflect.get(e,r,n),set:(e,r,n,s)=>r in t?(t[r]=n,!0):Reflect.set(e,r,n,s)})}const cachedEventHandler=function(e,t=Me){const r=(t.varies||[]).filter(Boolean).map((e=>e.toLowerCase())).sort(),n={...t,getKey:async e=>{const n=await(t.getKey?.(e));if(n)return escapeKey$1(n);const s=e.node.req.originalUrl||e.node.req.url||e.path,i=`${escapeKey$1(decodeURI(parseURL(s).pathname)).slice(0,16)||"index"}.${hash(s)}`,o=r.map((t=>[t,e.node.req.headers[t]])).map((([e,t])=>`${escapeKey$1(e)}.${hash(t)}`));return[i,...o].join(":")},validate:e=>!!e.value&&(!(e.value.code>=400)&&(void 0!==e.value.body&&("undefined"!==e.value.headers.etag&&"undefined"!==e.value.headers["last-modified"]))),group:t.group||"nitro/handlers",integrity:t.integrity||hash([e,t])},s=cachedFunction((async n=>{const s={};for(const e of r)s[e]=n.node.req.headers[e];const i=cloneWithProxy(n.node.req,{headers:s}),o={};let a;const c=cloneWithProxy(n.node.res,{statusCode:200,writableEnded:!1,writableFinished:!1,headersSent:!1,closed:!1,getHeader:e=>o[e],setHeader(e,t){return o[e]=t,this},getHeaderNames:()=>Object.keys(o),hasHeader:e=>e in o,removeHeader(e){delete o[e]},getHeaders:()=>o,end(e,t,r){return"string"==typeof e&&(a=e),"function"==typeof t&&t(),"function"==typeof r&&r(),this},write(e,t,r){return"string"==typeof e&&(a=e),"function"==typeof t&&t(),"function"==typeof r&&r(),this},writeHead(e,t){if(this.statusCode=e,t)for(const e in t)this.setHeader(e,t[e]);return this}}),l=createEvent(i,c);l.context=n.context;const u=await e(l)||a,d=l.node.res.getHeaders();d.etag=String(d.Etag||d.etag||`W/"${hash(u)}"`),d["last-modified"]=String(d["Last-Modified"]||d["last-modified"]||(new Date).toUTCString());const f=[];t.swr?(t.maxAge&&f.push(`s-maxage=${t.maxAge}`),t.staleMaxAge?f.push(`stale-while-revalidate=${t.staleMaxAge}`):f.push("stale-while-revalidate")):t.maxAge&&f.push(`max-age=${t.maxAge}`),f.length>0&&(d["cache-control"]=f.join(", "));return{code:l.node.res.statusCode,headers:d,body:u}}),n);return defineEventHandler((async r=>{if(t.headersOnly){if(handleCacheHeaders(r,{maxAge:t.maxAge}))return;return e(r)}const n=await s(r);if(r.node.res.headersSent||r.node.res.writableEnded)return n.body;if(!handleCacheHeaders(r,{modifiedTime:new Date(n.headers["last-modified"]),etag:n.headers.etag,maxAge:t.maxAge})){r.node.res.statusCode=n.code;for(const e in n.headers){const t=n.headers[e];"set-cookie"===e?r.node.res.appendHeader(e,splitCookiesString(t)):r.node.res.setHeader(e,t)}return n.body}}))};function hasReqHeader(e,t,r){const n=function(e,t){return getRequestHeaders(e)[t.toLowerCase()]}(e,t);return n&&"string"==typeof n&&n.toLowerCase().includes(r)}function joinHeaders(e){return Array.isArray(e)?e.join(", "):String(e)}function normalizeCookieHeader(e=""){return splitCookiesString(joinHeaders(e))}function normalizeCookieHeaders(e){const t=new Headers;for(const[r,n]of e)if("set-cookie"===r)for(const e of normalizeCookieHeader(n))t.append("set-cookie",e);else t.set(r,joinHeaders(n));return t}const Be=toRouteMatcher(createRouter$1({routes:useRuntimeConfig().nitro.routeRules}));function createRouteRulesHandler(e){return de((t=>{const r=function(e){e.context._nitro=e.context._nitro||{},e.context._nitro.routeRules||(e.context._nitro.routeRules=getRouteRulesForPath(withoutBase(e.path.split("?")[0],useRuntimeConfig().app.baseURL)));return e.context._nitro.routeRules}(t);if(r.headers&&setHeaders(t,r.headers),r.redirect)return function(e,t,r=302){return e.node.res.statusCode=sanitizeStatusCode(r,e.node.res.statusCode),e.node.res.setHeader("location",t),send(e,`<!DOCTYPE html><html><head><meta http-equiv="refresh" content="0; url=${t.replace(/"/g,"%22")}"></head></html>`,ie.html)}(t,r.redirect.to,r.redirect.statusCode);if(r.proxy){let n=r.proxy.to;if(n.endsWith("/**")){let e=t.path;const s=r.proxy._proxyStripBase;s&&(e=withoutBase(e,s)),n=joinURL(n.slice(0,-3),e)}else if(t.path.includes("?")){n=withQuery(n,parseQuery(parseURL(t.path).search))}return proxyRequest(t,n,{fetch:e.localFetch,...r.proxy})}}))}function getRouteRulesForPath(e){return Z({},...Be.matchAll(e).reverse())}const Le={name:"vinxi",routers:[{name:"public",type:"static",dir:"./public",base:"/",root:"/Users/billyhawkes/Projects/RecordScratch",order:0,outDir:"/Users/billyhawkes/Projects/RecordScratch/.vinxi/build/public"},{name:"server",base:"/trpc",type:"http",handler:"handler.js",target:"server",root:"/Users/billyhawkes/Projects/RecordScratch",outDir:"/Users/billyhawkes/Projects/RecordScratch/.vinxi/build/server",order:1},{name:"client",type:"spa",handler:"index.html",target:"browser",base:"/",root:"/Users/billyhawkes/Projects/RecordScratch",outDir:"/Users/billyhawkes/Projects/RecordScratch/.vinxi/build/client",order:2}],server:{routeRules:{"/music/**":{proxy:"https://api.deezer.com/**"}}},root:"/Users/billyhawkes/Projects/RecordScratch"},Ue={server:{"virtual:#vinxi/handler/server":{file:"server.js",src:"virtual:#vinxi/handler/server",isEntry:!0}},client:{"app/routes/_app/privacy-policy.lazy.tsx":{file:"assets/privacy-policy.lazy-DSi4PTqL.js",src:"app/routes/_app/privacy-policy.lazy.tsx",isDynamicEntry:!0,imports:["index.html"]},"app/routes/_app/roadmap.lazy.tsx":{file:"assets/roadmap.lazy-ByMUCPAX.js",src:"app/routes/_app/roadmap.lazy.tsx",isDynamicEntry:!0,imports:["index.html"]},"app/routes/_app/terms.lazy.tsx":{file:"assets/terms.lazy-DYMTn1AU.js",src:"app/routes/_app/terms.lazy.tsx",isDynamicEntry:!0,imports:["index.html"]},"index.html":{file:"assets/index-BWMo8qqn.js",src:"index.html",isEntry:!0,dynamicImports:["app/routes/_app/terms.lazy.tsx","app/routes/_app/roadmap.lazy.tsx","app/routes/_app/privacy-policy.lazy.tsx"],css:["assets/index-s0wDVhqY.css"]}}},De={};const Ze="Invariant Violation",{setPrototypeOf:Ke=function(e,t){return e.__proto__=t,e}}=Object;class InvariantError extends Error{framesToPop=1;name=Ze;constructor(e=Ze){super("number"==typeof e?`${Ze}: ${e} (see https://github.com/apollographql/invariant-packages)`:e),Ke(this,InvariantError.prototype)}}function invariant(e,t){if(!e)throw new InvariantError(t)}const Fe=/^[A-Za-z]:\//;function normalizeWindowsPath(e=""){return e?e.replace(/\\/g,"/").replace(Fe,(e=>e.toUpperCase())):e}const ze=/^[/\\]{2}/,He=/^[/\\](?![/\\])|^[/\\]{2}(?!\.)|^[A-Za-z]:[/\\]/,We=/^[A-Za-z]:$/,Ve=/^\/([A-Za-z]:)?$/,normalize=function(e){if(0===e.length)return".";const t=(e=normalizeWindowsPath(e)).match(ze),r=isAbsolute(e),n="/"===e[e.length-1];return 0===(e=normalizeString(e,!r)).length?r?"/":n?"./":".":(n&&(e+="/"),We.test(e)&&(e+="/"),t?r?`//${e}`:`//./${e}`:r&&!isAbsolute(e)?`/${e}`:e)},join=function(...e){if(0===e.length)return".";let t;for(const r of e)r&&r.length>0&&(void 0===t?t=r:t+=`/${r}`);return void 0===t?".":normalize(t.replace(/\/\/+/g,"/"))};const resolve=function(...e){let t="",r=!1;for(let n=(e=e.map((e=>normalizeWindowsPath(e)))).length-1;n>=-1&&!r;n--){const s=n>=0?e[n]:"undefined"!=typeof process&&"function"==typeof process.cwd?process.cwd().replace(/\\/g,"/"):"/";s&&0!==s.length&&(t=`${s}/${t}`,r=isAbsolute(s))}return t=normalizeString(t,!r),r&&!isAbsolute(t)?`/${t}`:t.length>0?t:"."};function normalizeString(e,t){let r="",n=0,s=-1,i=0,o=null;for(let a=0;a<=e.length;++a){if(a<e.length)o=e[a];else{if("/"===o)break;o="/"}if("/"===o){if(s===a-1||1===i);else if(2===i){if(r.length<2||2!==n||"."!==r[r.length-1]||"."!==r[r.length-2]){if(r.length>2){const e=r.lastIndexOf("/");-1===e?(r="",n=0):(r=r.slice(0,e),n=r.length-1-r.lastIndexOf("/")),s=a,i=0;continue}if(r.length>0){r="",n=0,s=a,i=0;continue}}t&&(r+=r.length>0?"/..":"..",n=2)}else r.length>0?r+=`/${e.slice(s+1,a)}`:r=e.slice(s+1,a),n=a-s-1;s=a,i=0}else"."===o&&-1!==i?++i:i=-1}return r}const isAbsolute=function(e){return He.test(e)},toNamespacedPath=function(e){return normalizeWindowsPath(e)},Qe=/.(\.[^./]+)$/,extname=function(e){const t=Qe.exec(normalizeWindowsPath(e));return t&&t[1]||""},relative$1=function(e,t){const r=resolve(e).replace(Ve,"$1").split("/"),n=resolve(t).replace(Ve,"$1").split("/");if(":"===n[0][1]&&":"===r[0][1]&&r[0]!==n[0])return n.join("/");const s=[...r];for(const e of s){if(n[0]!==e)break;r.shift(),n.shift()}return[...r.map((()=>"..")),...n].join("/")},dirname=function(e){const t=normalizeWindowsPath(e).replace(/\/$/,"").split("/").slice(0,-1);return 1===t.length&&We.test(t[0])&&(t[0]+="/"),t.join("/")||(isAbsolute(e)?"/":".")},format$1=function(e){const t=[e.root,e.dir,e.base??e.name+e.ext].filter(Boolean);return normalizeWindowsPath(e.root?resolve(...t):t.join("/"))},basename=function(e,t){const r=normalizeWindowsPath(e).split("/").pop();return t&&r.endsWith(t)?r.slice(0,-t.length):r},parse$3=function(e){const t=normalizeWindowsPath(e).split("/").shift()||"/",r=basename(e),n=extname(r);return{root:t,dir:dirname(e),base:r,ext:n,name:r.slice(0,r.length-n.length)}},Je={__proto__:null,basename:basename,delimiter:":",dirname:dirname,extname:extname,format:format$1,isAbsolute:isAbsolute,join:join,normalize:normalize,normalizeString:normalizeString,parse:parse$3,relative:relative$1,resolve:resolve,sep:"/",toNamespacedPath:toNamespacedPath},Ge=Object.freeze(Object.defineProperty({__proto__:null,basename:basename,default:Je,delimiter:":",dirname:dirname,extname:extname,format:format$1,isAbsolute:isAbsolute,join:join,normalize:normalize,normalizeString:normalizeString,parse:parse$3,relative:relative$1,resolve:resolve,sep:"/",toNamespacedPath:toNamespacedPath},Symbol.toStringTag,{value:"Module"}));function virtualId(e){return`virtual:${e}`}function handlerModule(e){return e.handler?.endsWith(".html")?isAbsolute(e.handler)?e.handler:join(e.root,e.handler):`#vinxi/handler/${e.name}`}function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getDefaultExportFromNamespaceIfNotNamed(e){return e&&Object.prototype.hasOwnProperty.call(e,"default")&&1===Object.keys(e).length?e.default:e}var Ye={exports:{}},Xe=Ye.exports;Object.defineProperty(Xe,"__esModule",{value:!0});const fn=function(){};Ye.exports=function createMock(e,t={}){fn.prototype.name=e;const r={};return new Proxy(fn,{get:(n,s)=>"caller"===s?null:"__createMock__"===s?createMock:"__unenv__"===s||(s in t?t[s]:r[s]=r[s]||createMock(`${e}.${s.toString()}`)),apply:(t,r,n)=>createMock(`${e}()`),construct:(t,r,n)=>createMock(`[${e}]`),enumerate:()=>[]})}("mock");var et=Ye.exports;const tt=globalThis.URL,pathToFileURL=function(e){return new tt(e)},findAssetsInViteManifest=(e,t,r=new Map)=>{const n=[];return function traverse(t){if(n.includes(t))return[];const s=r.get(t);if(s)return s;const i=e[t];if(!i)return[];n.push(t);const o=[...[...i.assets||[],...i.css||[],...i.imports?.flatMap(traverse)||[]],...i.imports?.flatMap(traverse)||[]].filter(Boolean);return o.push(i.file),r.set(t,o),n.pop(),Array.from(new Set(o))}(t)};function createHtmlTagsForAssets(e,t,r){return r.filter((e=>e.endsWith(".css")||e.endsWith(".js"))).map((r=>({tag:"link",attrs:{href:joinURL(t.config.server.baseURL??"/",e.base,r),key:join(t.config.server.baseURL??"",e.base,r),...r.endsWith(".css")?{rel:"stylesheet",precendence:"high"}:{rel:"modulepreload"}}})))}const rt={};const nt=[function(e){const t=function(e){return{config:{...e,buildManifest:Ue,routeManifest:De},getRouter:t=>e.routers.find((e=>e.name===t))}}(Le);globalThis.app=t},function(e){globalThis.$handle=t=>e.h3App.handler(t)},function(){globalThis.MANIFEST=function(e){const t=new Proxy({},{get(t,r){invariant("string"==typeof r,"Bundler name expected");const n=e.getRouter(r),s=e.config.buildManifest[r];return invariant("static"!==n.type,"manifest not available for static router"),{handler:n.handler,async assets(){let e={};e[n.handler]=await this.inputs[n.handler].assets();for(const t of await(n.internals.routes?.getRoutes())??[])e[t.filePath]=await this.inputs[t.filePath].assets();return e},routes:async()=>await(n.internals.routes?.getRoutes())??[],async json(){let e={};for(const t of Object.keys(this.inputs))e[t]={output:this.inputs[t].output.path,assets:await this.inputs[t].assets()};return e},chunks:new Proxy({},{get(e,t){invariant("string"==typeof t,"Chunk expected");const r=join(n.outDir,n.base,t+".js");return{import:()=>globalThis.$$chunks[t+".js"]?globalThis.$$chunks[t+".js"]:import(pathToFileURL(r).href),output:{path:r}}}}),inputs:new Proxy({},{ownKeys:e=>Object.keys(s).filter((e=>s[e].isEntry)).map((e=>e)),getOwnPropertyDescriptor:e=>({enumerable:!0,configurable:!0}),get(t,r){if(invariant("string"==typeof r,"Input expected"),"server"===n.target){const t=r===n.handler?virtualId(handlerModule(n)):r;return{assets:()=>createHtmlTagsForAssets(n,e,findAssetsInViteManifest(s,t)),output:{path:join(n.outDir,n.base,s[t].file)}}}if("browser"===n.target){const t=r!==n.handler||r.endsWith(".html")?r:virtualId(handlerModule(n));return{import:()=>import(joinURL(e.config.server.baseURL??"",n.base,s[t].file)),assets:()=>createHtmlTagsForAssets(n,e,findAssetsInViteManifest(s,t)),output:{path:joinURL(e.config.server.baseURL??"",n.base,s[t].file)}}}}})}}});return t}(globalThis.app)},function(){globalThis.$$chunks=rt}];const errorHandler=function(e,t){const{stack:r,statusCode:n,statusMessage:s,message:i}=function(e){const t="function"==typeof process.cwd?process.cwd():"/",r=(e.stack||"").split("\n").splice(1).filter((e=>e.includes("at "))).map((e=>({text:e.replace(t+"/","./").replace("webpack:/","").replace("file://","").trim(),internal:e.includes("node_modules")&&!e.includes(".cache")||e.includes("internal")||e.includes("new Promise")}))),n=e.statusCode||500;return{stack:r,statusCode:n,statusMessage:e.statusMessage??(404===n?"Not Found":""),message:e.message||e.toString()}}(e),o={url:t.path||"",statusCode:n,statusMessage:s,message:i,stack:void 0};if(e.unhandled||e.fatal){const t=["[nitro]","[request error]",e.unhandled&&"[unhandled]",e.fatal&&"[fatal]"].filter(Boolean).join(" ");console.error(t,e.message+"\n"+r.map((e=>"  "+e.text)).join("  \n"))}return setResponseStatus(t,n,s),function(e){return!hasReqHeader(e,"accept","text/html")&&(hasReqHeader(e,"accept","application/json")||hasReqHeader(e,"user-agent","curl/")||hasReqHeader(e,"user-agent","httpie/")||hasReqHeader(e,"sec-fetch-mode","cors")||e.path.startsWith("/api/")||e.path.endsWith(".json"))}(t)?(setResponseHeader(t,"Content-Type","application/json"),send(t,JSON.stringify(o))):(setResponseHeader(t,"Content-Type","text/html"),send(t,function(e){const t=e.statusCode||500,r=e.statusMessage||"Request Error";return`<!DOCTYPE html>\n  <html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1">\n    <title>${t} ${r}</title>\n    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico/css/pico.min.css">\n  </head>\n  <body>\n    <main class="container">\n      <dialog open>\n        <article>\n          <header>\n            <h2>${t} ${r}</h2>\n          </header>\n          <code>\n            ${e.message}<br><br>\n            ${"\n"+(e.stack||[]).map((e=>`&nbsp;&nbsp;${e}`)).join("<br>")}\n          </code>\n          <footer>\n            <a href="/" onclick="event.preventDefault();history.back();">Go Back</a>\n          </footer>\n        </article>\n      </dialog>\n    </main>\n  </body>\n</html>\n`}(o)))};const st=Symbol.for("drizzle:entityKind");function is(e,t){if(!e||"object"!=typeof e)return!1;if(e instanceof t)return!0;if(!Object.prototype.hasOwnProperty.call(t,st))throw new Error(`Class "${t.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let r=e.constructor;if(r)for(;r;){if(st in r&&r[st]===t[st])return!0;r=Object.getPrototypeOf(r)}return!1}class Column{constructor(e,t){this.table=e,this.config=t,this.name=t.name,this.notNull=t.notNull,this.default=t.default,this.defaultFn=t.defaultFn,this.hasDefault=t.hasDefault,this.primary=t.primaryKey,this.isUnique=t.isUnique,this.uniqueName=t.uniqueName,this.uniqueType=t.uniqueType,this.dataType=t.dataType,this.columnType=t.columnType}static[st]="Column";name;primary;notNull;default;defaultFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;config;mapFromDriverValue(e){return e}mapToDriverValue(e){return e}}const it=Symbol.for("drizzle:Name"),ot=Symbol.for("drizzle:Schema"),at=Symbol.for("drizzle:Columns"),ct=Symbol.for("drizzle:OriginalName"),ut=Symbol.for("drizzle:BaseName"),dt=Symbol.for("drizzle:IsAlias"),ft=Symbol.for("drizzle:ExtraConfigBuilder"),pt=Symbol.for("drizzle:IsDrizzleTable");class Table{static[st]="Table";static Symbol={Name:it,Schema:ot,OriginalName:ct,Columns:at,BaseName:ut,IsAlias:dt,ExtraConfigBuilder:ft};[it];[ct];[ot];[at];[ut];[dt]=!1;[ft]=void 0;[pt]=!0;constructor(e,t,r){this[it]=this[ct]=e,this[ot]=t,this[ut]=r}}function getTableName(e){return e[it]}const ht=Symbol.for("drizzle:PgInlineForeignKeys");class PgTable extends Table{static[st]="PgTable";static Symbol=Object.assign({},Table.Symbol,{InlineForeignKeys:ht});[ht]=[];[Table.Symbol.ExtraConfigBuilder]=void 0}let mt=class{static[st]="PgPrimaryKeyBuilder";columns;name;constructor(e,t){this.columns=e,this.name=t}build(e){return new yt(e,this.columns,this.name)}},yt=class{constructor(e,t,r){this.table=e,this.columns=t,this.name=r}static[st]="PgPrimaryKey";columns;name;getName(){return this.name??`${this.table[PgTable.Symbol.Name]}_${this.columns.map((e=>e.name)).join("_")}_pk`}};function bindIfParam(e,t){return!function(e){return"object"==typeof e&&null!==e&&"mapToDriverValue"in e&&"function"==typeof e.mapToDriverValue}(t)||isSQLWrapper(e)||is(e,Param)||is(e,Placeholder)||is(e,Column)||is(e,Table)||is(e,View)?e:new Param(e,t)}const eq=(e,t)=>sql`${e} = ${bindIfParam(t,e)}`,ne$1=(e,t)=>sql`${e} <> ${bindIfParam(t,e)}`;function and(...e){const t=e.filter((e=>void 0!==e));if(0!==t.length)return 1===t.length?new SQL(t):new SQL([new StringChunk("("),sql.join(t,new StringChunk(" and ")),new StringChunk(")")])}function or(...e){const t=e.filter((e=>void 0!==e));if(0!==t.length)return 1===t.length?new SQL(t):new SQL([new StringChunk("("),sql.join(t,new StringChunk(" or ")),new StringChunk(")")])}function not(e){return sql`not ${e}`}const gt=(e,t)=>sql`${e} > ${bindIfParam(t,e)}`,gte=(e,t)=>sql`${e} >= ${bindIfParam(t,e)}`,lt=(e,t)=>sql`${e} < ${bindIfParam(t,e)}`,lte=(e,t)=>sql`${e} <= ${bindIfParam(t,e)}`;function inArray(e,t){if(Array.isArray(t)){if(0===t.length)throw new Error("inArray requires at least one value");return sql`${e} in ${t.map((t=>bindIfParam(t,e)))}`}return sql`${e} in ${bindIfParam(t,e)}`}function notInArray(e,t){if(Array.isArray(t)){if(0===t.length)throw new Error("notInArray requires at least one value");return sql`${e} not in ${t.map((t=>bindIfParam(t,e)))}`}return sql`${e} not in ${bindIfParam(t,e)}`}function isNull$1(e){return sql`${e} is null`}function isNotNull(e){return sql`${e} is not null`}function exists(e){return sql`exists ${e}`}function notExists(e){return sql`not exists ${e}`}function between(e,t,r){return sql`${e} between ${bindIfParam(t,e)} and ${bindIfParam(r,e)}`}function notBetween(e,t,r){return sql`${e} not between ${bindIfParam(t,e)} and ${bindIfParam(r,e)}`}function like(e,t){return sql`${e} like ${t}`}function notLike(e,t){return sql`${e} not like ${t}`}function ilike(e,t){return sql`${e} ilike ${t}`}function notIlike(e,t){return sql`${e} not ilike ${t}`}function asc(e){return sql`${e} asc`}function desc(e){return sql`${e} desc`}class Relation{constructor(e,t,r){this.sourceTable=e,this.referencedTable=t,this.relationName=r,this.referencedTableName=t[Table.Symbol.Name]}static[st]="Relation";referencedTableName;fieldName}class Relations{constructor(e,t){this.table=e,this.config=t}static[st]="Relations"}class One extends Relation{constructor(e,t,r,n){super(e,t,r?.relationName),this.config=r,this.isNullable=n}static[st]="One";withFieldName(e){const t=new One(this.sourceTable,this.referencedTable,this.config,this.isNullable);return t.fieldName=e,t}}class Many extends Relation{constructor(e,t,r){super(e,t,r?.relationName),this.config=r}static[st]="Many";withFieldName(e){const t=new Many(this.sourceTable,this.referencedTable,this.config);return t.fieldName=e,t}}function getOperators(){return{and:and,between:between,eq:eq,exists:exists,gt:gt,gte:gte,ilike:ilike,inArray:inArray,isNull:isNull$1,isNotNull:isNotNull,like:like,lt:lt,lte:lte,ne:ne$1,not:not,notBetween:notBetween,notExists:notExists,notLike:notLike,notIlike:notIlike,notInArray:notInArray,or:or,sql:sql}}function getOrderByOperators(){return{sql:sql,asc:asc,desc:desc}}function relations(e,t){return new Relations(e,(e=>Object.fromEntries(Object.entries(t(e)).map((([e,t])=>[e,t.withFieldName(e)])))))}function createOne(e){return function(t,r){return new One(e,t,r,r?.fields.reduce(((e,t)=>e&&t.notNull),!0)??!1)}}function createMany(e){return function(t,r){return new Many(e,t,r)}}function normalizeRelation(e,t,r){if(is(r,One)&&r.config)return{fields:r.config.fields,references:r.config.references};const n=t[r.referencedTable[Table.Symbol.Name]];if(!n)throw new Error(`Table "${r.referencedTable[Table.Symbol.Name]}" not found in schema`);const s=e[n];if(!s)throw new Error(`Table "${n}" not found in schema`);const i=r.sourceTable,o=t[i[Table.Symbol.Name]];if(!o)throw new Error(`Table "${i[Table.Symbol.Name]}" not found in schema`);const a=[];for(const e of Object.values(s.relations))(r.relationName&&r!==e&&e.relationName===r.relationName||!r.relationName&&e.referencedTable===r.sourceTable)&&a.push(e);if(a.length>1)throw r.relationName?new Error(`There are multiple relations with name "${r.relationName}" in table "${n}"`):new Error(`There are multiple relations between "${n}" and "${r.sourceTable[Table.Symbol.Name]}". Please specify relation name`);if(a[0]&&is(a[0],One)&&a[0].config)return{fields:a[0].config.references,references:a[0].config.fields};throw new Error(`There is not enough information to infer relation "${o}.${r.fieldName}"`)}function createTableRelationsHelpers(e){return{one:createOne(e),many:createMany(e)}}function mapRelationalRow(e,t,r,n,s=(e=>e)){const i={};for(const[o,a]of n.entries())if(a.isJson){const n=t.relations[a.tsKey],c=r[o],l="string"==typeof c?JSON.parse(c):c;i[a.tsKey]=is(n,One)?l&&mapRelationalRow(e,e[a.relationTableTsKey],l,a.selection,s):l.map((t=>mapRelationalRow(e,e[a.relationTableTsKey],t,a.selection,s)))}else{const e=s(r[o]),t=a.field;let n;n=is(t,Column)?t:is(t,SQL)?t.decoder:t.sql.decoder,i[a.tsKey]=null===e?null:n.mapFromDriverValue(e)}return i}const bt=Symbol.for("drizzle:SubqueryConfig");class Subquery{static[st]="Subquery";[bt];constructor(e,t,r,n=!1){this[bt]={sql:e,selection:t,alias:r,isWith:n}}}class WithSubquery extends Subquery{static[st]="WithSubquery"}const _t={startActiveSpan:(e,t)=>t()},wt=Symbol.for("drizzle:ViewBaseConfig");function isSQLWrapper(e){return"object"==typeof e&&null!==e&&"getSQL"in e&&"function"==typeof e.getSQL}class StringChunk{static[st]="StringChunk";value;constructor(e){this.value=Array.isArray(e)?e:[e]}getSQL(){return new SQL([this])}}class SQL{constructor(e){this.queryChunks=e}static[st]="SQL";decoder=vt;shouldInlineParams=!1;append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return _t.startActiveSpan("drizzle.buildSQL",(t=>{const r=this.buildQueryFromSourceParams(this.queryChunks,e);return t?.setAttributes({"drizzle.query.text":r.sql,"drizzle.query.params":JSON.stringify(r.params)}),r}))}buildQueryFromSourceParams(e,t){const r=Object.assign({},t,{inlineParams:t.inlineParams||this.shouldInlineParams,paramStartIndex:t.paramStartIndex||{value:0}}),{escapeName:n,escapeParam:s,prepareTyping:i,inlineParams:o,paramStartIndex:a}=r;return function(e){const t={sql:"",params:[]};for(const r of e)t.sql+=r.sql,t.params.push(...r.params),r.typings?.length&&(t.typings||(t.typings=[]),t.typings.push(...r.typings));return t}(e.map((e=>{if(is(e,StringChunk))return{sql:e.value.join(""),params:[]};if(is(e,Name))return{sql:n(e.value),params:[]};if(void 0===e)return{sql:"",params:[]};if(Array.isArray(e)){const t=[new StringChunk("(")];for(const[r,n]of e.entries())t.push(n),r<e.length-1&&t.push(new StringChunk(", "));return t.push(new StringChunk(")")),this.buildQueryFromSourceParams(t,r)}if(is(e,SQL))return this.buildQueryFromSourceParams(e.queryChunks,{...r,inlineParams:o||e.shouldInlineParams});if(is(e,Table)){const t=e[Table.Symbol.Schema],r=e[Table.Symbol.Name];return{sql:void 0===t?n(r):n(t)+"."+n(r),params:[]}}if(is(e,Column))return{sql:n(e.table[Table.Symbol.Name])+"."+n(e.name),params:[]};if(is(e,View)){const t=e[wt].schema,r=e[wt].name;return{sql:void 0===t?n(r):n(t)+"."+n(r),params:[]}}if(is(e,Param)){const t=null===e.value?null:e.encoder.mapToDriverValue(e.value);if(is(t,SQL))return this.buildQueryFromSourceParams([t],r);if(o)return{sql:this.mapInlineParam(t,r),params:[]};let n;return void 0!==i&&(n=[i(e.encoder)]),{sql:s(a.value++,t),params:[t],typings:n}}return is(e,Placeholder)?{sql:s(a.value++,e),params:[e]}:is(e,SQL.Aliased)&&void 0!==e.fieldAlias?{sql:n(e.fieldAlias),params:[]}:is(e,Subquery)?e[bt].isWith?{sql:n(e[bt].alias),params:[]}:this.buildQueryFromSourceParams([new StringChunk("("),e[bt].sql,new StringChunk(") "),new Name(e[bt].alias)],r):isSQLWrapper(e)?this.buildQueryFromSourceParams([new StringChunk("("),e.getSQL(),new StringChunk(")")],r):is(e,Relation)?this.buildQueryFromSourceParams([e.sourceTable,new StringChunk("."),sql.identifier(e.fieldName)],r):o?{sql:this.mapInlineParam(e,r),params:[]}:{sql:s(a.value++,e),params:[e]}})))}mapInlineParam(e,{escapeString:t}){if(null===e)return"null";if("number"==typeof e||"boolean"==typeof e)return e.toString();if("string"==typeof e)return t(e);if("object"==typeof e){const r=e.toString();return t("[object Object]"===r?JSON.stringify(e):r)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return void 0===e?this:new SQL.Aliased(this,e)}mapWith(e){return this.decoder="function"==typeof e?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}}class Name{constructor(e){this.value=e}static[st]="Name";brand;getSQL(){return new SQL([this])}}const vt={mapFromDriverValue:e=>e},St={mapToDriverValue:e=>e};class Param{constructor(e,t=St){this.value=e,this.encoder=t}static[st]="Param";brand;getSQL(){return new SQL([this])}}function sql(e,...t){const r=[];(t.length>0||e.length>0&&""!==e[0])&&r.push(new StringChunk(e[0]));for(const[n,s]of t.entries())r.push(s,new StringChunk(e[n+1]));return new SQL(r)}var It;(It=sql||(sql={})).empty=function(){return new SQL([])},It.fromList=function(e){return new SQL(e)},It.raw=function(e){return new SQL([new StringChunk(e)])},It.join=function(e,t){const r=[];for(const[n,s]of e.entries())n>0&&void 0!==t&&r.push(t),r.push(s);return new SQL(r)},It.identifier=function(e){return new Name(e)},It.placeholder=function(e){return new Placeholder(e)},It.param=function(e,t){return new Param(e,t)},(e=>{class Aliased{constructor(e,t){this.sql=e,this.fieldAlias=t}static[st]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new Aliased(this.sql,this.fieldAlias)}}e.Aliased=Aliased})(SQL||(SQL={}));class Placeholder{constructor(e){this.name=e}static[st]="Placeholder";getSQL(){return new SQL([this])}}class View{static[st]="View";[wt];constructor({name:e,schema:t,selectedFields:r,query:n}){this[wt]={name:e,originalName:e,schema:t,selectedFields:r,query:n,isExisting:!n,isAlias:!1}}getSQL(){return new SQL([this])}}Column.prototype.getSQL=function(){return new SQL([this])},Table.prototype.getSQL=function(){return new SQL([this])},Subquery.prototype.getSQL=function(){return new SQL([this])};class ColumnAliasProxyHandler{constructor(e){this.table=e}static[st]="ColumnAliasProxyHandler";get(e,t){return"table"===t?this.table:e[t]}}class TableAliasProxyHandler{constructor(e,t){this.alias=e,this.replaceOriginalName=t}static[st]="TableAliasProxyHandler";get(e,t){if(t===Table.Symbol.IsAlias)return!0;if(t===Table.Symbol.Name)return this.alias;if(this.replaceOriginalName&&t===Table.Symbol.OriginalName)return this.alias;if(t===wt)return{...e[wt],name:this.alias,isAlias:!0};if(t===Table.Symbol.Columns){const t=e[Table.Symbol.Columns];if(!t)return t;const r={};return Object.keys(t).map((n=>{r[n]=new Proxy(t[n],new ColumnAliasProxyHandler(new Proxy(e,this)))})),r}const r=e[t];return is(r,Column)?new Proxy(r,new ColumnAliasProxyHandler(new Proxy(e,this))):r}}function aliasedTable(e,t){return new Proxy(e,new TableAliasProxyHandler(t,!1))}function aliasedTableColumn(e,t){return new Proxy(e,new ColumnAliasProxyHandler(new Proxy(e.table,new TableAliasProxyHandler(t,!1))))}function mapColumnsInAliasedSQLToAlias(e,t){return new SQL.Aliased(mapColumnsInSQLToAlias(e.sql,t),e.fieldAlias)}function mapColumnsInSQLToAlias(e,t){return sql.join(e.queryChunks.map((e=>is(e,Column)?aliasedTableColumn(e,t):is(e,SQL)?mapColumnsInSQLToAlias(e,t):is(e,SQL.Aliased)?mapColumnsInAliasedSQLToAlias(e,t):e)))}class ColumnBuilder{static[st]="ColumnBuilder";config;constructor(e,t,r){this.config={name:e,notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:t,columnType:r}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$default=this.$defaultFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}}class DrizzleError extends Error{static[st]="DrizzleError";constructor({message:e,cause:t}){super(e),this.name="DrizzleError",this.cause=t}}class TransactionRollbackError extends DrizzleError{static[st]="TransactionRollbackError";constructor(){super({message:"Rollback"})}}class ConsoleLogWriter{static[st]="ConsoleLogWriter";write(e){console.log(e)}}class DefaultLogger{static[st]="DefaultLogger";writer;constructor(e){this.writer=e?.writer??new ConsoleLogWriter}logQuery(e,t){const r=t.map((e=>{try{return JSON.stringify(e)}catch{return String(e)}})),n=r.length?` -- params: [${r.join(", ")}]`:"";this.writer.write(`Query: ${e}${n}`)}}class NoopLogger{static[st]="NoopLogger";logQuery(){}}class QueryPromise{static[st]="QueryPromise";[Symbol.toStringTag]="QueryPromise";catch(e){return this.then(void 0,e)}finally(e){return this.then((t=>(e?.(),t)),(t=>{throw e?.(),t}))}then(e,t){return this.execute().then(e,t)}}function count(e){return sql`count(${e||sql.raw("*")})`.mapWith(Number)}function avg(e){return sql`avg(${e})`.mapWith(String)}function orderSelectedFields(e,t){return Object.entries(e).reduce(((e,[r,n])=>{if("string"!=typeof r)return e;const s=t?[...t,r]:[r];return is(n,Column)||is(n,SQL)||is(n,SQL.Aliased)?e.push({path:s,field:n}):is(n,Table)?e.push(...orderSelectedFields(n[Table.Symbol.Columns],s)):e.push(...orderSelectedFields(n,s)),e}),[])}function haveSameKeys(e,t){const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(const[e,t]of r.entries())if(t!==n[e])return!1;return!0}function mapUpdateSet(e,t){const r=Object.entries(t).filter((([,e])=>void 0!==e)).map((([t,r])=>is(r,SQL)?[t,r]:[t,new Param(r,e[Table.Symbol.Columns][t])]));if(0===r.length)throw new Error("No values to set");return Object.fromEntries(r)}function getTableColumns(e){return e[Table.Symbol.Columns]}function getTableLikeName(e){return is(e,Subquery)?e[bt].alias:is(e,View)?e[wt].name:is(e,SQL)?void 0:e[Table.Symbol.IsAlias]?e[Table.Symbol.Name]:e[Table.Symbol.BaseName]}const kt=Symbol.for("drizzle:MySqlInlineForeignKeys");class MySqlTable extends Table{static[st]="MySqlTable";static Symbol=Object.assign({},Table.Symbol,{InlineForeignKeys:kt});[Table.Symbol.Columns];[kt]=[];[Table.Symbol.ExtraConfigBuilder]=void 0}const mysqlTable=(e,t,r)=>function(e,t,r,n,s=e){const i=new MySqlTable(e,n,s),o=Object.fromEntries(Object.entries(t).map((([e,t])=>{const r=t,n=r.build(i);return i[kt].push(...r.buildForeignKeys(n,i)),[e,n]}))),a=Object.assign(i,o);return a[Table.Symbol.Columns]=o,r&&(a[MySqlTable.Symbol.ExtraConfigBuilder]=r),a}(e,t,r,void 0,e);class ForeignKeyBuilder{static[st]="MySqlForeignKeyBuilder";reference;_onUpdate;_onDelete;constructor(e,t){this.reference=()=>{const{name:t,columns:r,foreignColumns:n}=e();return{name:t,columns:r,foreignTable:n[0].table,foreignColumns:n}},t&&(this._onUpdate=t.onUpdate,this._onDelete=t.onDelete)}onUpdate(e){return this._onUpdate=e,this}onDelete(e){return this._onDelete=e,this}build(e){return new ForeignKey(e,this)}}class ForeignKey{constructor(e,t){this.table=e,this.reference=t.reference,this.onUpdate=t._onUpdate,this.onDelete=t._onDelete}static[st]="MySqlForeignKey";reference;onUpdate;onDelete;getName(){const{name:e,columns:t,foreignColumns:r}=this.reference(),n=t.map((e=>e.name)),s=r.map((e=>e.name)),i=[this.table[MySqlTable.Symbol.Name],...n,r[0].table[MySqlTable.Symbol.Name],...s];return e??`${i.join("_")}_fk`}}class MySqlColumnBuilder extends ColumnBuilder{static[st]="MySqlColumnBuilder";foreignKeyConfigs=[];references(e,t={}){return this.foreignKeyConfigs.push({ref:e,actions:t}),this}unique(e){return this.config.isUnique=!0,this.config.uniqueName=e,this}buildForeignKeys(e,t){return this.foreignKeyConfigs.map((({ref:r,actions:n})=>((r,n)=>{const s=new ForeignKeyBuilder((()=>{const t=r();return{columns:[e],foreignColumns:[t]}}));return n.onUpdate&&s.onUpdate(n.onUpdate),n.onDelete&&s.onDelete(n.onDelete),s.build(t)})(r,n)))}}class MySqlColumn extends Column{constructor(e,t){t.uniqueName||(t.uniqueName=function(e,t){return`${e[MySqlTable.Symbol.Name]}_${t.join("_")}_unique`}(e,[t.name])),super(e,t),this.table=e}static[st]="MySqlColumn"}class MySqlColumnBuilderWithAutoIncrement extends MySqlColumnBuilder{static[st]="MySqlColumnBuilderWithAutoIncrement";constructor(e,t,r){super(e,t,r),this.config.autoIncrement=!1}autoincrement(){return this.config.autoIncrement=!0,this.config.hasDefault=!0,this}}class MySqlColumnWithAutoIncrement extends MySqlColumn{static[st]="MySqlColumnWithAutoIncrement";autoIncrement=this.config.autoIncrement}class MySqlChar extends MySqlColumn{static[st]="MySqlChar";length=this.config.length;enumValues=this.config.enum;getSQLType(){return void 0===this.length?"char":`char(${this.length})`}}class MySqlEnumColumnBuilder extends MySqlColumnBuilder{static[st]="MySqlEnumColumnBuilder";constructor(e,t){super(e,"string","MySqlEnumColumn"),this.config.enumValues=t}build(e){return new MySqlEnumColumn(e,this.config)}}class MySqlEnumColumn extends MySqlColumn{static[st]="MySqlEnumColumn";enumValues=this.config.enumValues;getSQLType(){return`enum(${this.enumValues.map((e=>`'${e}'`)).join(",")})`}}class MySqlTextBuilder extends MySqlColumnBuilder{static[st]="MySqlTextBuilder";constructor(e,t,r){super(e,"string","MySqlText"),this.config.textType=t,this.config.enumValues=r.enum}build(e){return new MySqlText(e,this.config)}}class MySqlText extends MySqlColumn{static[st]="MySqlText";textType=this.config.textType;enumValues=this.config.enumValues;getSQLType(){return this.textType}}class MySqlDateColumnBaseBuilder extends MySqlColumnBuilder{static[st]="MySqlDateColumnBuilder";defaultNow(){return this.default(sql`(now())`)}onUpdateNow(){return this.config.hasOnUpdateNow=!0,this.config.hasDefault=!0,this}}class MySqlDateBaseColumn extends MySqlColumn{static[st]="MySqlDateColumn";hasOnUpdateNow=this.config.hasOnUpdateNow}class MySqlTimestampBuilder extends MySqlDateColumnBaseBuilder{static[st]="MySqlTimestampBuilder";constructor(e,t){super(e,"date","MySqlTimestamp"),this.config.fsp=t?.fsp}build(e){return new MySqlTimestamp(e,this.config)}}class MySqlTimestamp extends MySqlDateBaseColumn{static[st]="MySqlTimestamp";fsp=this.config.fsp;getSQLType(){return`timestamp${void 0===this.fsp?"":`(${this.fsp})`}`}mapFromDriverValue(e){return new Date(e+"+0000")}mapToDriverValue(e){return e.toISOString().slice(0,-1).replace("T"," ")}}class MySqlTimestampStringBuilder extends MySqlDateColumnBaseBuilder{static[st]="MySqlTimestampStringBuilder";constructor(e,t){super(e,"string","MySqlTimestampString"),this.config.fsp=t?.fsp}build(e){return new MySqlTimestampString(e,this.config)}}class MySqlTimestampString extends MySqlDateBaseColumn{static[st]="MySqlTimestampString";fsp=this.config.fsp;getSQLType(){return`timestamp${void 0===this.fsp?"":`(${this.fsp})`}`}}function timestamp(e,t={}){return"string"===t.mode?new MySqlTimestampStringBuilder(e,t):new MySqlTimestampBuilder(e,t)}class MySqlTinyIntBuilder extends MySqlColumnBuilderWithAutoIncrement{static[st]="MySqlTinyIntBuilder";constructor(e,t){super(e,"number","MySqlTinyInt"),this.config.unsigned=!!t&&t.unsigned}build(e){return new MySqlTinyInt(e,this.config)}}class MySqlTinyInt extends MySqlColumnWithAutoIncrement{static[st]="MySqlTinyInt";getSQLType(){return"tinyint"+(this.config.unsigned?" unsigned":"")}mapFromDriverValue(e){return"string"==typeof e?Number(e):e}}class MySqlVarBinary extends MySqlColumn{static[st]="MySqlVarBinary";length=this.config.length;getSQLType(){return void 0===this.length?"varbinary":`varbinary(${this.length})`}}class MySqlVarCharBuilder extends MySqlColumnBuilder{static[st]="MySqlVarCharBuilder";constructor(e,t){super(e,"string","MySqlVarChar"),this.config.length=t.length,this.config.enum=t.enum}build(e){return new MySqlVarChar(e,this.config)}}class MySqlVarChar extends MySqlColumn{static[st]="MySqlVarChar";length=this.config.length;enumValues=this.config.enum;getSQLType(){return void 0===this.length?"varchar":`varchar(${this.length})`}}function varchar(e,t){return new MySqlVarCharBuilder(e,t)}class SelectionProxyHandler{static[st]="SelectionProxyHandler";config;constructor(e){this.config={...e}}get(e,t){if(t===bt)return{...e[bt],selection:new Proxy(e[bt].selection,this)};if(t===wt)return{...e[wt],selectedFields:new Proxy(e[wt].selectedFields,this)};if("symbol"==typeof t)return e[t];const r=(is(e,Subquery)?e[bt].selection:is(e,View)?e[wt].selectedFields:e)[t];if(is(r,SQL.Aliased)){if("sql"===this.config.sqlAliasedBehavior&&!r.isSelectionField)return r.sql;const e=r.clone();return e.isSelectionField=!0,e}if(is(r,SQL)){if("sql"===this.config.sqlBehavior)return r;throw new Error(`You tried to reference "${t}" field from a subquery, which is a raw SQL field, but it doesn't have an alias declared. Please add an alias to the field using ".as('alias')" method.`)}return is(r,Column)?this.config.alias?new Proxy(r,new ColumnAliasProxyHandler(new Proxy(r.table,new TableAliasProxyHandler(this.config.alias,this.config.replaceOriginalName??!1)))):r:"object"!=typeof r||null===r?r:new Proxy(r,new SelectionProxyHandler(this.config))}}class MySqlDeleteBase extends QueryPromise{constructor(e,t,r){super(),this.table=e,this.session=t,this.dialect=r,this.config={table:e}}static[st]="MySqlDelete";config;where(e){return this.config.where=e,this}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){const{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}prepare(){return this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning)}execute=e=>this.prepare().execute(e);createIterator=()=>{const e=this;return async function*(t){yield*e.prepare().iterator(t)}};iterator=this.createIterator();$dynamic(){return this}}class MySqlInsertBuilder{constructor(e,t,r){this.table=e,this.session=t,this.dialect=r}static[st]="MySqlInsertBuilder";shouldIgnore=!1;ignore(){return this.shouldIgnore=!0,this}values(e){if(0===(e=Array.isArray(e)?e:[e]).length)throw new Error("values() must be called with at least one value");const t=e.map((e=>{const t={},r=this.table[Table.Symbol.Columns];for(const n of Object.keys(e)){const s=e[n];t[n]=is(s,SQL)?s:new Param(s,r[n])}return t}));return new MySqlInsertBase(this.table,t,this.shouldIgnore,this.session,this.dialect)}}class MySqlInsertBase extends QueryPromise{constructor(e,t,r,n,s){super(),this.session=n,this.dialect=s,this.config={table:e,values:t,ignore:r}}static[st]="MySqlInsert";config;onDuplicateKeyUpdate(e){const t=this.dialect.buildUpdateSet(this.config.table,mapUpdateSet(this.config.table,e.set));return this.config.onConflict=sql`update ${t}`,this}getSQL(){return this.dialect.buildInsertQuery(this.config)}toSQL(){const{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}prepare(){return this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),void 0)}execute=e=>this.prepare().execute(e);createIterator=()=>{const e=this;return async function*(t){yield*e.prepare().iterator(t)}};iterator=this.createIterator();$dynamic(){return this}}class MySqlViewBase extends View{static[st]="MySqlViewBase"}class MySqlDialect{static[st]="MySqlDialect";async migrate(e,t,r){const n=r.migrationsTable??"__drizzle_migrations",s=sql`
			create table if not exists ${sql.identifier(n)} (
				id serial primary key,
				hash text not null,
				created_at bigint
			)
		`;await t.execute(s);const i=(await t.all(sql`select id, hash, created_at from ${sql.identifier(n)} order by created_at desc limit 1`))[0];await t.transaction((async t=>{for(const r of e)if(!i||Number(i.created_at)<r.folderMillis){for(const e of r.sql)await t.execute(sql.raw(e));await t.execute(sql`insert into ${sql.identifier(n)} (\`hash\`, \`created_at\`) values(${r.hash}, ${r.folderMillis})`)}}))}escapeName(e){return`\`${e}\``}escapeParam(e){return"?"}escapeString(e){return`'${e.replace(/'/g,"''")}'`}buildDeleteQuery({table:e,where:t,returning:r}){return sql`delete from ${e}${t?sql` where ${t}`:void 0}${r?sql` returning ${this.buildSelection(r,{isSingleTable:!0})}`:void 0}`}buildUpdateSet(e,t){const r=Object.entries(t),n=r.length;return sql.join(r.flatMap((([t,r],s)=>{const i=e[Table.Symbol.Columns][t],o=sql`${sql.identifier(i.name)} = ${r}`;return s<n-1?[o,sql.raw(", ")]:[o]})))}buildUpdateQuery({table:e,set:t,where:r,returning:n}){return sql`update ${e} set ${this.buildUpdateSet(e,t)}${r?sql` where ${r}`:void 0}${n?sql` returning ${this.buildSelection(n,{isSingleTable:!0})}`:void 0}`}buildSelection(e,{isSingleTable:t=!1}={}){const r=e.length,n=e.flatMap((({field:e},n)=>{const s=[];if(is(e,SQL.Aliased)&&e.isSelectionField)s.push(sql.identifier(e.fieldAlias));else if(is(e,SQL.Aliased)||is(e,SQL)){const r=is(e,SQL.Aliased)?e.sql:e;t?s.push(new SQL(r.queryChunks.map((e=>is(e,MySqlColumn)?sql.identifier(e.name):e)))):s.push(r),is(e,SQL.Aliased)&&s.push(sql` as ${sql.identifier(e.fieldAlias)}`)}else is(e,Column)&&(t?s.push(sql.identifier(e.name)):s.push(e));return n<r-1&&s.push(sql`, `),s}));return sql.join(n)}buildSelectQuery({withList:e,fields:t,fieldsFlat:r,where:n,having:s,table:i,joins:o,orderBy:a,groupBy:c,limit:l,offset:u,lockingClause:d,distinct:f,setOperators:p}){const h=r??orderSelectedFields(t);for(const e of h)if(is(e.field,Column)&&getTableName(e.field.table)!==(is(i,Subquery)?i[bt].alias:is(i,MySqlViewBase)?i[wt].name:is(i,SQL)?void 0:getTableName(i))&&!(e=>o?.some((({alias:t})=>t===(e[Table.Symbol.IsAlias]?getTableName(e):e[Table.Symbol.BaseName]))))(e.field.table)){const t=getTableName(e.field.table);throw new Error(`Your "${e.path.join("->")}" field references a column "${t}"."${e.field.name}", but the table "${t}" is not part of the query! Did you forget to join it?`)}const m=!o||0===o.length;let y;if(e?.length){const t=[sql`with `];for(const[r,n]of e.entries())t.push(sql`${sql.identifier(n[bt].alias)} as (${n[bt].sql})`),r<e.length-1&&t.push(sql`, `);t.push(sql` `),y=sql.join(t)}const g=f?sql` distinct`:void 0,b=this.buildSelection(h,{isSingleTable:m}),_=is(i,Table)&&i[Table.Symbol.OriginalName]!==i[Table.Symbol.Name]?sql`${sql.identifier(i[Table.Symbol.OriginalName])} ${sql.identifier(i[Table.Symbol.Name])}`:i,w=[];if(o)for(const[e,t]of o.entries()){0===e&&w.push(sql` `);const r=t.table,n=t.lateral?sql` lateral`:void 0;if(is(r,MySqlTable)){const e=r[MySqlTable.Symbol.Name],s=r[MySqlTable.Symbol.Schema],i=r[MySqlTable.Symbol.OriginalName],o=e===i?void 0:t.alias;w.push(sql`${sql.raw(t.joinType)} join${n} ${s?sql`${sql.identifier(s)}.`:void 0}${sql.identifier(i)}${o&&sql` ${sql.identifier(o)}`} on ${t.on}`)}else if(is(r,View)){const e=r[wt].name,s=r[wt].schema,i=r[wt].originalName,o=e===i?void 0:t.alias;w.push(sql`${sql.raw(t.joinType)} join${n} ${s?sql`${sql.identifier(s)}.`:void 0}${sql.identifier(i)}${o&&sql` ${sql.identifier(o)}`} on ${t.on}`)}else w.push(sql`${sql.raw(t.joinType)} join${n} ${r} on ${t.on}`);e<o.length-1&&w.push(sql` `)}const v=sql.join(w),S=n?sql` where ${n}`:void 0,I=s?sql` having ${s}`:void 0;let k,T;a&&a.length>0&&(k=sql` order by ${sql.join(a,sql`, `)}`),c&&c.length>0&&(T=sql` group by ${sql.join(c,sql`, `)}`);const O=l?sql` limit ${l}`:void 0,x=u?sql` offset ${u}`:void 0;let C;if(d){const{config:e,strength:t}=d;C=sql` for ${sql.raw(t)}`,e.noWait?C.append(sql` no wait`):e.skipLocked&&C.append(sql` skip locked`)}const P=sql`${y}select${g} ${b} from ${_}${v}${S}${T}${I}${k}${O}${x}${C}`;return p.length>0?this.buildSetOperations(P,p):P}buildSetOperations(e,t){const[r,...n]=t;if(!r)throw new Error("Cannot pass undefined values to any set operator");return 0===n.length?this.buildSetOperationQuery({leftSelect:e,setOperator:r}):this.buildSetOperations(this.buildSetOperationQuery({leftSelect:e,setOperator:r}),n)}buildSetOperationQuery({leftSelect:e,setOperator:{type:t,isAll:r,rightSelect:n,limit:s,orderBy:i,offset:o}}){const a=sql`(${e.getSQL()}) `,c=sql`(${n.getSQL()})`;let l;if(i&&i.length>0){const e=[];for(const t of i)if(is(t,MySqlColumn))e.push(sql.identifier(t.name));else if(is(t,SQL)){for(let e=0;e<t.queryChunks.length;e++){const r=t.queryChunks[e];is(r,MySqlColumn)&&(t.queryChunks[e]=sql.identifier(r.name))}e.push(sql`${t}`)}else e.push(sql`${t}`);l=sql` order by ${sql.join(e,sql`, `)} `}const u=s?sql` limit ${s}`:void 0,d=sql.raw(`${t} ${r?"all ":""}`);return sql`${a}${d}${c}${l}${u}${o?sql` offset ${o}`:void 0}`}buildInsertQuery({table:e,values:t,ignore:r,onConflict:n}){const s=[],i=e[Table.Symbol.Columns],o=Object.entries(i),a=o.map((([,e])=>sql.identifier(e.name)));for(const[e,r]of t.entries()){const n=[];for(const[e,t]of o){const s=r[e];if(void 0===s||is(s,Param)&&void 0===s.value)if(void 0!==t.defaultFn){const e=t.defaultFn(),r=is(e,SQL)?e:sql.param(e,t);n.push(r)}else n.push(sql`default`);else n.push(s)}s.push(n),e<t.length-1&&s.push(sql`, `)}const c=sql.join(s);return sql`insert${r?sql` ignore`:void 0} into ${e} ${a} values ${c}${n?sql` on duplicate key ${n}`:void 0}`}sqlToQuery(e){return e.toQuery({escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString})}buildRelationalQuery({fullSchema:e,schema:t,tableNamesMap:r,table:n,tableConfig:s,queryConfig:i,tableAlias:o,nestedQueryRelation:a,joinOn:c}){let l,u,d,f,p=[];const h=[];if(!0===i){p=Object.entries(s.columns).map((([e,t])=>({dbKey:t.name,tsKey:e,field:aliasedTableColumn(t,o),relationTableTsKey:void 0,isJson:!1,selection:[]})))}else{const n=Object.fromEntries(Object.entries(s.columns).map((([e,t])=>[e,aliasedTableColumn(t,o)])));if(i.where){const e="function"==typeof i.where?i.where(n,getOperators()):i.where;f=e&&mapColumnsInSQLToAlias(e,o)}const a=[];let c=[];if(i.columns){let e=!1;for(const[t,r]of Object.entries(i.columns))void 0!==r&&t in s.columns&&(e||!0!==r||(e=!0),c.push(t));c.length>0&&(c=e?c.filter((e=>!0===i.columns?.[e])):Object.keys(s.columns).filter((e=>!c.includes(e))))}else c=Object.keys(s.columns);for(const e of c){const t=s.columns[e];a.push({tsKey:e,value:t})}let m,y=[];if(i.with&&(y=Object.entries(i.with).filter((e=>!!e[1])).map((([e,t])=>({tsKey:e,queryConfig:t,relation:s.relations[e]})))),i.extras){m="function"==typeof i.extras?i.extras(n,{sql:sql}):i.extras;for(const[e,t]of Object.entries(m))a.push({tsKey:e,value:mapColumnsInAliasedSQLToAlias(t,o)})}for(const{tsKey:e,value:t}of a)p.push({dbKey:is(t,SQL.Aliased)?t.fieldAlias:s.columns[e].name,tsKey:e,field:is(t,Column)?aliasedTableColumn(t,o):t,relationTableTsKey:void 0,isJson:!1,selection:[]});let g="function"==typeof i.orderBy?i.orderBy(n,getOrderByOperators()):i.orderBy??[];Array.isArray(g)||(g=[g]),d=g.map((e=>is(e,Column)?aliasedTableColumn(e,o):mapColumnsInSQLToAlias(e,o))),l=i.limit,u=i.offset;for(const{tsKey:n,queryConfig:s,relation:i}of y){const a=normalizeRelation(t,r,i),c=r[i.referencedTable[Table.Symbol.Name]],l=`${o}_${n}`,u=and(...a.fields.map(((e,t)=>eq(aliasedTableColumn(a.references[t],l),aliasedTableColumn(e,o))))),d=this.buildRelationalQuery({fullSchema:e,schema:t,tableNamesMap:r,table:e[c],tableConfig:t[c],queryConfig:is(i,One)?!0===s?{limit:1}:{...s,limit:1}:s,tableAlias:l,joinOn:u,nestedQueryRelation:i}),f=sql`${sql.identifier(l)}.${sql.identifier("data")}`.as(n);h.push({on:sql`true`,table:new Subquery(d.sql,{},l),alias:l,joinType:"left",lateral:!0}),p.push({dbKey:n,tsKey:n,field:f,relationTableTsKey:c,isJson:!0,selection:d.selection})}}if(0===p.length)throw new DrizzleError({message:`No fields selected for table "${s.tsName}" ("${o}")`});let m;if(f=and(c,f),a){let e=sql`json_array(${sql.join(p.map((({field:e,tsKey:t,isJson:r})=>r?sql`${sql.identifier(`${o}_${t}`)}.${sql.identifier("data")}`:is(e,SQL.Aliased)?e.sql:e)),sql`, `)})`;is(a,Many)&&(e=sql`coalesce(json_arrayagg(${e}), json_array())`);const t=[{dbKey:"data",tsKey:"data",field:e.as("data"),isJson:!0,relationTableTsKey:s.tsName,selection:p}];void 0!==l||void 0!==u||(d?.length??0)>0?(m=this.buildSelectQuery({table:aliasedTable(n,o),fields:{},fieldsFlat:[{path:[],field:sql.raw("*")},...(d?.length??0)>0?[{path:[],field:sql`row_number() over (order by ${sql.join(d,sql`, `)})`}]:[]],where:f,limit:l,offset:u,setOperators:[]}),f=void 0,l=void 0,u=void 0,d=void 0):m=aliasedTable(n,o),m=this.buildSelectQuery({table:is(m,MySqlTable)?m:new Subquery(m,{},o),fields:{},fieldsFlat:t.map((({field:e})=>({path:[],field:is(e,Column)?aliasedTableColumn(e,o):e}))),joins:h,where:f,limit:l,offset:u,orderBy:d,setOperators:[]})}else m=this.buildSelectQuery({table:aliasedTable(n,o),fields:{},fieldsFlat:p.map((({field:e})=>({path:[],field:is(e,Column)?aliasedTableColumn(e,o):e}))),joins:h,where:f,limit:l,offset:u,orderBy:d,setOperators:[]});return{tableTsKey:s.tsName,sql:m,selection:p}}buildRelationalQueryWithoutLateralSubqueries({fullSchema:e,schema:t,tableNamesMap:r,table:n,tableConfig:s,queryConfig:i,tableAlias:o,nestedQueryRelation:a,joinOn:c}){let l,u,d,f,p=[],h=[];if(!0===i){p=Object.entries(s.columns).map((([e,t])=>({dbKey:t.name,tsKey:e,field:aliasedTableColumn(t,o),relationTableTsKey:void 0,isJson:!1,selection:[]})))}else{const n=Object.fromEntries(Object.entries(s.columns).map((([e,t])=>[e,aliasedTableColumn(t,o)])));if(i.where){const e="function"==typeof i.where?i.where(n,getOperators()):i.where;d=e&&mapColumnsInSQLToAlias(e,o)}const a=[];let c=[];if(i.columns){let e=!1;for(const[t,r]of Object.entries(i.columns))void 0!==r&&t in s.columns&&(e||!0!==r||(e=!0),c.push(t));c.length>0&&(c=e?c.filter((e=>!0===i.columns?.[e])):Object.keys(s.columns).filter((e=>!c.includes(e))))}else c=Object.keys(s.columns);for(const e of c){const t=s.columns[e];a.push({tsKey:e,value:t})}let f,m=[];if(i.with&&(m=Object.entries(i.with).filter((e=>!!e[1])).map((([e,t])=>({tsKey:e,queryConfig:t,relation:s.relations[e]})))),i.extras){f="function"==typeof i.extras?i.extras(n,{sql:sql}):i.extras;for(const[e,t]of Object.entries(f))a.push({tsKey:e,value:mapColumnsInAliasedSQLToAlias(t,o)})}for(const{tsKey:e,value:t}of a)p.push({dbKey:is(t,SQL.Aliased)?t.fieldAlias:s.columns[e].name,tsKey:e,field:is(t,Column)?aliasedTableColumn(t,o):t,relationTableTsKey:void 0,isJson:!1,selection:[]});let y="function"==typeof i.orderBy?i.orderBy(n,getOrderByOperators()):i.orderBy??[];Array.isArray(y)||(y=[y]),h=y.map((e=>is(e,Column)?aliasedTableColumn(e,o):mapColumnsInSQLToAlias(e,o))),l=i.limit,u=i.offset;for(const{tsKey:n,queryConfig:s,relation:i}of m){const a=normalizeRelation(t,r,i),c=r[i.referencedTable[Table.Symbol.Name]],l=`${o}_${n}`,u=and(...a.fields.map(((e,t)=>eq(aliasedTableColumn(a.references[t],l),aliasedTableColumn(e,o))))),d=this.buildRelationalQueryWithoutLateralSubqueries({fullSchema:e,schema:t,tableNamesMap:r,table:e[c],tableConfig:t[c],queryConfig:is(i,One)?!0===s?{limit:1}:{...s,limit:1}:s,tableAlias:l,joinOn:u,nestedQueryRelation:i});let f=sql`(${d.sql})`;is(i,Many)&&(f=sql`coalesce(${f}, json_array())`);const h=f.as(n);p.push({dbKey:n,tsKey:n,field:h,relationTableTsKey:c,isJson:!0,selection:d.selection})}}if(0===p.length)throw new DrizzleError({message:`No fields selected for table "${s.tsName}" ("${o}"). You need to have at least one item in "columns", "with" or "extras". If you need to select all columns, omit the "columns" key or set it to undefined.`});if(d=and(c,d),a){let e=sql`json_array(${sql.join(p.map((({field:e})=>is(e,MySqlColumn)?sql.identifier(e.name):is(e,SQL.Aliased)?e.sql:e)),sql`, `)})`;is(a,Many)&&(e=sql`json_arrayagg(${e})`);const t=[{dbKey:"data",tsKey:"data",field:e,isJson:!0,relationTableTsKey:s.tsName,selection:p}];void 0!==l||void 0!==u||h.length>0?(f=this.buildSelectQuery({table:aliasedTable(n,o),fields:{},fieldsFlat:[{path:[],field:sql.raw("*")},...h.length>0?[{path:[],field:sql`row_number() over (order by ${sql.join(h,sql`, `)})`}]:[]],where:d,limit:l,offset:u,setOperators:[]}),d=void 0,l=void 0,u=void 0,h=void 0):f=aliasedTable(n,o),f=this.buildSelectQuery({table:is(f,MySqlTable)?f:new Subquery(f,{},o),fields:{},fieldsFlat:t.map((({field:e})=>({path:[],field:is(e,Column)?aliasedTableColumn(e,o):e}))),where:d,limit:l,offset:u,orderBy:h,setOperators:[]})}else f=this.buildSelectQuery({table:aliasedTable(n,o),fields:{},fieldsFlat:p.map((({field:e})=>({path:[],field:is(e,Column)?aliasedTableColumn(e,o):e}))),where:d,limit:l,offset:u,orderBy:h,setOperators:[]});return{tableTsKey:s.tsName,sql:f,selection:p}}}class TypedQueryBuilder{static[st]="TypedQueryBuilder";getSelectedFields(){return this._.selectedFields}}class MySqlSelectBuilder{static[st]="MySqlSelectBuilder";fields;session;dialect;withList=[];distinct;constructor(e){this.fields=e.fields,this.session=e.session,this.dialect=e.dialect,e.withList&&(this.withList=e.withList),this.distinct=e.distinct}from(e){const t=!!this.fields;let r;return r=this.fields?this.fields:is(e,Subquery)?Object.fromEntries(Object.keys(e[bt].selection).map((t=>[t,e[t]]))):is(e,MySqlViewBase)?e[wt].selectedFields:is(e,SQL)?{}:getTableColumns(e),new MySqlSelectBase({table:e,fields:r,isPartialSelect:t,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct})}}class MySqlSelectQueryBuilderBase extends TypedQueryBuilder{static[st]="MySqlSelectQueryBuilder";_;config;joinsNotNullableMap;tableName;isPartialSelect;session;dialect;constructor({table:e,fields:t,isPartialSelect:r,session:n,dialect:s,withList:i,distinct:o}){super(),this.config={withList:i,table:e,fields:{...t},distinct:o,setOperators:[]},this.isPartialSelect=r,this.session=n,this.dialect=s,this._={selectedFields:t},this.tableName=getTableLikeName(e),this.joinsNotNullableMap="string"==typeof this.tableName?{[this.tableName]:!0}:{}}createJoin(e){return(t,r)=>{const n=this.tableName,s=getTableLikeName(t);if("string"==typeof s&&this.config.joins?.some((e=>e.alias===s)))throw new Error(`Alias "${s}" is already used in this query`);if(!this.isPartialSelect&&(1===Object.keys(this.joinsNotNullableMap).length&&"string"==typeof n&&(this.config.fields={[n]:this.config.fields}),"string"==typeof s&&!is(t,SQL))){const e=is(t,Subquery)?t[bt].selection:is(t,View)?t[wt].selectedFields:t[Table.Symbol.Columns];this.config.fields[s]=e}if("function"==typeof r&&(r=r(new Proxy(this.config.fields,new SelectionProxyHandler({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.joins||(this.config.joins=[]),this.config.joins.push({on:r,table:t,joinType:e,alias:s}),"string"==typeof s)switch(e){case"left":this.joinsNotNullableMap[s]=!1;break;case"right":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map((([e])=>[e,!1]))),this.joinsNotNullableMap[s]=!0;break;case"inner":this.joinsNotNullableMap[s]=!0;break;case"full":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map((([e])=>[e,!1]))),this.joinsNotNullableMap[s]=!1}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");createSetOperator(e,t){return r=>{const n="function"==typeof r?r(getMySqlSetOperators()):r;if(!haveSameKeys(this.getSelectedFields(),n.getSelectedFields()))throw new Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:e,isAll:t,rightSelect:n}),this}}union=this.createSetOperator("union",!1);unionAll=this.createSetOperator("union",!0);intersect=this.createSetOperator("intersect",!1);intersectAll=this.createSetOperator("intersect",!0);except=this.createSetOperator("except",!1);exceptAll=this.createSetOperator("except",!0);addSetOperators(e){return this.config.setOperators.push(...e),this}where(e){return"function"==typeof e&&(e=e(new Proxy(this.config.fields,new SelectionProxyHandler({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.where=e,this}having(e){return"function"==typeof e&&(e=e(new Proxy(this.config.fields,new SelectionProxyHandler({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.having=e,this}groupBy(...e){if("function"==typeof e[0]){const t=e[0](new Proxy(this.config.fields,new SelectionProxyHandler({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(t)?t:[t]}else this.config.groupBy=e;return this}orderBy(...e){if("function"==typeof e[0]){const t=e[0](new Proxy(this.config.fields,new SelectionProxyHandler({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),r=Array.isArray(t)?t:[t];this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=r:this.config.orderBy=r}else{const t=e;this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=t:this.config.orderBy=t}return this}limit(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).limit=e:this.config.limit=e,this}offset(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).offset=e:this.config.offset=e,this}for(e,t={}){return this.config.lockingClause={strength:e,config:t},this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){const{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}as(e){return new Proxy(new Subquery(this.getSQL(),this.config.fields,e),new SelectionProxyHandler({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new SelectionProxyHandler({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}}class MySqlSelectBase extends MySqlSelectQueryBuilderBase{static[st]="MySqlSelect";prepare(){if(!this.session)throw new Error("Cannot execute a query on a query builder. Please use a database instance instead.");const e=orderSelectedFields(this.config.fields),t=this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),e);return t.joinsNotNullableMap=this.joinsNotNullableMap,t}execute=e=>this.prepare().execute(e);createIterator=()=>{const e=this;return async function*(t){yield*e.prepare().iterator(t)}};iterator=this.createIterator()}function createSetOperator(e,t){return(r,n,...s)=>{const i=[n,...s].map((r=>({type:e,isAll:t,rightSelect:r})));for(const e of i)if(!haveSameKeys(r.getSelectedFields(),e.rightSelect.getSelectedFields()))throw new Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return r.addSetOperators(i)}}!function(e,t){for(const r of t)for(const t of Object.getOwnPropertyNames(r.prototype))"constructor"!==t&&Object.defineProperty(e.prototype,t,Object.getOwnPropertyDescriptor(r.prototype,t)||Object.create(null))}(MySqlSelectBase,[QueryPromise]);const getMySqlSetOperators=()=>({union:Tt,unionAll:Et,intersect:Ot,intersectAll:xt,except:Ct,exceptAll:Pt}),Tt=createSetOperator("union",!1),Et=createSetOperator("union",!0),Ot=createSetOperator("intersect",!1),xt=createSetOperator("intersect",!0),Ct=createSetOperator("except",!1),Pt=createSetOperator("except",!0);class QueryBuilder{static[st]="MySqlQueryBuilder";dialect;$with(e){const t=this;return{as:r=>("function"==typeof r&&(r=r(t)),new Proxy(new WithSubquery(r.getSQL(),r.getSelectedFields(),e,!0),new SelectionProxyHandler({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}}with(...e){const t=this;return{select:function(r){return new MySqlSelectBuilder({fields:r??void 0,session:void 0,dialect:t.getDialect(),withList:e})},selectDistinct:function(r){return new MySqlSelectBuilder({fields:r??void 0,session:void 0,dialect:t.getDialect(),withList:e,distinct:!0})}}}select(e){return new MySqlSelectBuilder({fields:e??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct(e){return new MySqlSelectBuilder({fields:e??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}getDialect(){return this.dialect||(this.dialect=new MySqlDialect),this.dialect}}class MySqlUpdateBuilder{constructor(e,t,r){this.table=e,this.session=t,this.dialect=r}static[st]="MySqlUpdateBuilder";set(e){return new MySqlUpdateBase(this.table,mapUpdateSet(this.table,e),this.session,this.dialect)}}class MySqlUpdateBase extends QueryPromise{constructor(e,t,r,n){super(),this.session=r,this.dialect=n,this.config={set:t,table:e}}static[st]="MySqlUpdate";config;where(e){return this.config.where=e,this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){const{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}prepare(){return this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning)}execute=e=>this.prepare().execute(e);createIterator=()=>{const e=this;return async function*(t){yield*e.prepare().iterator(t)}};iterator=this.createIterator();$dynamic(){return this}}class RelationalQueryBuilder{constructor(e,t,r,n,s,i,o,a){this.fullSchema=e,this.schema=t,this.tableNamesMap=r,this.table=n,this.tableConfig=s,this.dialect=i,this.session=o,this.mode=a}static[st]="MySqlRelationalQueryBuilder";findMany(e){return new MySqlRelationalQuery(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e||{},"many",this.mode)}findFirst(e){return new MySqlRelationalQuery(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e?{...e,limit:1}:{limit:1},"first",this.mode)}}class MySqlRelationalQuery extends QueryPromise{constructor(e,t,r,n,s,i,o,a,c,l){super(),this.fullSchema=e,this.schema=t,this.tableNamesMap=r,this.table=n,this.tableConfig=s,this.dialect=i,this.session=o,this.config=a,this.queryMode=c,this.mode=l}static[st]="MySqlRelationalQuery";prepare(){const{query:e,builtQuery:t}=this._toSQL();return this.session.prepareQuery(t,void 0,(t=>{const r=t.map((t=>mapRelationalRow(this.schema,this.tableConfig,t,e.selection)));return"first"===this.queryMode?r[0]:r}))}_getQuery(){return"planetscale"===this.mode?this.dialect.buildRelationalQueryWithoutLateralSubqueries({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName}):this.dialect.buildRelationalQuery({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName})}_toSQL(){const e=this._getQuery();return{builtQuery:this.dialect.sqlToQuery(e.sql),query:e}}getSQL(){return this._getQuery().sql}toSQL(){return this._toSQL().builtQuery}execute(){return this.prepare().execute()}}class MySqlDatabase{constructor(e,t,r,n){if(this.dialect=e,this.session=t,this.mode=n,this._=r?{schema:r.schema,tableNamesMap:r.tableNamesMap}:{schema:void 0,tableNamesMap:{}},this.query={},this._.schema)for(const[n,s]of Object.entries(this._.schema))this.query[n]=new RelationalQueryBuilder(r.fullSchema,this._.schema,this._.tableNamesMap,r.fullSchema[n],s,e,t,this.mode)}static[st]="MySqlDatabase";query;$with(e){return{as:t=>("function"==typeof t&&(t=t(new QueryBuilder)),new Proxy(new WithSubquery(t.getSQL(),t.getSelectedFields(),e,!0),new SelectionProxyHandler({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}}with(...e){const t=this;return{select:function(r){return new MySqlSelectBuilder({fields:r??void 0,session:t.session,dialect:t.dialect,withList:e})},selectDistinct:function(r){return new MySqlSelectBuilder({fields:r??void 0,session:t.session,dialect:t.dialect,withList:e,distinct:!0})}}}select(e){return new MySqlSelectBuilder({fields:e??void 0,session:this.session,dialect:this.dialect})}selectDistinct(e){return new MySqlSelectBuilder({fields:e??void 0,session:this.session,dialect:this.dialect,distinct:!0})}update(e){return new MySqlUpdateBuilder(e,this.session,this.dialect)}insert(e){return new MySqlInsertBuilder(e,this.session,this.dialect)}delete(e){return new MySqlDeleteBase(e,this.session,this.dialect)}execute(e){return this.session.execute(e.getSQL())}transaction(e,t){return this.session.transaction(e,t)}}function primaryKey(...e){return e[0].columns?new PrimaryKeyBuilder(e[0].columns,e[0].name):new PrimaryKeyBuilder(e)}class PrimaryKeyBuilder{static[st]="MySqlPrimaryKeyBuilder";columns;name;constructor(e,t){this.columns=e,this.name=t}build(e){return new PrimaryKey(e,this.columns,this.name)}}class PrimaryKey{constructor(e,t,r){this.table=e,this.columns=t,this.name=r}static[st]="MySqlPrimaryKey";columns;name;getName(){return this.name??`${this.table[MySqlTable.Symbol.Name]}_${this.columns.map((e=>e.name)).join("_")}_pk`}}class PreparedQuery{static[st]="MySqlPreparedQuery";joinsNotNullableMap}class MySqlSession{constructor(e){this.dialect=e}static[st]="MySqlSession";execute(e){return this.prepareQuery(this.dialect.sqlToQuery(e),void 0).execute()}getSetTransactionSQL(e){const t=[];return e.isolationLevel&&t.push(`isolation level ${e.isolationLevel}`),t.length?sql.join(["set transaction ",t.join(" ")]):void 0}getStartTransactionSQL(e){const t=[];return e.withConsistentSnapshot&&t.push("with consistent snapshot"),e.accessMode&&t.push(e.accessMode),t.length?sql.join(["start transaction ",t.join(" ")]):void 0}}class MySqlTransaction extends MySqlDatabase{constructor(e,t,r,n,s){super(e,t,r,s),this.schema=r,this.nestedIndex=n}static[st]="MySqlTransaction";rollback(){throw new TransactionRollbackError}}class PgColumn extends Column{constructor(e,t){t.uniqueName||(t.uniqueName=function(e,t){return`${e[PgTable.Symbol.Name]}_${t.join("_")}_unique`}(e,[t.name])),super(e,t),this.table=e}static[st]="PgColumn"}class PgChar extends PgColumn{static[st]="PgChar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return void 0===this.length?"char":`char(${this.length})`}}class PgUUID extends PgColumn{static[st]="PgUUID";getSQLType(){return"uuid"}}class PgVarchar extends PgColumn{static[st]="PgVarchar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return void 0===this.length?"varchar":`varchar(${this.length})`}}const At=Symbol.for("drizzle:SQLiteInlineForeignKeys");class SQLiteTable extends Table{static[st]="SQLiteTable";static Symbol=Object.assign({},Table.Symbol,{InlineForeignKeys:At});[Table.Symbol.Columns];[At]=[];[Table.Symbol.ExtraConfigBuilder]=void 0}class SQLiteColumn extends Column{constructor(e,t){t.uniqueName||(t.uniqueName=function(e,t){return`${e[SQLiteTable.Symbol.Name]}_${t.join("_")}_unique`}(e,[t.name])),super(e,t),this.table=e}static[st]="SQLiteColumn"}class SQLiteText extends SQLiteColumn{static[st]="SQLiteText";enumValues=this.config.enumValues;length=this.config.length;constructor(e,t){super(e,t)}getSQLType(){return"text"+(this.config.length?`(${this.config.length})`:"")}}var Nt,Rt;!function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const r of e)t[r]=r;return t},e.getValidEnumValues=t=>{const r=e.objectKeys(t).filter((e=>"number"!=typeof t[t[e]])),n={};for(const e of r)n[e]=t[e];return e.objectValues(n)},e.objectValues=t=>e.objectKeys(t).map((function(e){return t[e]})),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=(e,t)=>{for(const r of e)if(t(r))return r},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map((e=>"string"==typeof e?`'${e}'`:e)).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(Nt||(Nt={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(Rt||(Rt={}));const jt=Nt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),getParsedType=e=>{switch(typeof e){case"undefined":return jt.undefined;case"string":return jt.string;case"number":return isNaN(e)?jt.nan:jt.number;case"boolean":return jt.boolean;case"function":return jt.function;case"bigint":return jt.bigint;case"symbol":return jt.symbol;case"object":return Array.isArray(e)?jt.array:null===e?jt.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?jt.promise:"undefined"!=typeof Map&&e instanceof Map?jt.map:"undefined"!=typeof Set&&e instanceof Set?jt.set:"undefined"!=typeof Date&&e instanceof Date?jt.date:jt.object;default:return jt.unknown}},qt=Nt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class ZodError extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(e){return e.message},r={_errors:[]},processError=e=>{for(const n of e.issues)if("invalid_union"===n.code)n.unionErrors.map(processError);else if("invalid_return_type"===n.code)processError(n.returnTypeError);else if("invalid_arguments"===n.code)processError(n.argumentsError);else if(0===n.path.length)r._errors.push(t(n));else{let e=r,s=0;for(;s<n.path.length;){const r=n.path[s];s===n.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(n))):e[r]=e[r]||{_errors:[]},e=e[r],s++}}};return processError(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,Nt.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=(e=>e.message)){const t={},r=[];for(const n of this.issues)n.path.length>0?(t[n.path[0]]=t[n.path[0]]||[],t[n.path[0]].push(e(n))):r.push(e(n));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}ZodError.create=e=>new ZodError(e);const errorMap=(e,t)=>{let r;switch(e.code){case qt.invalid_type:r=e.received===jt.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case qt.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,Nt.jsonStringifyReplacer)}`;break;case qt.unrecognized_keys:r=`Unrecognized key(s) in object: ${Nt.joinValues(e.keys,", ")}`;break;case qt.invalid_union:r="Invalid input";break;case qt.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Nt.joinValues(e.options)}`;break;case qt.invalid_enum_value:r=`Invalid enum value. Expected ${Nt.joinValues(e.options)}, received '${e.received}'`;break;case qt.invalid_arguments:r="Invalid function arguments";break;case qt.invalid_return_type:r="Invalid function return type";break;case qt.invalid_date:r="Invalid date";break;case qt.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:Nt.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case qt.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case qt.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case qt.custom:r="Invalid input";break;case qt.invalid_intersection_types:r="Intersection results could not be merged";break;case qt.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case qt.not_finite:r="Number must be finite";break;default:r=t.defaultError,Nt.assertNever(e)}return{message:r}};let $t=errorMap;function getErrorMap(){return $t}const makeIssue=e=>{const{data:t,path:r,errorMaps:n,issueData:s}=e,i=[...r,...s.path||[]],o={...s,path:i};let a="";const c=n.filter((e=>!!e)).slice().reverse();for(const e of c)a=e(o,{data:t,defaultError:a}).message;return{...s,path:i,message:s.message||a}};function addIssueToContext(e,t){const r=makeIssue({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,getErrorMap(),errorMap].filter((e=>!!e))});e.common.issues.push(r)}class ParseStatus{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const n of t){if("aborted"===n.status)return Mt;"dirty"===n.status&&e.dirty(),r.push(n.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const e of t)r.push({key:await e.key,value:await e.value});return ParseStatus.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const n of t){const{key:t,value:s}=n;if("aborted"===t.status)return Mt;if("aborted"===s.status)return Mt;"dirty"===t.status&&e.dirty(),"dirty"===s.status&&e.dirty(),"__proto__"===t.value||void 0===s.value&&!n.alwaysSet||(r[t.value]=s.value)}return{status:e.value,value:r}}}const Mt=Object.freeze({status:"aborted"}),DIRTY=e=>({status:"dirty",value:e}),OK=e=>({status:"valid",value:e}),isAborted=e=>"aborted"===e.status,isDirty=e=>"dirty"===e.status,isValid=e=>"valid"===e.status,isAsync=e=>"undefined"!=typeof Promise&&e instanceof Promise;var Bt;!function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}(Bt||(Bt={}));class ParseInputLazyPath{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const handleResult=(e,t)=>{if(isValid(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new ZodError(e.common.issues);return this._error=t,this._error}}};function processCreateParams(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:s}=e;if(t&&(r||n))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:s};return{errorMap:(e,t)=>"invalid_type"!==e.code?{message:t.defaultError}:void 0===t.data?{message:null!=n?n:t.defaultError}:{message:null!=r?r:t.defaultError},description:s}}class ZodType{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return getParsedType(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:getParsedType(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ParseStatus,ctx:{common:e.parent.common,data:e.data,parsedType:getParsedType(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(isAsync(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;const n={common:{issues:[],async:null!==(r=null==t?void 0:t.async)&&void 0!==r&&r,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:getParsedType(e)},s=this._parseSync({data:e,path:n.path,parent:n});return handleResult(n,s)}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:getParsedType(e)},n=this._parse({data:e,path:r.path,parent:r}),s=await(isAsync(n)?n:Promise.resolve(n));return handleResult(r,s)}refine(e,t){const getIssueProperties=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement(((t,r)=>{const n=e(t),setError=()=>r.addIssue({code:qt.custom,...getIssueProperties(t)});return"undefined"!=typeof Promise&&n instanceof Promise?n.then((e=>!!e||(setError(),!1))):!!n||(setError(),!1)}))}refinement(e,t){return this._refinement(((r,n)=>!!e(r)||(n.addIssue("function"==typeof t?t(r,n):t),!1)))}_refinement(e){return new ZodEffects({schema:this,typeName:Qt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return ZodOptional.create(this,this._def)}nullable(){return ZodNullable.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ZodArray.create(this,this._def)}promise(){return ZodPromise.create(this,this._def)}or(e){return ZodUnion.create([this,e],this._def)}and(e){return ZodIntersection.create(this,e,this._def)}transform(e){return new ZodEffects({...processCreateParams(this._def),schema:this,typeName:Qt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new ZodDefault({...processCreateParams(this._def),innerType:this,defaultValue:t,typeName:Qt.ZodDefault})}brand(){return new ZodBranded({typeName:Qt.ZodBranded,type:this,...processCreateParams(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new ZodCatch({...processCreateParams(this._def),innerType:this,catchValue:t,typeName:Qt.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return ZodPipeline.create(this,e)}readonly(){return ZodReadonly.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Lt=/^c[^\s-]{8,}$/i,Ut=/^[a-z][a-z0-9]*$/,Dt=/^[0-9A-HJKMNP-TV-Z]{26}$/,Zt=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Kt=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let Ft;const zt=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,Ht=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/;function isValidIP(e,t){return!("v4"!==t&&t||!zt.test(e))||!("v6"!==t&&t||!Ht.test(e))}class ZodString extends ZodType{_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==jt.string){const t=this._getOrReturnCtx(e);return addIssueToContext(t,{code:qt.invalid_type,expected:jt.string,received:t.parsedType}),Mt}const t=new ParseStatus;let r;for(const s of this._def.checks)if("min"===s.kind)e.data.length<s.value&&(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{code:qt.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),t.dirty());else if("max"===s.kind)e.data.length>s.value&&(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{code:qt.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),t.dirty());else if("length"===s.kind){const n=e.data.length>s.value,i=e.data.length<s.value;(n||i)&&(r=this._getOrReturnCtx(e,r),n?addIssueToContext(r,{code:qt.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):i&&addIssueToContext(r,{code:qt.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),t.dirty())}else if("email"===s.kind)Kt.test(e.data)||(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{validation:"email",code:qt.invalid_string,message:s.message}),t.dirty());else if("emoji"===s.kind)Ft||(Ft=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Ft.test(e.data)||(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{validation:"emoji",code:qt.invalid_string,message:s.message}),t.dirty());else if("uuid"===s.kind)Zt.test(e.data)||(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{validation:"uuid",code:qt.invalid_string,message:s.message}),t.dirty());else if("cuid"===s.kind)Lt.test(e.data)||(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{validation:"cuid",code:qt.invalid_string,message:s.message}),t.dirty());else if("cuid2"===s.kind)Ut.test(e.data)||(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{validation:"cuid2",code:qt.invalid_string,message:s.message}),t.dirty());else if("ulid"===s.kind)Dt.test(e.data)||(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{validation:"ulid",code:qt.invalid_string,message:s.message}),t.dirty());else if("url"===s.kind)try{new URL(e.data)}catch(n){r=this._getOrReturnCtx(e,r),addIssueToContext(r,{validation:"url",code:qt.invalid_string,message:s.message}),t.dirty()}else if("regex"===s.kind){s.regex.lastIndex=0;s.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{validation:"regex",code:qt.invalid_string,message:s.message}),t.dirty())}else if("trim"===s.kind)e.data=e.data.trim();else if("includes"===s.kind)e.data.includes(s.value,s.position)||(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{code:qt.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),t.dirty());else if("toLowerCase"===s.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===s.kind)e.data=e.data.toUpperCase();else if("startsWith"===s.kind)e.data.startsWith(s.value)||(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{code:qt.invalid_string,validation:{startsWith:s.value},message:s.message}),t.dirty());else if("endsWith"===s.kind)e.data.endsWith(s.value)||(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{code:qt.invalid_string,validation:{endsWith:s.value},message:s.message}),t.dirty());else if("datetime"===s.kind){((n=s).precision?n.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${n.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${n.precision}}Z$`):0===n.precision?n.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):n.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$")).test(e.data)||(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{code:qt.invalid_string,validation:"datetime",message:s.message}),t.dirty())}else"ip"===s.kind?isValidIP(e.data,s.version)||(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{validation:"ip",code:qt.invalid_string,message:s.message}),t.dirty()):Nt.assertNever(s);var n;return{status:t.value,value:e.data}}_regex(e,t,r){return this.refinement((t=>e.test(t)),{validation:t,code:qt.invalid_string,...Bt.errToObj(r)})}_addCheck(e){return new ZodString({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Bt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Bt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Bt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Bt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Bt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Bt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Bt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Bt.errToObj(e)})}datetime(e){var t;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,...Bt.errToObj(null==e?void 0:e.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...Bt.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...Bt.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...Bt.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...Bt.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...Bt.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...Bt.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...Bt.errToObj(t)})}nonempty(e){return this.min(1,Bt.errToObj(e))}trim(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function floatSafeRemainder(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,s=r>n?r:n;return parseInt(e.toFixed(s).replace(".",""))%parseInt(t.toFixed(s).replace(".",""))/Math.pow(10,s)}ZodString.create=e=>{var t;return new ZodString({checks:[],typeName:Qt.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...processCreateParams(e)})};class ZodNumber extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==jt.number){const t=this._getOrReturnCtx(e);return addIssueToContext(t,{code:qt.invalid_type,expected:jt.number,received:t.parsedType}),Mt}let t;const r=new ParseStatus;for(const n of this._def.checks)if("int"===n.kind)Nt.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),addIssueToContext(t,{code:qt.invalid_type,expected:"integer",received:"float",message:n.message}),r.dirty());else if("min"===n.kind){(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),addIssueToContext(t,{code:qt.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty())}else if("max"===n.kind){(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),addIssueToContext(t,{code:qt.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty())}else"multipleOf"===n.kind?0!==floatSafeRemainder(e.data,n.value)&&(t=this._getOrReturnCtx(e,t),addIssueToContext(t,{code:qt.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):"finite"===n.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),addIssueToContext(t,{code:qt.not_finite,message:n.message}),r.dirty()):Nt.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Bt.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Bt.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Bt.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Bt.toString(t))}setLimit(e,t,r,n){return new ZodNumber({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:Bt.toString(n)}]})}_addCheck(e){return new ZodNumber({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Bt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Bt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Bt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Bt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Bt.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Bt.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Bt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Bt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Bt.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&Nt.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}ZodNumber.create=e=>new ZodNumber({checks:[],typeName:Qt.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...processCreateParams(e)});class ZodBigInt extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){this._def.coerce&&(e.data=BigInt(e.data));if(this._getType(e)!==jt.bigint){const t=this._getOrReturnCtx(e);return addIssueToContext(t,{code:qt.invalid_type,expected:jt.bigint,received:t.parsedType}),Mt}let t;const r=new ParseStatus;for(const n of this._def.checks)if("min"===n.kind){(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),addIssueToContext(t,{code:qt.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty())}else if("max"===n.kind){(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),addIssueToContext(t,{code:qt.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty())}else"multipleOf"===n.kind?e.data%n.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),addIssueToContext(t,{code:qt.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):Nt.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Bt.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Bt.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Bt.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Bt.toString(t))}setLimit(e,t,r,n){return new ZodBigInt({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:Bt.toString(n)}]})}_addCheck(e){return new ZodBigInt({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Bt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Bt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Bt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Bt.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Bt.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}ZodBigInt.create=e=>{var t;return new ZodBigInt({checks:[],typeName:Qt.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...processCreateParams(e)})};class ZodBoolean extends ZodType{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==jt.boolean){const t=this._getOrReturnCtx(e);return addIssueToContext(t,{code:qt.invalid_type,expected:jt.boolean,received:t.parsedType}),Mt}return OK(e.data)}}ZodBoolean.create=e=>new ZodBoolean({typeName:Qt.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...processCreateParams(e)});class ZodDate extends ZodType{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==jt.date){const t=this._getOrReturnCtx(e);return addIssueToContext(t,{code:qt.invalid_type,expected:jt.date,received:t.parsedType}),Mt}if(isNaN(e.data.getTime())){return addIssueToContext(this._getOrReturnCtx(e),{code:qt.invalid_date}),Mt}const t=new ParseStatus;let r;for(const n of this._def.checks)"min"===n.kind?e.data.getTime()<n.value&&(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{code:qt.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),t.dirty()):"max"===n.kind?e.data.getTime()>n.value&&(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{code:qt.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),t.dirty()):Nt.assertNever(n);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ZodDate({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Bt.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Bt.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}ZodDate.create=e=>new ZodDate({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:Qt.ZodDate,...processCreateParams(e)});class ZodSymbol extends ZodType{_parse(e){if(this._getType(e)!==jt.symbol){const t=this._getOrReturnCtx(e);return addIssueToContext(t,{code:qt.invalid_type,expected:jt.symbol,received:t.parsedType}),Mt}return OK(e.data)}}ZodSymbol.create=e=>new ZodSymbol({typeName:Qt.ZodSymbol,...processCreateParams(e)});class ZodUndefined extends ZodType{_parse(e){if(this._getType(e)!==jt.undefined){const t=this._getOrReturnCtx(e);return addIssueToContext(t,{code:qt.invalid_type,expected:jt.undefined,received:t.parsedType}),Mt}return OK(e.data)}}ZodUndefined.create=e=>new ZodUndefined({typeName:Qt.ZodUndefined,...processCreateParams(e)});class ZodNull extends ZodType{_parse(e){if(this._getType(e)!==jt.null){const t=this._getOrReturnCtx(e);return addIssueToContext(t,{code:qt.invalid_type,expected:jt.null,received:t.parsedType}),Mt}return OK(e.data)}}ZodNull.create=e=>new ZodNull({typeName:Qt.ZodNull,...processCreateParams(e)});class ZodAny extends ZodType{constructor(){super(...arguments),this._any=!0}_parse(e){return OK(e.data)}}ZodAny.create=e=>new ZodAny({typeName:Qt.ZodAny,...processCreateParams(e)});class ZodUnknown extends ZodType{constructor(){super(...arguments),this._unknown=!0}_parse(e){return OK(e.data)}}ZodUnknown.create=e=>new ZodUnknown({typeName:Qt.ZodUnknown,...processCreateParams(e)});class ZodNever extends ZodType{_parse(e){const t=this._getOrReturnCtx(e);return addIssueToContext(t,{code:qt.invalid_type,expected:jt.never,received:t.parsedType}),Mt}}ZodNever.create=e=>new ZodNever({typeName:Qt.ZodNever,...processCreateParams(e)});class ZodVoid extends ZodType{_parse(e){if(this._getType(e)!==jt.undefined){const t=this._getOrReturnCtx(e);return addIssueToContext(t,{code:qt.invalid_type,expected:jt.void,received:t.parsedType}),Mt}return OK(e.data)}}ZodVoid.create=e=>new ZodVoid({typeName:Qt.ZodVoid,...processCreateParams(e)});class ZodArray extends ZodType{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),n=this._def;if(t.parsedType!==jt.array)return addIssueToContext(t,{code:qt.invalid_type,expected:jt.array,received:t.parsedType}),Mt;if(null!==n.exactLength){const e=t.data.length>n.exactLength.value,s=t.data.length<n.exactLength.value;(e||s)&&(addIssueToContext(t,{code:e?qt.too_big:qt.too_small,minimum:s?n.exactLength.value:void 0,maximum:e?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(null!==n.minLength&&t.data.length<n.minLength.value&&(addIssueToContext(t,{code:qt.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),null!==n.maxLength&&t.data.length>n.maxLength.value&&(addIssueToContext(t,{code:qt.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map(((e,r)=>n.type._parseAsync(new ParseInputLazyPath(t,e,t.path,r))))).then((e=>ParseStatus.mergeArray(r,e)));const s=[...t.data].map(((e,r)=>n.type._parseSync(new ParseInputLazyPath(t,e,t.path,r))));return ParseStatus.mergeArray(r,s)}get element(){return this._def.type}min(e,t){return new ZodArray({...this._def,minLength:{value:e,message:Bt.toString(t)}})}max(e,t){return new ZodArray({...this._def,maxLength:{value:e,message:Bt.toString(t)}})}length(e,t){return new ZodArray({...this._def,exactLength:{value:e,message:Bt.toString(t)}})}nonempty(e){return this.min(1,e)}}function deepPartialify(e){if(e instanceof ZodObject){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=ZodOptional.create(deepPartialify(n))}return new ZodObject({...e._def,shape:()=>t})}return e instanceof ZodArray?new ZodArray({...e._def,type:deepPartialify(e.element)}):e instanceof ZodOptional?ZodOptional.create(deepPartialify(e.unwrap())):e instanceof ZodNullable?ZodNullable.create(deepPartialify(e.unwrap())):e instanceof ZodTuple?ZodTuple.create(e.items.map((e=>deepPartialify(e)))):e}ZodArray.create=(e,t)=>new ZodArray({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Qt.ZodArray,...processCreateParams(t)});class ZodObject extends ZodType{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=Nt.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==jt.object){const t=this._getOrReturnCtx(e);return addIssueToContext(t,{code:qt.invalid_type,expected:jt.object,received:t.parsedType}),Mt}const{status:t,ctx:r}=this._processInputParams(e),{shape:n,keys:s}=this._getCached(),i=[];if(!(this._def.catchall instanceof ZodNever&&"strip"===this._def.unknownKeys))for(const e in r.data)s.includes(e)||i.push(e);const o=[];for(const e of s){const t=n[e],s=r.data[e];o.push({key:{status:"valid",value:e},value:t._parse(new ParseInputLazyPath(r,s,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof ZodNever){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of i)o.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)i.length>0&&(addIssueToContext(r,{code:qt.unrecognized_keys,keys:i}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of i){const n=r.data[t];o.push({key:{status:"valid",value:t},value:e._parse(new ParseInputLazyPath(r,n,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of o){const r=await t.key;e.push({key:r,value:await t.value,alwaysSet:t.alwaysSet})}return e})).then((e=>ParseStatus.mergeObjectSync(t,e))):ParseStatus.mergeObjectSync(t,o)}get shape(){return this._def.shape()}strict(e){return Bt.errToObj,new ZodObject({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{var n,s,i,o;const a=null!==(i=null===(s=(n=this._def).errorMap)||void 0===s?void 0:s.call(n,t,r).message)&&void 0!==i?i:r.defaultError;return"unrecognized_keys"===t.code?{message:null!==(o=Bt.errToObj(e).message)&&void 0!==o?o:a}:{message:a}}}:{}})}strip(){return new ZodObject({...this._def,unknownKeys:"strip"})}passthrough(){return new ZodObject({...this._def,unknownKeys:"passthrough"})}extend(e){return new ZodObject({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ZodObject({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Qt.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new ZodObject({...this._def,catchall:e})}pick(e){const t={};return Nt.objectKeys(e).forEach((r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])})),new ZodObject({...this._def,shape:()=>t})}omit(e){const t={};return Nt.objectKeys(this.shape).forEach((r=>{e[r]||(t[r]=this.shape[r])})),new ZodObject({...this._def,shape:()=>t})}deepPartial(){return deepPartialify(this)}partial(e){const t={};return Nt.objectKeys(this.shape).forEach((r=>{const n=this.shape[r];e&&!e[r]?t[r]=n:t[r]=n.optional()})),new ZodObject({...this._def,shape:()=>t})}required(e){const t={};return Nt.objectKeys(this.shape).forEach((r=>{if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof ZodOptional;)e=e._def.innerType;t[r]=e}})),new ZodObject({...this._def,shape:()=>t})}keyof(){return createZodEnum(Nt.objectKeys(this.shape))}}ZodObject.create=(e,t)=>new ZodObject({shape:()=>e,unknownKeys:"strip",catchall:ZodNever.create(),typeName:Qt.ZodObject,...processCreateParams(t)}),ZodObject.strictCreate=(e,t)=>new ZodObject({shape:()=>e,unknownKeys:"strict",catchall:ZodNever.create(),typeName:Qt.ZodObject,...processCreateParams(t)}),ZodObject.lazycreate=(e,t)=>new ZodObject({shape:e,unknownKeys:"strip",catchall:ZodNever.create(),typeName:Qt.ZodObject,...processCreateParams(t)});class ZodUnion extends ZodType{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map((async e=>{const r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;const r=e.map((e=>new ZodError(e.ctx.common.issues)));return addIssueToContext(t,{code:qt.invalid_union,unionErrors:r}),Mt}));{let e;const n=[];for(const s of r){const r={...t,common:{...t.common,issues:[]},parent:null},i=s._parseSync({data:t.data,path:t.path,parent:r});if("valid"===i.status)return i;"dirty"!==i.status||e||(e={result:i,ctx:r}),r.common.issues.length&&n.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const s=n.map((e=>new ZodError(e)));return addIssueToContext(t,{code:qt.invalid_union,unionErrors:s}),Mt}}get options(){return this._def.options}}ZodUnion.create=(e,t)=>new ZodUnion({options:e,typeName:Qt.ZodUnion,...processCreateParams(t)});const getDiscriminator=e=>e instanceof ZodLazy?getDiscriminator(e.schema):e instanceof ZodEffects?getDiscriminator(e.innerType()):e instanceof ZodLiteral?[e.value]:e instanceof ZodEnum?e.options:e instanceof ZodNativeEnum?Object.keys(e.enum):e instanceof ZodDefault?getDiscriminator(e._def.innerType):e instanceof ZodUndefined?[void 0]:e instanceof ZodNull?[null]:null;class ZodDiscriminatedUnion extends ZodType{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==jt.object)return addIssueToContext(t,{code:qt.invalid_type,expected:jt.object,received:t.parsedType}),Mt;const r=this.discriminator,n=t.data[r],s=this.optionsMap.get(n);return s?t.common.async?s._parseAsync({data:t.data,path:t.path,parent:t}):s._parseSync({data:t.data,path:t.path,parent:t}):(addIssueToContext(t,{code:qt.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Mt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){const n=new Map;for(const r of t){const t=getDiscriminator(r.shape[e]);if(!t)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const s of t){if(n.has(s))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(s)}`);n.set(s,r)}}return new ZodDiscriminatedUnion({typeName:Qt.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...processCreateParams(r)})}}function mergeValues(e,t){const r=getParsedType(e),n=getParsedType(t);if(e===t)return{valid:!0,data:e};if(r===jt.object&&n===jt.object){const r=Nt.objectKeys(t),n=Nt.objectKeys(e).filter((e=>-1!==r.indexOf(e))),s={...e,...t};for(const r of n){const n=mergeValues(e[r],t[r]);if(!n.valid)return{valid:!1};s[r]=n.data}return{valid:!0,data:s}}if(r===jt.array&&n===jt.array){if(e.length!==t.length)return{valid:!1};const r=[];for(let n=0;n<e.length;n++){const s=mergeValues(e[n],t[n]);if(!s.valid)return{valid:!1};r.push(s.data)}return{valid:!0,data:r}}return r===jt.date&&n===jt.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class ZodIntersection extends ZodType{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),handleParsed=(e,n)=>{if(isAborted(e)||isAborted(n))return Mt;const s=mergeValues(e.value,n.value);return s.valid?((isDirty(e)||isDirty(n))&&t.dirty(),{status:t.value,value:s.data}):(addIssueToContext(r,{code:qt.invalid_intersection_types}),Mt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then((([e,t])=>handleParsed(e,t))):handleParsed(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}ZodIntersection.create=(e,t,r)=>new ZodIntersection({left:e,right:t,typeName:Qt.ZodIntersection,...processCreateParams(r)});class ZodTuple extends ZodType{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==jt.array)return addIssueToContext(r,{code:qt.invalid_type,expected:jt.array,received:r.parsedType}),Mt;if(r.data.length<this._def.items.length)return addIssueToContext(r,{code:qt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Mt;!this._def.rest&&r.data.length>this._def.items.length&&(addIssueToContext(r,{code:qt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const n=[...r.data].map(((e,t)=>{const n=this._def.items[t]||this._def.rest;return n?n._parse(new ParseInputLazyPath(r,e,r.path,t)):null})).filter((e=>!!e));return r.common.async?Promise.all(n).then((e=>ParseStatus.mergeArray(t,e))):ParseStatus.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new ZodTuple({...this._def,rest:e})}}ZodTuple.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ZodTuple({items:e,typeName:Qt.ZodTuple,rest:null,...processCreateParams(t)})};class ZodRecord extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==jt.object)return addIssueToContext(r,{code:qt.invalid_type,expected:jt.object,received:r.parsedType}),Mt;const n=[],s=this._def.keyType,i=this._def.valueType;for(const e in r.data)n.push({key:s._parse(new ParseInputLazyPath(r,e,r.path,e)),value:i._parse(new ParseInputLazyPath(r,r.data[e],r.path,e))});return r.common.async?ParseStatus.mergeObjectAsync(t,n):ParseStatus.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,r){return new ZodRecord(t instanceof ZodType?{keyType:e,valueType:t,typeName:Qt.ZodRecord,...processCreateParams(r)}:{keyType:ZodString.create(),valueType:e,typeName:Qt.ZodRecord,...processCreateParams(t)})}}class ZodMap extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==jt.map)return addIssueToContext(r,{code:qt.invalid_type,expected:jt.map,received:r.parsedType}),Mt;const n=this._def.keyType,s=this._def.valueType,i=[...r.data.entries()].map((([e,t],i)=>({key:n._parse(new ParseInputLazyPath(r,e,r.path,[i,"key"])),value:s._parse(new ParseInputLazyPath(r,t,r.path,[i,"value"]))})));if(r.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const r of i){const n=await r.key,s=await r.value;if("aborted"===n.status||"aborted"===s.status)return Mt;"dirty"!==n.status&&"dirty"!==s.status||t.dirty(),e.set(n.value,s.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const r of i){const n=r.key,s=r.value;if("aborted"===n.status||"aborted"===s.status)return Mt;"dirty"!==n.status&&"dirty"!==s.status||t.dirty(),e.set(n.value,s.value)}return{status:t.value,value:e}}}}ZodMap.create=(e,t,r)=>new ZodMap({valueType:t,keyType:e,typeName:Qt.ZodMap,...processCreateParams(r)});class ZodSet extends ZodType{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==jt.set)return addIssueToContext(r,{code:qt.invalid_type,expected:jt.set,received:r.parsedType}),Mt;const n=this._def;null!==n.minSize&&r.data.size<n.minSize.value&&(addIssueToContext(r,{code:qt.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),null!==n.maxSize&&r.data.size>n.maxSize.value&&(addIssueToContext(r,{code:qt.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());const s=this._def.valueType;function finalizeSet(e){const r=new Set;for(const n of e){if("aborted"===n.status)return Mt;"dirty"===n.status&&t.dirty(),r.add(n.value)}return{status:t.value,value:r}}const i=[...r.data.values()].map(((e,t)=>s._parse(new ParseInputLazyPath(r,e,r.path,t))));return r.common.async?Promise.all(i).then((e=>finalizeSet(e))):finalizeSet(i)}min(e,t){return new ZodSet({...this._def,minSize:{value:e,message:Bt.toString(t)}})}max(e,t){return new ZodSet({...this._def,maxSize:{value:e,message:Bt.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}ZodSet.create=(e,t)=>new ZodSet({valueType:e,minSize:null,maxSize:null,typeName:Qt.ZodSet,...processCreateParams(t)});class ZodFunction extends ZodType{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==jt.function)return addIssueToContext(t,{code:qt.invalid_type,expected:jt.function,received:t.parsedType}),Mt;function makeArgsIssue(e,r){return makeIssue({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,getErrorMap(),errorMap].filter((e=>!!e)),issueData:{code:qt.invalid_arguments,argumentsError:r}})}function makeReturnsIssue(e,r){return makeIssue({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,getErrorMap(),errorMap].filter((e=>!!e)),issueData:{code:qt.invalid_return_type,returnTypeError:r}})}const r={errorMap:t.common.contextualErrorMap},n=t.data;if(this._def.returns instanceof ZodPromise){const e=this;return OK((async function(...t){const s=new ZodError([]),i=await e._def.args.parseAsync(t,r).catch((e=>{throw s.addIssue(makeArgsIssue(t,e)),s})),o=await Reflect.apply(n,this,i);return await e._def.returns._def.type.parseAsync(o,r).catch((e=>{throw s.addIssue(makeReturnsIssue(o,e)),s}))}))}{const e=this;return OK((function(...t){const s=e._def.args.safeParse(t,r);if(!s.success)throw new ZodError([makeArgsIssue(t,s.error)]);const i=Reflect.apply(n,this,s.data),o=e._def.returns.safeParse(i,r);if(!o.success)throw new ZodError([makeReturnsIssue(i,o.error)]);return o.data}))}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ZodFunction({...this._def,args:ZodTuple.create(e).rest(ZodUnknown.create())})}returns(e){return new ZodFunction({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new ZodFunction({args:e||ZodTuple.create([]).rest(ZodUnknown.create()),returns:t||ZodUnknown.create(),typeName:Qt.ZodFunction,...processCreateParams(r)})}}class ZodLazy extends ZodType{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}ZodLazy.create=(e,t)=>new ZodLazy({getter:e,typeName:Qt.ZodLazy,...processCreateParams(t)});class ZodLiteral extends ZodType{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return addIssueToContext(t,{received:t.data,code:qt.invalid_literal,expected:this._def.value}),Mt}return{status:"valid",value:e.data}}get value(){return this._def.value}}function createZodEnum(e,t){return new ZodEnum({values:e,typeName:Qt.ZodEnum,...processCreateParams(t)})}ZodLiteral.create=(e,t)=>new ZodLiteral({value:e,typeName:Qt.ZodLiteral,...processCreateParams(t)});class ZodEnum extends ZodType{_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),r=this._def.values;return addIssueToContext(t,{expected:Nt.joinValues(r),received:t.parsedType,code:qt.invalid_type}),Mt}if(-1===this._def.values.indexOf(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return addIssueToContext(t,{received:t.data,code:qt.invalid_enum_value,options:r}),Mt}return OK(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e){return ZodEnum.create(e)}exclude(e){return ZodEnum.create(this.options.filter((t=>!e.includes(t))))}}ZodEnum.create=createZodEnum;class ZodNativeEnum extends ZodType{_parse(e){const t=Nt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==jt.string&&r.parsedType!==jt.number){const e=Nt.objectValues(t);return addIssueToContext(r,{expected:Nt.joinValues(e),received:r.parsedType,code:qt.invalid_type}),Mt}if(-1===t.indexOf(e.data)){const e=Nt.objectValues(t);return addIssueToContext(r,{received:r.data,code:qt.invalid_enum_value,options:e}),Mt}return OK(e.data)}get enum(){return this._def.values}}ZodNativeEnum.create=(e,t)=>new ZodNativeEnum({values:e,typeName:Qt.ZodNativeEnum,...processCreateParams(t)});class ZodPromise extends ZodType{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==jt.promise&&!1===t.common.async)return addIssueToContext(t,{code:qt.invalid_type,expected:jt.promise,received:t.parsedType}),Mt;const r=t.parsedType===jt.promise?t.data:Promise.resolve(t.data);return OK(r.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}ZodPromise.create=(e,t)=>new ZodPromise({type:e,typeName:Qt.ZodPromise,...processCreateParams(t)});class ZodEffects extends ZodType{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Qt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),n=this._def.effect||null,s={addIssue:e=>{addIssueToContext(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),"preprocess"===n.type){const e=n.transform(r.data,s);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(e).then((e=>this._def.schema._parseAsync({data:e,path:r.path,parent:r}))):this._def.schema._parseSync({data:e,path:r.path,parent:r})}if("refinement"===n.type){const executeRefinement=e=>{const t=n.refinement(e,s);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===r.common.async){const e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?Mt:("dirty"===e.status&&t.dirty(),executeRefinement(e.value),{status:t.value,value:e.value})}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then((e=>"aborted"===e.status?Mt:("dirty"===e.status&&t.dirty(),executeRefinement(e.value).then((()=>({status:t.value,value:e.value}))))))}if("transform"===n.type){if(!1===r.common.async){const e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!isValid(e))return e;const i=n.transform(e.value,s);if(i instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:i}}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then((e=>isValid(e)?Promise.resolve(n.transform(e.value,s)).then((e=>({status:t.value,value:e}))):e))}Nt.assertNever(n)}}ZodEffects.create=(e,t,r)=>new ZodEffects({schema:e,typeName:Qt.ZodEffects,effect:t,...processCreateParams(r)}),ZodEffects.createWithPreprocess=(e,t,r)=>new ZodEffects({schema:t,effect:{type:"preprocess",transform:e},typeName:Qt.ZodEffects,...processCreateParams(r)});class ZodOptional extends ZodType{_parse(e){return this._getType(e)===jt.undefined?OK(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ZodOptional.create=(e,t)=>new ZodOptional({innerType:e,typeName:Qt.ZodOptional,...processCreateParams(t)});class ZodNullable extends ZodType{_parse(e){return this._getType(e)===jt.null?OK(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ZodNullable.create=(e,t)=>new ZodNullable({innerType:e,typeName:Qt.ZodNullable,...processCreateParams(t)});class ZodDefault extends ZodType{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===jt.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}ZodDefault.create=(e,t)=>new ZodDefault({innerType:e,typeName:Qt.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...processCreateParams(t)});class ZodCatch extends ZodType{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return isAsync(n)?n.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new ZodError(r.common.issues)},input:r.data})}))):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue({get error(){return new ZodError(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}ZodCatch.create=(e,t)=>new ZodCatch({innerType:e,typeName:Qt.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...processCreateParams(t)});class ZodNaN extends ZodType{_parse(e){if(this._getType(e)!==jt.nan){const t=this._getOrReturnCtx(e);return addIssueToContext(t,{code:qt.invalid_type,expected:jt.nan,received:t.parsedType}),Mt}return{status:"valid",value:e.data}}}ZodNaN.create=e=>new ZodNaN({typeName:Qt.ZodNaN,...processCreateParams(e)});const Wt=Symbol("zod_brand");class ZodBranded extends ZodType{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class ZodPipeline extends ZodType{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?Mt:"dirty"===e.status?(t.dirty(),DIRTY(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})()}{const e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?Mt:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new ZodPipeline({in:e,out:t,typeName:Qt.ZodPipeline})}}class ZodReadonly extends ZodType{_parse(e){const t=this._def.innerType._parse(e);return isValid(t)&&(t.value=Object.freeze(t.value)),t}}ZodReadonly.create=(e,t)=>new ZodReadonly({innerType:e,typeName:Qt.ZodReadonly,...processCreateParams(t)});const custom=(e,t={},r)=>e?ZodAny.create().superRefine(((n,s)=>{var i,o;if(!e(n)){const e="function"==typeof t?t(n):"string"==typeof t?{message:t}:t,a=null===(o=null!==(i=e.fatal)&&void 0!==i?i:r)||void 0===o||o,c="string"==typeof e?{message:e}:e;s.addIssue({code:"custom",...c,fatal:a})}})):ZodAny.create(),Vt={object:ZodObject.lazycreate};var Qt;!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(Qt||(Qt={}));const Jt=ZodString.create,Gt=ZodNumber.create,Yt=ZodNaN.create,Xt=ZodBigInt.create,er=ZodBoolean.create,tr=ZodDate.create,rr=ZodSymbol.create,nr=ZodUndefined.create,sr=ZodNull.create,ir=ZodAny.create,ar=ZodUnknown.create,cr=ZodNever.create,lr=ZodVoid.create,ur=ZodArray.create,dr=ZodObject.create,fr=ZodObject.strictCreate,pr=ZodUnion.create,hr=ZodDiscriminatedUnion.create,mr=ZodIntersection.create,yr=ZodTuple.create,gr=ZodRecord.create,br=ZodMap.create,_r=ZodSet.create,wr=ZodFunction.create,vr=ZodLazy.create,Sr=ZodLiteral.create,Ir=ZodEnum.create,kr=ZodNativeEnum.create,Tr=ZodPromise.create,Er=ZodEffects.create,Or=ZodOptional.create,xr=ZodNullable.create,Cr=ZodEffects.createWithPreprocess,Pr=ZodPipeline.create,Ar={string:e=>ZodString.create({...e,coerce:!0}),number:e=>ZodNumber.create({...e,coerce:!0}),boolean:e=>ZodBoolean.create({...e,coerce:!0}),bigint:e=>ZodBigInt.create({...e,coerce:!0}),date:e=>ZodDate.create({...e,coerce:!0})},Nr=Mt;var Rr=Object.freeze({__proto__:null,defaultErrorMap:errorMap,setErrorMap:function(e){$t=e},getErrorMap:getErrorMap,makeIssue:makeIssue,EMPTY_PATH:[],addIssueToContext:addIssueToContext,ParseStatus:ParseStatus,INVALID:Mt,DIRTY:DIRTY,OK:OK,isAborted:isAborted,isDirty:isDirty,isValid:isValid,isAsync:isAsync,get util(){return Nt},get objectUtil(){return Rt},ZodParsedType:jt,getParsedType:getParsedType,ZodType:ZodType,ZodString:ZodString,ZodNumber:ZodNumber,ZodBigInt:ZodBigInt,ZodBoolean:ZodBoolean,ZodDate:ZodDate,ZodSymbol:ZodSymbol,ZodUndefined:ZodUndefined,ZodNull:ZodNull,ZodAny:ZodAny,ZodUnknown:ZodUnknown,ZodNever:ZodNever,ZodVoid:ZodVoid,ZodArray:ZodArray,ZodObject:ZodObject,ZodUnion:ZodUnion,ZodDiscriminatedUnion:ZodDiscriminatedUnion,ZodIntersection:ZodIntersection,ZodTuple:ZodTuple,ZodRecord:ZodRecord,ZodMap:ZodMap,ZodSet:ZodSet,ZodFunction:ZodFunction,ZodLazy:ZodLazy,ZodLiteral:ZodLiteral,ZodEnum:ZodEnum,ZodNativeEnum:ZodNativeEnum,ZodPromise:ZodPromise,ZodEffects:ZodEffects,ZodTransformer:ZodEffects,ZodOptional:ZodOptional,ZodNullable:ZodNullable,ZodDefault:ZodDefault,ZodCatch:ZodCatch,ZodNaN:ZodNaN,BRAND:Wt,ZodBranded:ZodBranded,ZodPipeline:ZodPipeline,ZodReadonly:ZodReadonly,custom:custom,Schema:ZodType,ZodSchema:ZodType,late:Vt,get ZodFirstPartyTypeKind(){return Qt},coerce:Ar,any:ir,array:ur,bigint:Xt,boolean:er,date:tr,discriminatedUnion:hr,effect:Er,enum:Ir,function:wr,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>custom((t=>t instanceof e),t),intersection:mr,lazy:vr,literal:Sr,map:br,nan:Yt,nativeEnum:kr,never:cr,null:sr,nullable:xr,number:Gt,object:dr,oboolean:()=>er().optional(),onumber:()=>Gt().optional(),optional:Or,ostring:()=>Jt().optional(),pipeline:Pr,preprocess:Cr,promise:Tr,record:gr,set:_r,strictObject:fr,string:Jt,symbol:rr,transformer:Er,tuple:yr,undefined:nr,union:pr,unknown:ar,void:lr,NEVER:Nr,ZodIssueCode:qt,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:ZodError});const jr=Rr.union([Rr.string(),Rr.number(),Rr.boolean(),Rr.null()]),qr=Rr.lazy((()=>Rr.union([jr,Rr.array(qr),Rr.record(qr)])));function b$1(e,t){const r=getTableColumns(e),n=Object.entries(r);let s=Object.fromEntries(n.map((([e,t])=>[e,p$1(t)])));t&&(s=Object.assign(s,Object.fromEntries(Object.entries(t).map((([e,t])=>[e,"function"==typeof t?t(s):t])))));for(const[e,t]of n)t.notNull||(s[e]=s[e].nullable());return Rr.object(s)}function p$1(e){let t;if(function(e){return"enumValues"in e&&Array.isArray(e.enumValues)&&e.enumValues.length>0}(e)&&(t=e.enumValues.length?Rr.enum(e.enumValues):Rr.string()),!t)if(is(e,PgUUID))t=Rr.string().uuid();else if("custom"===e.dataType)t=Rr.any();else if("json"===e.dataType)t=qr;else if("array"===e.dataType)t=Rr.array(p$1(e.baseColumn));else if("number"===e.dataType)t=Rr.number();else if("bigint"===e.dataType)t=Rr.bigint();else if("boolean"===e.dataType)t=Rr.boolean();else if("date"===e.dataType)t=Rr.date();else if("string"===e.dataType){let r=Rr.string();(is(e,PgChar)||is(e,PgVarchar)||is(e,MySqlVarChar)||is(e,MySqlVarBinary)||is(e,MySqlChar)||is(e,SQLiteText))&&"number"==typeof e.length&&(r=r.max(e.length)),t=r}return t||(t=Rr.any()),t}var $r=new Set,deprecated$1=(e,t,r)=>{const n=(()=>{try{return!1}catch(e){}return!1})()||(()=>{try{return!0}catch(e){}return!1})(),s=r??e;$r.has(s)||n||($r.add(s),console.warn(`Clerk - DEPRECATION WARNING: "${e}" is deprecated and will be removed in the next major release.\n${t}`))};const Mr=Object.freeze(Object.defineProperty({__proto__:null,deprecated:deprecated$1,deprecatedObjectProperty:(e,t,r,n)=>{let s=e[t];Object.defineProperty(e,t,{get:()=>(deprecated$1(t,r,n),s),set(e){s=e}})},deprecatedProperty:(e,t,r,n=!1)=>{const s=n?e:e.prototype;let i=s[t];Object.defineProperty(s,t,{get:()=>(deprecated$1(t,r,`${e.name}:${t}`),i),set(e){i=e}})}},Symbol.toStringTag,{value:"Module"})),Br=getDefaultExportFromNamespaceIfNotNamed(Mr);var getClerkJsMajorVersionOrTag=(e,t)=>!t&&function(e){return e.endsWith(".lclstage.dev")||e.endsWith(".stgstage.dev")||e.endsWith(".clerkstage.dev")||e.endsWith(".accountsstage.dev")}(e)?"canary":t&&t.split(".")[0]||"latest";const Lr=getDefaultExportFromNamespaceIfNotNamed(Object.freeze(Object.defineProperty({__proto__:null,addClerkPrefix:function(e){if(!e)return"";let t;if(e.match(/^(clerk\.)+\w*$/))t=/(clerk\.)*(?=clerk\.)/;else{if(e.match(/\.clerk.accounts/))return e;t=/^(clerk\.)*/gi}return`clerk.${e.replace(t,"")}`},getClerkJsMajorVersionOrTag:getClerkJsMajorVersionOrTag,getScriptUrl:(e,{pkgVersion:t="4.68.2",clerkJSVersion:r})=>{const n=e.replace(/http(s)?:\/\//,""),s=getClerkJsMajorVersionOrTag(e,t);return`https://${n}/npm/@clerk/clerk-js@${r||s}/dist/clerk.browser.js`},parseSearchParams:function(e=""){return e.startsWith("?")&&(e=e.slice(1)),new URLSearchParams(e)},stripScheme:function(e=""){return(e||"").replace(/^.+:\/\//,"")}},Symbol.toStringTag,{value:"Module"})));const Ur=Object.freeze(Object.defineProperty({__proto__:null,callWithRetry:async function callWithRetry$1(e,t=1,r=5){try{return await e()}catch(s){if(t>=r)throw s;return await(n=2**t*100,new Promise((e=>setTimeout(e,n)))),callWithRetry$1(e,t+1,r)}var n}},Symbol.toStringTag,{value:"Module"})),Dr=getDefaultExportFromNamespaceIfNotNamed(Ur);var isomorphicAtob$1=e=>"undefined"!=typeof atob&&"function"==typeof atob?atob(e):"undefined"!=typeof global&&global.Buffer?new globalThis.Buffer(e,"base64").toString():e,Zr="pk_live_",Kr="pk_test_",Fr=/^(([a-z]+)-){2}([0-9]{1,2})\.clerk\.accounts([a-z.]*)(dev|com)$/i;function isPublishableKey(e){const t=(e=e||"").startsWith(Zr)||e.startsWith(Kr),r=isomorphicAtob$1(e.split("_")[2]||"").endsWith("$");return t&&r}const zr=Object.freeze(Object.defineProperty({__proto__:null,buildPublishableKey:function(e){return`${Fr.test(e)?Kr:Zr}${btoa(`${e}$`)}`},createDevOrStagingUrlCache:function(){const e=[".lcl.dev",".stg.dev",".lclstage.dev",".stgstage.dev",".dev.lclclerk.com",".stg.lclclerk.com",".accounts.lclclerk.com","accountsstage.dev","accounts.dev"],t=new Map;return{isDevOrStagingUrl:r=>{if(!r)return!1;const n="string"==typeof r?r:r.hostname;let s=t.get(n);return void 0===s&&(s=e.some((e=>n.endsWith(e))),t.set(n,s)),s}}},isDevelopmentFromApiKey:function(e){return e.startsWith("test_")||e.startsWith("sk_test_")},isLegacyFrontendApiKey:function(e){return(e=e||"").startsWith("clerk.")},isProductionFromApiKey:function(e){return e.startsWith("live_")||e.startsWith("sk_live_")},isPublishableKey:isPublishableKey,parsePublishableKey:function(e){if(!isPublishableKey(e=e||""))return null;const t=e.startsWith(Zr)?"production":"development";let r=isomorphicAtob$1(e.split("_")[2]);return r.endsWith("$")?(r=r.slice(0,-1),{instanceType:t,frontendApi:r}):null}},Symbol.toStringTag,{value:"Module"})),Hr=getDefaultExportFromNamespaceIfNotNamed(zr);function isClerkAPIResponseError(e){return"clerkError"in e}function isClerkRuntimeError(e){return"clerkRuntimeError"in e}function isMetamaskError(e){return"code"in e&&[4001,32602,32603].includes(e.code)&&"message"in e}function parseErrors$1(e=[]){return e.length>0?e.map(parseError$1):[]}function parseError$1(e){return{code:e.code,message:e.message,longMessage:e.long_message,meta:{paramName:e?.meta?.param_name,sessionId:e?.meta?.session_id,emailAddresses:e?.meta?.email_addresses,identifiers:e?.meta?.identifiers,zxcvbn:e?.meta?.zxcvbn}}}var Wr=class _ClerkAPIResponseError extends Error{constructor(e,{data:t,status:r,clerkTraceId:n}){super(e),this.toString=()=>{let e=`[${this.name}]\nMessage:${this.message}\nStatus:${this.status}\nSerialized errors: ${this.errors.map((e=>JSON.stringify(e)))}`;return this.clerkTraceId&&(e+=`\nClerk Trace ID: ${this.clerkTraceId}`),e},Object.setPrototypeOf(this,_ClerkAPIResponseError.prototype),this.status=r,this.message=e,this.clerkTraceId=n,this.clerkError=!0,this.errors=parseErrors$1(t)}},Vr=class _ClerkRuntimeError extends Error{constructor(e,{code:t}){super(e),this.toString=()=>`[${this.name}]\nMessage:${this.message}`,Object.setPrototypeOf(this,_ClerkRuntimeError.prototype),this.code=t,this.message=e,this.clerkRuntimeError=!0}},Qr=class _MagicLinkError extends Error{constructor(e){super(e),this.code=e,Object.setPrototypeOf(this,_MagicLinkError.prototype),deprecated$1("MagicLinkError","Use `EmailLinkError` instead.")}},Jr=class _EmailLinkError extends Error{constructor(e){super(e),this.code=e,Object.setPrototypeOf(this,_EmailLinkError.prototype)}};var Gr=new Proxy({Expired:"expired",Failed:"failed"},{get:(e,t,r)=>(deprecated$1("MagicLinkErrorCode","Use `EmailLinkErrorCode` instead."),Reflect.get(e,t,r))}),Yr=Object.freeze({InvalidFrontendApiErrorMessage:"The frontendApi passed to Clerk is invalid. You can get your Frontend API key at https://dashboard.clerk.com/last-active?path=api-keys. (key={{key}})",InvalidProxyUrlErrorMessage:"The proxyUrl passed to Clerk is invalid. The expected value for proxyUrl is an absolute URL or a relative path with a leading '/'. (key={{url}})",InvalidPublishableKeyErrorMessage:"The publishableKey passed to Clerk is invalid. You can get your Publishable key at https://dashboard.clerk.com/last-active?path=api-keys. (key={{key}})",MissingPublishableKeyErrorMessage:"Missing publishableKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys."});const Xr=Object.freeze(Object.defineProperty({__proto__:null,ClerkAPIResponseError:Wr,ClerkRuntimeError:Vr,EmailLinkError:Jr,EmailLinkErrorCode:{Expired:"expired",Failed:"failed"},MagicLinkError:Qr,MagicLinkErrorCode:Gr,buildErrorThrower:function({packageName:e,customMessages:t}){let r=e;const n={...Yr,...t};function buildMessage(e,t){if(!t)return`${r}: ${e}`;let n=e;const s=e.matchAll(/{{([a-zA-Z0-9-_]+)}}/g);for(const e of s){const r=(t[e[1]]||"").toString();n=n.replace(`{{${e[1]}}}`,r)}return`${r}: ${n}`}return{setPackageName({packageName:e}){return"string"==typeof e&&(r=e),this},setMessages({customMessages:e}){return Object.assign(n,e||{}),this},throwInvalidPublishableKeyError(e){throw new Error(buildMessage(n.InvalidPublishableKeyErrorMessage,e))},throwInvalidFrontendApiError(e){throw new Error(buildMessage(n.InvalidFrontendApiErrorMessage,e))},throwInvalidProxyUrl(e){throw new Error(buildMessage(n.InvalidProxyUrlErrorMessage,e))},throwMissingPublishableKeyError(){throw new Error(buildMessage(n.MissingPublishableKeyErrorMessage))}}},is4xxError:function(e){const t=e?.status;return!!t&&t>=400&&t<500},isClerkAPIResponseError:isClerkAPIResponseError,isClerkRuntimeError:isClerkRuntimeError,isEmailLinkError:function(e){return e instanceof Jr},isKnownError:function(e){return isClerkAPIResponseError(e)||isMetamaskError(e)||isClerkRuntimeError(e)},isMagicLinkError:function(e){return deprecated$1("isMagicLinkError","Use `isEmailLinkError` instead."),e instanceof Qr},isMetamaskError:isMetamaskError,isNetworkError:function(e){return(`${e.message}${e.name}`||"").toLowerCase().replace(/\s+/g,"").includes("networkerror")},isUnauthorizedError:function(e){const t=e?.status,r=e?.errors?.[0]?.code;return"authentication_invalid"===r&&401===t},isUserLockedError:function(e){return isClerkAPIResponseError(e)&&"user_locked"===e.errors?.[0]?.code},parseError:parseError$1,parseErrors:parseErrors$1},Symbol.toStringTag,{value:"Module"})),en=getDefaultExportFromNamespaceIfNotNamed(Xr),tn=crypto,rn=getDefaultExportFromNamespaceIfNotNamed(Object.freeze(Object.defineProperty({__proto__:null,default:tn},Symbol.toStringTag,{value:"Module"}))),nn=fetch,sn=Blob,on=FormData,an=Headers,cn=Request,ln=Response,un=AbortController,dn=fetch,pn=getDefaultExportFromNamespaceIfNotNamed(Object.freeze(Object.defineProperty({__proto__:null,RuntimeAbortController:un,RuntimeBlob:sn,RuntimeFetch:dn,RuntimeFormData:on,RuntimeHeaders:an,RuntimeRequest:cn,RuntimeResponse:ln,default:nn},Symbol.toStringTag,{value:"Module"})));var isMergeableObject=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===hn}(e)}(e)};var hn="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function cloneUnlessOtherwiseSpecified(e,t){return!1!==t.clone&&t.isMergeableObject(e)?deepmerge((r=e,Array.isArray(r)?[]:{}),e,t):e;var r}function defaultArrayMerge(e,t,r){return e.concat(t).map((function(e){return cloneUnlessOtherwiseSpecified(e,r)}))}function getKeys(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return e.propertyIsEnumerable(t)})):[]}(e))}function propertyIsOnObject(e,t){try{return t in e}catch(e){return!1}}function mergeObject(e,t,r){var n={};return r.isMergeableObject(e)&&getKeys(e).forEach((function(t){n[t]=cloneUnlessOtherwiseSpecified(e[t],r)})),getKeys(t).forEach((function(s){(function(e,t){return propertyIsOnObject(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,s)||(propertyIsOnObject(e,s)&&r.isMergeableObject(t[s])?n[s]=function(e,t){if(!t.customMerge)return deepmerge;var r=t.customMerge(e);return"function"==typeof r?r:deepmerge}(s,r)(e[s],t[s],r):n[s]=cloneUnlessOtherwiseSpecified(t[s],r))})),n}function deepmerge(e,t,r){(r=r||{}).arrayMerge=r.arrayMerge||defaultArrayMerge,r.isMergeableObject=r.isMergeableObject||isMergeableObject,r.cloneUnlessOtherwiseSpecified=cloneUnlessOtherwiseSpecified;var n=Array.isArray(t);return n===Array.isArray(e)?n?r.arrayMerge(e,t,r):mergeObject(e,t,r):cloneUnlessOtherwiseSpecified(t,r)}deepmerge.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,r){return deepmerge(e,r,t)}),{})};var mn=deepmerge,yn={exports:{}};const isObject$1=e=>"object"==typeof e&&null!==e,gn=Symbol("skip"),isObjectCustom=e=>isObject$1(e)&&!(e instanceof RegExp)&&!(e instanceof Error)&&!(e instanceof Date),mapObject=(e,t,r,n=new WeakMap)=>{if(r={deep:!1,target:{},...r},n.has(e))return n.get(e);n.set(e,r.target);const{target:s}=r;delete r.target;const mapArray=e=>e.map((e=>isObjectCustom(e)?mapObject(e,t,r,n):e));if(Array.isArray(e))return mapArray(e);for(const[i,o]of Object.entries(e)){const a=t(i,o,e);if(a===gn)continue;let[c,l,{shouldRecurse:u=!0}={}]=a;"__proto__"!==c&&(r.deep&&u&&isObjectCustom(l)&&(l=Array.isArray(l)?mapArray(l):mapObject(l,t,r,n)),s[c]=l)}return s};yn.exports=(e,t,r)=>{if(!isObject$1(e))throw new TypeError(`Expected an object, got \`${e}\` (${typeof e})`);return mapObject(e,t,r)},yn.exports.mapObjectSkip=gn;var bn=yn.exports,_n={},extendStatics$1=function(e,t){return extendStatics$1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},extendStatics$1(e,t)};function __extends$1(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}extendStatics$1(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}var __assign$1=function(){return __assign$1=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},__assign$1.apply(this,arguments)};function __rest$1(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}function __decorate$1(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o}function __param$1(e,t){return function(r,n){t(r,n,e)}}function __metadata$1(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function __awaiter$1(e,t,r,n){return new(r||(r=Promise))((function(s,i){function fulfilled(e){try{step(n.next(e))}catch(e){i(e)}}function rejected(e){try{step(n.throw(e))}catch(e){i(e)}}function step(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))}function __generator$1(e,t){var r,n,s,i,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function verb(a){return function(c){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(o=0)),o;)try{if(r=1,n&&(s=2&a[0]?n.return:a[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,a[1])).done)return s;switch(n=0,s&&(a=[2&a[0],s.value]),a[0]){case 0:case 1:s=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(s=o.trys,(s=s.length>0&&s[s.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!s||a[1]>s[0]&&a[1]<s[3])){o.label=a[1];break}if(6===a[0]&&o.label<s[1]){o.label=s[1],s=a;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(a);break}s[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=s=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}var wn=Object.create?function(e,t,r,n){void 0===n&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]};function __exportStar$1(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||wn(t,e,r)}function __values$1(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read$1(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,s,i=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(e){s={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(s)throw s.error}}return o}function __spread$1(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$1(arguments[t]));return e}function __spreadArrays$1(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),s=0;for(t=0;t<r;t++)for(var i=arguments[t],o=0,a=i.length;o<a;o++,s++)n[s]=i[o];return n}function __spreadArray$1(e,t,r){if(r||2===arguments.length)for(var n,s=0,i=t.length;s<i;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))}function __await$1(e){return this instanceof __await$1?(this.v=e,this):new __await$1(e)}function __asyncGenerator$1(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,s=r.apply(e,t||[]),i=[];return n={},verb("next"),verb("throw"),verb("return"),n[Symbol.asyncIterator]=function(){return this},n;function verb(e){s[e]&&(n[e]=function(t){return new Promise((function(r,n){i.push([e,t,r,n])>1||resume(e,t)}))})}function resume(e,t){try{!function(e){e.value instanceof __await$1?Promise.resolve(e.value.v).then(fulfill,reject):settle(i[0][2],e)}(s[e](t))}catch(e){settle(i[0][3],e)}}function fulfill(e){resume("next",e)}function reject(e){resume("throw",e)}function settle(e,t){e(t),i.shift(),i.length&&resume(i[0][0],i[0][1])}}function __asyncDelegator$1(e){var t,r;return t={},verb("next"),verb("throw",(function(e){throw e})),verb("return"),t[Symbol.iterator]=function(){return this},t;function verb(n,s){t[n]=e[n]?function(t){return(r=!r)?{value:__await$1(e[n](t)),done:!1}:s?s(t):t}:s}}function __asyncValues$1(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=__values$1(e),t={},verb("next"),verb("throw"),verb("return"),t[Symbol.asyncIterator]=function(){return this},t);function verb(r){t[r]=e[r]&&function(t){return new Promise((function(n,s){(function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)})(n,s,(t=e[r](t)).done,t.value)}))}}}function __makeTemplateObject$1(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var vn=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function __importStar$1(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&wn(t,e,r);return vn(t,e),t}function __importDefault$1(e){return e&&e.__esModule?e:{default:e}}function __classPrivateFieldGet$1(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function __classPrivateFieldSet$1(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r}function __classPrivateFieldIn$1(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function __addDisposableResource$1(e,t,r){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var n;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(void 0===n){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose]}if("function"!=typeof n)throw new TypeError("Object not disposable.");e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var Sn="function"==typeof SuppressedError?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function __disposeResources$1(e){function fail(t){e.error=e.hasError?new Sn(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}return function next(){for(;e.stack.length;){var t=e.stack.pop();try{var r=t.dispose&&t.dispose.call(t.value);if(t.async)return Promise.resolve(r).then(next,(function(e){return fail(e),next()}))}catch(e){fail(e)}}if(e.hasError)throw e.error}()}const In={__extends:__extends$1,__assign:__assign$1,__rest:__rest$1,__decorate:__decorate$1,__param:__param$1,__metadata:__metadata$1,__awaiter:__awaiter$1,__generator:__generator$1,__createBinding:wn,__exportStar:__exportStar$1,__values:__values$1,__read:__read$1,__spread:__spread$1,__spreadArrays:__spreadArrays$1,__spreadArray:__spreadArray$1,__await:__await$1,__asyncGenerator:__asyncGenerator$1,__asyncDelegator:__asyncDelegator$1,__asyncValues:__asyncValues$1,__makeTemplateObject:__makeTemplateObject$1,__importStar:__importStar$1,__importDefault:__importDefault$1,__classPrivateFieldGet:__classPrivateFieldGet$1,__classPrivateFieldSet:__classPrivateFieldSet$1,__classPrivateFieldIn:__classPrivateFieldIn$1,__addDisposableResource:__addDisposableResource$1,__disposeResources:__disposeResources$1},kn=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:__addDisposableResource$1,get __assign(){return __assign$1},__asyncDelegator:__asyncDelegator$1,__asyncGenerator:__asyncGenerator$1,__asyncValues:__asyncValues$1,__await:__await$1,__awaiter:__awaiter$1,__classPrivateFieldGet:__classPrivateFieldGet$1,__classPrivateFieldIn:__classPrivateFieldIn$1,__classPrivateFieldSet:__classPrivateFieldSet$1,__createBinding:wn,__decorate:__decorate$1,__disposeResources:__disposeResources$1,__esDecorate:function(e,t,r,n,s,i){function accept(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,a=n.kind,c="getter"===a?"get":"setter"===a?"set":"value",l=!t&&e?n.static?e:e.prototype:null,u=t||(l?Object.getOwnPropertyDescriptor(l,n.name):{}),d=!1,f=r.length-1;f>=0;f--){var p={};for(var h in n)p[h]="access"===h?{}:n[h];for(var h in n.access)p.access[h]=n.access[h];p.addInitializer=function(e){if(d)throw new TypeError("Cannot add initializers after decoration has completed");i.push(accept(e||null))};var m=(0,r[f])("accessor"===a?{get:u.get,set:u.set}:u[c],p);if("accessor"===a){if(void 0===m)continue;if(null===m||"object"!=typeof m)throw new TypeError("Object expected");(o=accept(m.get))&&(u.get=o),(o=accept(m.set))&&(u.set=o),(o=accept(m.init))&&s.unshift(o)}else(o=accept(m))&&("field"===a?s.unshift(o):u[c]=o)}l&&Object.defineProperty(l,n.name,u),d=!0},__exportStar:__exportStar$1,__extends:__extends$1,__generator:__generator$1,__importDefault:__importDefault$1,__importStar:__importStar$1,__makeTemplateObject:__makeTemplateObject$1,__metadata:__metadata$1,__param:__param$1,__propKey:function(e){return"symbol"==typeof e?e:"".concat(e)},__read:__read$1,__rest:__rest$1,__runInitializers:function(e,t,r){for(var n=arguments.length>2,s=0;s<t.length;s++)r=n?t[s].call(e,r):t[s].call(e);return n?r:void 0},__setFunctionName:function(e,t,r){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})},__spread:__spread$1,__spreadArray:__spreadArray$1,__spreadArrays:__spreadArrays$1,__values:__values$1,default:In},Symbol.toStringTag,{value:"Module"})),Tn=getDefaultExportFromNamespaceIfNotNamed(kn);var En={},extendStatics=function(e,t){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},extendStatics(e,t)};function __extends(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}var __assign=function(){return __assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},__assign.apply(this,arguments)};function __rest(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}function __decorate(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o}function __param(e,t){return function(r,n){t(r,n,e)}}function __metadata(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function __awaiter(e,t,r,n){return new(r||(r=Promise))((function(s,i){function fulfilled(e){try{step(n.next(e))}catch(e){i(e)}}function rejected(e){try{step(n.throw(e))}catch(e){i(e)}}function step(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))}function __generator(e,t){var r,n,s,i,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function verb(a){return function(c){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(o=0)),o;)try{if(r=1,n&&(s=2&a[0]?n.return:a[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,a[1])).done)return s;switch(n=0,s&&(a=[2&a[0],s.value]),a[0]){case 0:case 1:s=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(s=o.trys,(s=s.length>0&&s[s.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!s||a[1]>s[0]&&a[1]<s[3])){o.label=a[1];break}if(6===a[0]&&o.label<s[1]){o.label=s[1],s=a;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(a);break}s[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=s=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}var On=Object.create?function(e,t,r,n){void 0===n&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]};function __exportStar(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||On(t,e,r)}function __values(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,s,i=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(e){s={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(s)throw s.error}}return o}function __spread(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e}function __spreadArrays(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),s=0;for(t=0;t<r;t++)for(var i=arguments[t],o=0,a=i.length;o<a;o++,s++)n[s]=i[o];return n}function __spreadArray(e,t,r){if(r||2===arguments.length)for(var n,s=0,i=t.length;s<i;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))}function __await(e){return this instanceof __await?(this.v=e,this):new __await(e)}function __asyncGenerator(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,s=r.apply(e,t||[]),i=[];return n={},verb("next"),verb("throw"),verb("return"),n[Symbol.asyncIterator]=function(){return this},n;function verb(e){s[e]&&(n[e]=function(t){return new Promise((function(r,n){i.push([e,t,r,n])>1||resume(e,t)}))})}function resume(e,t){try{!function(e){e.value instanceof __await?Promise.resolve(e.value.v).then(fulfill,reject):settle(i[0][2],e)}(s[e](t))}catch(e){settle(i[0][3],e)}}function fulfill(e){resume("next",e)}function reject(e){resume("throw",e)}function settle(e,t){e(t),i.shift(),i.length&&resume(i[0][0],i[0][1])}}function __asyncDelegator(e){var t,r;return t={},verb("next"),verb("throw",(function(e){throw e})),verb("return"),t[Symbol.iterator]=function(){return this},t;function verb(n,s){t[n]=e[n]?function(t){return(r=!r)?{value:__await(e[n](t)),done:!1}:s?s(t):t}:s}}function __asyncValues(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=__values(e),t={},verb("next"),verb("throw"),verb("return"),t[Symbol.asyncIterator]=function(){return this},t);function verb(r){t[r]=e[r]&&function(t){return new Promise((function(n,s){(function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)})(n,s,(t=e[r](t)).done,t.value)}))}}}function __makeTemplateObject(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var xn=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function __importStar(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&On(t,e,r);return xn(t,e),t}function __importDefault(e){return e&&e.__esModule?e:{default:e}}function __classPrivateFieldGet(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function __classPrivateFieldSet(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r}function __classPrivateFieldIn(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function __addDisposableResource(e,t,r){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var n;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(void 0===n){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose]}if("function"!=typeof n)throw new TypeError("Object not disposable.");e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var Cn="function"==typeof SuppressedError?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function __disposeResources(e){function fail(t){e.error=e.hasError?new Cn(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}return function next(){for(;e.stack.length;){var t=e.stack.pop();try{var r=t.dispose&&t.dispose.call(t.value);if(t.async)return Promise.resolve(r).then(next,(function(e){return fail(e),next()}))}catch(e){fail(e)}}if(e.hasError)throw e.error}()}const Pn={__extends:__extends,__assign:__assign,__rest:__rest,__decorate:__decorate,__param:__param,__metadata:__metadata,__awaiter:__awaiter,__generator:__generator,__createBinding:On,__exportStar:__exportStar,__values:__values,__read:__read,__spread:__spread,__spreadArrays:__spreadArrays,__spreadArray:__spreadArray,__await:__await,__asyncGenerator:__asyncGenerator,__asyncDelegator:__asyncDelegator,__asyncValues:__asyncValues,__makeTemplateObject:__makeTemplateObject,__importStar:__importStar,__importDefault:__importDefault,__classPrivateFieldGet:__classPrivateFieldGet,__classPrivateFieldSet:__classPrivateFieldSet,__classPrivateFieldIn:__classPrivateFieldIn,__addDisposableResource:__addDisposableResource,__disposeResources:__disposeResources},An=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:__addDisposableResource,get __assign(){return __assign},__asyncDelegator:__asyncDelegator,__asyncGenerator:__asyncGenerator,__asyncValues:__asyncValues,__await:__await,__awaiter:__awaiter,__classPrivateFieldGet:__classPrivateFieldGet,__classPrivateFieldIn:__classPrivateFieldIn,__classPrivateFieldSet:__classPrivateFieldSet,__createBinding:On,__decorate:__decorate,__disposeResources:__disposeResources,__esDecorate:function(e,t,r,n,s,i){function accept(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,a=n.kind,c="getter"===a?"get":"setter"===a?"set":"value",l=!t&&e?n.static?e:e.prototype:null,u=t||(l?Object.getOwnPropertyDescriptor(l,n.name):{}),d=!1,f=r.length-1;f>=0;f--){var p={};for(var h in n)p[h]="access"===h?{}:n[h];for(var h in n.access)p.access[h]=n.access[h];p.addInitializer=function(e){if(d)throw new TypeError("Cannot add initializers after decoration has completed");i.push(accept(e||null))};var m=(0,r[f])("accessor"===a?{get:u.get,set:u.set}:u[c],p);if("accessor"===a){if(void 0===m)continue;if(null===m||"object"!=typeof m)throw new TypeError("Object expected");(o=accept(m.get))&&(u.get=o),(o=accept(m.set))&&(u.set=o),(o=accept(m.init))&&s.unshift(o)}else(o=accept(m))&&("field"===a?s.unshift(o):u[c]=o)}l&&Object.defineProperty(l,n.name,u),d=!0},__exportStar:__exportStar,__extends:__extends,__generator:__generator,__importDefault:__importDefault,__importStar:__importStar,__makeTemplateObject:__makeTemplateObject,__metadata:__metadata,__param:__param,__propKey:function(e){return"symbol"==typeof e?e:"".concat(e)},__read:__read,__rest:__rest,__runInitializers:function(e,t,r){for(var n=arguments.length>2,s=0;s<t.length;s++)r=n?t[s].call(e,r):t[s].call(e);return n?r:void 0},__setFunctionName:function(e,t,r){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})},__spread:__spread,__spreadArray:__spreadArray,__spreadArrays:__spreadArrays,__values:__values,default:Pn},Symbol.toStringTag,{value:"Module"})),Nn=getDefaultExportFromNamespaceIfNotNamed(An);var Rn={},jn={};Object.defineProperty(jn,"__esModule",{value:!0}),jn.lowerCase=jn.localeLowerCase=void 0;var qn={tr:{regexp:/\u0130|\u0049|\u0049\u0307/g,map:{"İ":"i",I:"ı","İ":"i"}},az:{regexp:/\u0130/g,map:{"İ":"i",I:"ı","İ":"i"}},lt:{regexp:/\u0049|\u004A|\u012E|\u00CC|\u00CD|\u0128/g,map:{I:"i̇",J:"j̇","Į":"į̇","Ì":"i̇̀","Í":"i̇́","Ĩ":"i̇̃"}}};function lowerCase(e){return e.toLowerCase()}jn.localeLowerCase=function(e,t){var r=qn[t.toLowerCase()];return lowerCase(r?e.replace(r.regexp,(function(e){return r.map[e]})):e)},jn.lowerCase=lowerCase,Object.defineProperty(Rn,"__esModule",{value:!0}),Rn.noCase=void 0;var $n=jn,Mn=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],Bn=/[^A-Z0-9]+/gi;function replace(e,t,r){return t instanceof RegExp?e.replace(t,r):t.reduce((function(e,t){return e.replace(t,r)}),e)}Rn.noCase=function(e,t){void 0===t&&(t={});for(var r=t.splitRegexp,n=void 0===r?Mn:r,s=t.stripRegexp,i=void 0===s?Bn:s,o=t.transform,a=void 0===o?$n.lowerCase:o,c=t.delimiter,l=void 0===c?" ":c,u=replace(replace(e,n,"$1\0$2"),i,"\0"),d=0,f=u.length;"\0"===u.charAt(d);)d++;for(;"\0"===u.charAt(f-1);)f--;return u.slice(d,f).split("\0").map(a).join(l)},Object.defineProperty(En,"__esModule",{value:!0}),En.dotCase=void 0;var Ln=Nn,Un=Rn;En.dotCase=function(e,t){return void 0===t&&(t={}),Un.noCase(e,Ln.__assign({delimiter:"."},t))},Object.defineProperty(_n,"__esModule",{value:!0}),_n.snakeCase=void 0;var Dn=Tn,Zn=En;_n.snakeCase=function(e,t){return void 0===t&&(t={}),Zn.dotCase(e,Dn.__assign({delimiter:"_"},t))};const Kn=bn,{snakeCase:Fn}=_n;var zn={parse:function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");var r={},n=(t||{}).decode||decode$2,s=0;for(;s<e.length;){var i=e.indexOf("=",s);if(-1===i)break;var o=e.indexOf(";",s);if(-1===o)o=e.length;else if(o<i){s=e.lastIndexOf(";",i-1)+1;continue}var a=e.slice(s,i).trim();if(void 0===r[a]){var c=e.slice(i+1,o).trim();34===c.charCodeAt(0)&&(c=c.slice(1,-1)),r[a]=tryDecode(c,n)}s=o+1}return r},serialize:function(e,t,r){var n=r||{},s=n.encode||encode;if("function"!=typeof s)throw new TypeError("option encode is invalid");if(!Wn.test(e))throw new TypeError("argument name is invalid");var i=s(t);if(i&&!Wn.test(i))throw new TypeError("argument val is invalid");var o=e+"="+i;if(null!=n.maxAge){var a=n.maxAge-0;if(isNaN(a)||!isFinite(a))throw new TypeError("option maxAge is invalid");o+="; Max-Age="+Math.floor(a)}if(n.domain){if(!Wn.test(n.domain))throw new TypeError("option domain is invalid");o+="; Domain="+n.domain}if(n.path){if(!Wn.test(n.path))throw new TypeError("option path is invalid");o+="; Path="+n.path}if(n.expires){var c=n.expires;if(!function(e){return"[object Date]"===Hn.call(e)||e instanceof Date}(c)||isNaN(c.valueOf()))throw new TypeError("option expires is invalid");o+="; Expires="+c.toUTCString()}n.httpOnly&&(o+="; HttpOnly");n.secure&&(o+="; Secure");if(n.priority){switch("string"==typeof n.priority?n.priority.toLowerCase():n.priority){case"low":o+="; Priority=Low";break;case"medium":o+="; Priority=Medium";break;case"high":o+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(n.sameSite){switch("string"==typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return o}},Hn=Object.prototype.toString,Wn=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function decode$2(e){return-1!==e.indexOf("%")?decodeURIComponent(e):e}function encode(e){return encodeURIComponent(e)}function tryDecode(e,t){try{return t(e)}catch(t){return e}}const Vn=getDefaultExportFromNamespaceIfNotNamed(Object.freeze(Object.defineProperty({__proto__:null,isomorphicAtob:isomorphicAtob$1},Symbol.toStringTag,{value:"Module"})));var Qn=Object.create,Jn=Object.defineProperty,Gn=Object.getOwnPropertyDescriptor,Yn=Object.getOwnPropertyNames,Xn=Object.getPrototypeOf,es=Object.prototype.hasOwnProperty,__copyProps=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let s of Yn(t))es.call(e,s)||s===r||Jn(e,s,{get:()=>t[s],enumerable:!(n=Gn(t,s))||n.enumerable});return e},__toESM=(e,t,r)=>(r=null!=e?Qn(Xn(e)):{},__copyProps(!t&&e&&e.__esModule?r:Jn(r,"default",{value:e,enumerable:!0}),e)),ts={};((e,t)=>{for(var r in t)Jn(e,r,{get:t[r],enumerable:!0})})(ts,{AllowlistIdentifier:()=>li,AuthStatus:()=>qi,Clerk:()=>Clerk$1,Client:()=>di,DeletedObject:()=>fi,Email:()=>pi,EmailAddress:()=>yi,ExternalAccount:()=>gi,IdentificationLink:()=>hi,Invitation:()=>bi,OauthAccessToken:()=>wi,ObjectType:()=>_i,Organization:()=>vi,OrganizationInvitation:()=>Si,OrganizationMembership:()=>Ii,OrganizationMembershipPublicUserData:()=>ki,PhoneNumber:()=>Ti,RedirectUrl:()=>Ei,SMSMessage:()=>xi,Session:()=>ui,SignInToken:()=>Oi,Token:()=>Ci,User:()=>Ai,Verification:()=>mi,buildRequestUrl:()=>buildRequestUrl,constants:()=>ci,createAuthenticateRequest:()=>createAuthenticateRequest,createIsomorphicRequest:()=>createIsomorphicRequest,debugRequestState:()=>debugRequestState,decodeJwt:()=>decodeJwt,deserialize:()=>deserialize,hasValidSignature:()=>hasValidSignature,loadInterstitialFromLocal:()=>loadInterstitialFromLocal,makeAuthObjectSerializable:()=>makeAuthObjectSerializable,prunePrivateMetadata:()=>prunePrivateMetadata,redirect:()=>redirect,sanitizeAuthObject:()=>sanitizeAuthObject,signJwt:()=>signJwt,signedInAuthObject:()=>signedInAuthObject,signedOutAuthObject:()=>signedOutAuthObject,verifyJwt:()=>verifyJwt,verifyToken:()=>verifyToken});var rs,ns=(rs=ts,__copyProps(Jn({},"__esModule",{value:!0}),rs)),ss=Br,os=class{constructor(e){this.request=e}requireId(e){if(!e)throw new Error("A valid resource ID is required.")}},as="/",cs=new RegExp("(?<!:)"+as+"{1,}","g");function joinPaths(...e){return e.filter((e=>e)).join(as).replace(cs,as)}var ls="/allowlist_identifiers",us=class extends os{async getAllowlistIdentifierList(){return this.request({method:"GET",path:ls})}async createAllowlistIdentifier(e){return this.request({method:"POST",path:ls,bodyParams:e})}async deleteAllowlistIdentifier(e){return this.requireId(e),this.request({method:"DELETE",path:joinPaths(ls,e)})}},ds="/clients",fs=class extends os{async getClientList(){return this.request({method:"GET",path:ds})}async getClient(e){return this.requireId(e),this.request({method:"GET",path:joinPaths(ds,e)})}verifyClient(e){return this.request({method:"POST",path:joinPaths(ds,"verify"),bodyParams:{token:e}})}},ps=class extends os{async deleteDomain(e){return this.request({method:"DELETE",path:joinPaths("/domains",e)})}},hs="/email_addresses",ms=class extends os{async getEmailAddress(e){return this.requireId(e),this.request({method:"GET",path:joinPaths(hs,e)})}async createEmailAddress(e){return this.request({method:"POST",path:hs,bodyParams:e})}async updateEmailAddress(e,t={}){return this.requireId(e),this.request({method:"PATCH",path:joinPaths(hs,e),bodyParams:t})}async deleteEmailAddress(e){return this.requireId(e),this.request({method:"DELETE",path:joinPaths(hs,e)})}},ys=Br,gs=class extends os{async createEmail(e){return(0,ys.deprecated)("EmailAPI.createEmail","This endpoint is no longer available and the function will be removed in the next major version."),this.request({method:"POST",path:"/emails",bodyParams:e})}},bs=Lr,_s=Dr,ws=Hr,vs=Br,Ss=Hr,Is=(0,en.buildErrorThrower)({packageName:"@clerk/backend"}),{isDevOrStagingUrl:ks}=(0,Ss.createDevOrStagingUrlCache)(),Ts=class extends os{async getInterstitial(){return(0,vs.deprecated)("getInterstitial()",'Switch to `Clerk(...).localInterstitial(...)` from `import { Clerk } from "@clerk/backend"`.'),this.request({path:"internal/interstitial",method:"GET",headerParams:{"Content-Type":"text/html"}})}},Es="/invitations",Os=class extends os{async getInvitationList(e={}){return this.request({method:"GET",path:Es,queryParams:e})}async createInvitation(e){return this.request({method:"POST",path:Es,bodyParams:e})}async revokeInvitation(e){return this.requireId(e),this.request({method:"POST",path:joinPaths(Es,e,"revoke")})}},xs=Br,Cs=__toESM(rn),Ps=__toESM(pn),{RuntimeFetch:As,RuntimeAbortController:Ns,RuntimeBlob:Rs,RuntimeFormData:js,RuntimeHeaders:qs,RuntimeRequest:$s,RuntimeResponse:Ms}=Ps,Bs=As.bind(globalThis),Ls={crypto:Cs.default,fetch:Bs,AbortController:Ns,Blob:Rs,FormData:js,Headers:qs,Request:$s,Response:Ms},Us="/organizations",Ds=class extends os{async getOrganizationList(e){return this.request({method:"GET",path:Us,queryParams:e})}async createOrganization(e){return this.request({method:"POST",path:Us,bodyParams:e})}async getOrganization(e){const t="organizationId"in e?e.organizationId:e.slug;return this.requireId(t),this.request({method:"GET",path:joinPaths(Us,t)})}async updateOrganization(e,t){return this.requireId(e),this.request({method:"PATCH",path:joinPaths(Us,e),bodyParams:t})}async updateOrganizationLogo(e,t){this.requireId(e);const r=new Ls.FormData;return r.append("file",t?.file),r.append("uploader_user_id",t?.uploaderUserId),this.request({method:"PUT",path:joinPaths(Us,e,"logo"),formData:r})}async deleteOrganizationLogo(e){return this.requireId(e),this.request({method:"DELETE",path:joinPaths(Us,e,"logo")})}async updateOrganizationMetadata(e,t){return this.requireId(e),this.request({method:"PATCH",path:joinPaths(Us,e,"metadata"),bodyParams:t})}async deleteOrganization(e){return this.request({method:"DELETE",path:joinPaths(Us,e)})}async getOrganizationMembershipList(e){const{organizationId:t,limit:r,offset:n}=e;return this.requireId(t),this.request({method:"GET",path:joinPaths(Us,t,"memberships"),queryParams:{limit:r,offset:n}})}async createOrganizationMembership(e){const{organizationId:t,userId:r,role:n}=e;return this.requireId(t),this.request({method:"POST",path:joinPaths(Us,t,"memberships"),bodyParams:{userId:r,role:n}})}async updateOrganizationMembership(e){const{organizationId:t,userId:r,role:n}=e;return this.requireId(t),this.request({method:"PATCH",path:joinPaths(Us,t,"memberships",r),bodyParams:{role:n}})}async updateOrganizationMembershipMetadata(e){const{organizationId:t,userId:r,publicMetadata:n,privateMetadata:s}=e;return this.request({method:"PATCH",path:joinPaths(Us,t,"memberships",r,"metadata"),bodyParams:{publicMetadata:n,privateMetadata:s}})}async deleteOrganizationMembership(e){const{organizationId:t,userId:r}=e;return this.requireId(t),this.request({method:"DELETE",path:joinPaths(Us,t,"memberships",r)})}async getOrganizationInvitationList(e){const{organizationId:t,status:r,limit:n,offset:s}=e;return this.requireId(t),this.request({method:"GET",path:joinPaths(Us,t,"invitations"),queryParams:{status:r,limit:n,offset:s}})}async getPendingOrganizationInvitationList(e){(0,xs.deprecated)("getPendingOrganizationInvitationList","Use `getOrganizationInvitationList` instead.");const{organizationId:t,limit:r,offset:n}=e;return this.requireId(t),this.request({method:"GET",path:joinPaths(Us,t,"invitations","pending"),queryParams:{limit:r,offset:n}})}async createOrganizationInvitation(e){const{organizationId:t,...r}=e;return this.requireId(t),this.request({method:"POST",path:joinPaths(Us,t,"invitations"),bodyParams:{...r}})}async getOrganizationInvitation(e){const{organizationId:t,invitationId:r}=e;return this.requireId(t),this.requireId(r),this.request({method:"GET",path:joinPaths(Us,t,"invitations",r)})}async revokeOrganizationInvitation(e){const{organizationId:t,invitationId:r,requestingUserId:n}=e;return this.requireId(t),this.request({method:"POST",path:joinPaths(Us,t,"invitations",r,"revoke"),bodyParams:{requestingUserId:n}})}},Zs="/phone_numbers",Ks=class extends os{async getPhoneNumber(e){return this.requireId(e),this.request({method:"GET",path:joinPaths(Zs,e)})}async createPhoneNumber(e){return this.request({method:"POST",path:Zs,bodyParams:e})}async updatePhoneNumber(e,t={}){return this.requireId(e),this.request({method:"PATCH",path:joinPaths(Zs,e),bodyParams:t})}async deletePhoneNumber(e){return this.requireId(e),this.request({method:"DELETE",path:joinPaths(Zs,e)})}},Fs="/redirect_urls",zs=class extends os{async getRedirectUrlList(){return this.request({method:"GET",path:Fs})}async getRedirectUrl(e){return this.requireId(e),this.request({method:"GET",path:joinPaths(Fs,e)})}async createRedirectUrl(e){return this.request({method:"POST",path:Fs,bodyParams:e})}async deleteRedirectUrl(e){return this.requireId(e),this.request({method:"DELETE",path:joinPaths(Fs,e)})}},Hs="/sessions",Ws=class extends os{async getSessionList(e){return this.request({method:"GET",path:Hs,queryParams:e})}async getSession(e){return this.requireId(e),this.request({method:"GET",path:joinPaths(Hs,e)})}async revokeSession(e){return this.requireId(e),this.request({method:"POST",path:joinPaths(Hs,e,"revoke")})}async verifySession(e,t){return this.requireId(e),this.request({method:"POST",path:joinPaths(Hs,e,"verify"),bodyParams:{token:t}})}async getToken(e,t){return this.requireId(e),(await this.request({method:"POST",path:joinPaths(Hs,e,"tokens",t||"")})).jwt}},Vs="/sign_in_tokens",Qs=class extends os{async createSignInToken(e){return this.request({method:"POST",path:Vs,bodyParams:e})}async revokeSignInToken(e){return this.requireId(e),this.request({method:"POST",path:joinPaths(Vs,e,"revoke")})}},Js=Br,Gs=class extends os{async createSMSMessage(e){return(0,Js.deprecated)("SMSMessageAPI.createSMSMessage","This endpoint is no longer available and the function will be removed in the next major version."),this.request({method:"POST",path:"/sms_messages",bodyParams:e})}},Ys="/users",Xs=class extends os{async getUserList(e={}){return this.request({method:"GET",path:Ys,queryParams:e})}async getUser(e){return this.requireId(e),this.request({method:"GET",path:joinPaths(Ys,e)})}async createUser(e){return this.request({method:"POST",path:Ys,bodyParams:e})}async updateUser(e,t={}){return this.requireId(e),this.request({method:"PATCH",path:joinPaths(Ys,e),bodyParams:t})}async updateUserProfileImage(e,t){this.requireId(e);const r=new Ls.FormData;return r.append("file",t?.file),this.request({method:"POST",path:joinPaths(Ys,e,"profile_image"),formData:r})}async updateUserMetadata(e,t){return this.requireId(e),this.request({method:"PATCH",path:joinPaths(Ys,e,"metadata"),bodyParams:t})}async deleteUser(e){return this.requireId(e),this.request({method:"DELETE",path:joinPaths(Ys,e)})}async getCount(e={}){return this.request({method:"GET",path:joinPaths(Ys,"count"),queryParams:e})}async getUserOauthAccessToken(e,t){return this.requireId(e),this.request({method:"GET",path:joinPaths(Ys,e,"oauth_access_tokens",t)})}async disableUserMFA(e){return this.requireId(e),this.request({method:"DELETE",path:joinPaths(Ys,e,"mfa")})}async getOrganizationMembershipList(e){const{userId:t,limit:r,offset:n}=e;return this.requireId(t),this.request({method:"GET",path:joinPaths(Ys,t,"organization_memberships"),queryParams:{limit:r,offset:n}})}async verifyPassword(e){const{userId:t,password:r}=e;return this.requireId(t),this.request({method:"POST",path:joinPaths(Ys,t,"verify_password"),bodyParams:{password:r}})}async verifyTOTP(e){const{userId:t,code:r}=e;return this.requireId(t),this.request({method:"POST",path:joinPaths(Ys,t,"verify_totp"),bodyParams:{code:r}})}},ei=en,ti=__toESM(mn),ri=__toESM((function(e,t){return t=Object.assign({deep:!0,exclude:[],parsingOptions:{}},t),Kn(e,(function(e,r){return[(n=t.exclude,s=e,n.some((function(e){return"string"==typeof e?e===s:e.test(s)}))?e:Fn(e,t.parsingOptions)),r];var n,s}),t)})),ni="https://api.clerk.dev",si="v1",ii="@clerk/backend@0.38.1",oi=300,ai={AuthToken:"x-clerk-auth-token",AuthStatus:"x-clerk-auth-status",AuthReason:"x-clerk-auth-reason",AuthMessage:"x-clerk-auth-message",EnableDebug:"x-clerk-debug",ClerkRedirectTo:"x-clerk-redirect-to",CloudFrontForwardedProto:"cloudfront-forwarded-proto",Authorization:"authorization",ForwardedPort:"x-forwarded-port",ForwardedProto:"x-forwarded-proto",ForwardedHost:"x-forwarded-host",Referrer:"referer",UserAgent:"user-agent",Origin:"origin",Host:"host",ContentType:"content-type"},ci={Attributes:{AuthToken:"__clerkAuthToken",AuthStatus:"__clerkAuthStatus",AuthReason:"__clerkAuthReason",AuthMessage:"__clerkAuthMessage"},Cookies:{Session:"__session",ClientUat:"__client_uat"},Headers:ai,SearchParams:{AuthStatus:ai.AuthStatus,AuthToken:ai.AuthToken},ContentTypes:{Json:"application/json"}};function assertValidSecretKey(e){if(!e||"string"!=typeof e)throw Error("Missing Clerk Secret Key or API Key. Go to https://dashboard.clerk.com and get your key for your instance.")}var li=class _AllowlistIdentifier{constructor(e,t,r,n,s){this.id=e,this.identifier=t,this.createdAt=r,this.updatedAt=n,this.invitationId=s}static fromJSON(e){return new _AllowlistIdentifier(e.id,e.identifier,e.created_at,e.updated_at,e.invitation_id)}},ui=class _Session{constructor(e,t,r,n,s,i,o,a,c){this.id=e,this.clientId=t,this.userId=r,this.status=n,this.lastActiveAt=s,this.expireAt=i,this.abandonAt=o,this.createdAt=a,this.updatedAt=c}static fromJSON(e){return new _Session(e.id,e.client_id,e.user_id,e.status,e.last_active_at,e.expire_at,e.abandon_at,e.created_at,e.updated_at)}},di=class _Client{constructor(e,t,r,n,s,i,o,a){this.id=e,this.sessionIds=t,this.sessions=r,this.signInId=n,this.signUpId=s,this.lastActiveSessionId=i,this.createdAt=o,this.updatedAt=a}static fromJSON(e){return new _Client(e.id,e.session_ids,e.sessions.map((e=>ui.fromJSON(e))),e.sign_in_id,e.sign_up_id,e.last_active_session_id,e.created_at,e.updated_at)}},fi=class _DeletedObject{constructor(e,t,r,n){this.object=e,this.id=t,this.slug=r,this.deleted=n}static fromJSON(e){return new _DeletedObject(e.object,e.id||null,e.slug||null,e.deleted)}},pi=class _Email{constructor(e,t,r,n,s,i,o,a,c,l,u){this.id=e,this.fromEmailName=t,this.emailAddressId=r,this.toEmailAddress=n,this.subject=s,this.body=i,this.bodyPlain=o,this.status=a,this.slug=c,this.data=l,this.deliveredByClerk=u}static fromJSON(e){return new _Email(e.id,e.from_email_name,e.email_address_id,e.to_email_address,e.subject,e.body,e.body_plain,e.status,e.slug,e.data,e.delivered_by_clerk)}},hi=class _IdentificationLink{constructor(e,t){this.id=e,this.type=t}static fromJSON(e){return new _IdentificationLink(e.id,e.type)}},mi=class _Verification{constructor(e,t,r=null,n=null,s=null,i=null){this.status=e,this.strategy=t,this.externalVerificationRedirectURL=r,this.attempts=n,this.expireAt=s,this.nonce=i}static fromJSON(e){return new _Verification(e.status,e.strategy,e.external_verification_redirect_url?new URL(e.external_verification_redirect_url):null,e.attempts,e.expire_at,e.nonce)}},yi=class _EmailAddress{constructor(e,t,r,n){this.id=e,this.emailAddress=t,this.verification=r,this.linkedTo=n}static fromJSON(e){return new _EmailAddress(e.id,e.email_address,e.verification&&mi.fromJSON(e.verification),e.linked_to.map((e=>hi.fromJSON(e))))}},gi=class _ExternalAccount{constructor(e,t,r,n,s,i,o,a,c,l,u,d={},f,p){this.id=e,this.provider=t,this.identificationId=r,this.externalId=n,this.approvedScopes=s,this.emailAddress=i,this.firstName=o,this.lastName=a,this.picture=c,this.imageUrl=l,this.username=u,this.publicMetadata=d,this.label=f,this.verification=p}static fromJSON(e){return new _ExternalAccount(e.id,e.provider,e.identification_id,e.provider_user_id,e.approved_scopes,e.email_address,e.first_name,e.last_name,e.avatar_url,e.image_url,e.username,e.public_metadata,e.label,e.verification&&mi.fromJSON(e.verification))}};(0,vs.deprecatedProperty)(gi,"picture","Use `imageUrl` instead.");var bi=class _Invitation{constructor(e,t,r,n,s,i,o){this.id=e,this.emailAddress=t,this.publicMetadata=r,this.createdAt=n,this.updatedAt=s,this.status=i,this.revoked=o}static fromJSON(e){return new _Invitation(e.id,e.email_address,e.public_metadata,e.created_at,e.updated_at,e.status,e.revoked)}},_i=(e=>(e.AllowlistIdentifier="allowlist_identifier",e.Client="client",e.Email="email",e.EmailAddress="email_address",e.ExternalAccount="external_account",e.FacebookAccount="facebook_account",e.GoogleAccount="google_account",e.Invitation="invitation",e.OauthAccessToken="oauth_access_token",e.Organization="organization",e.OrganizationInvitation="organization_invitation",e.OrganizationMembership="organization_membership",e.PhoneNumber="phone_number",e.RedirectUrl="redirect_url",e.Session="session",e.SignInAttempt="sign_in_attempt",e.SignInToken="sign_in_token",e.SignUpAttempt="sign_up_attempt",e.SmsMessage="sms_message",e.User="user",e.Web3Wallet="web3_wallet",e.Token="token",e.TotalCount="total_count",e))(_i||{}),wi=class _OauthAccessToken{constructor(e,t,r={},n,s,i){this.provider=e,this.token=t,this.publicMetadata=r,this.label=n,this.scopes=s,this.tokenSecret=i}static fromJSON(e){return new _OauthAccessToken(e.provider,e.token,e.public_metadata,e.label,e.scopes,e.token_secret)}},vi=class _Organization{constructor(e,t,r,n,s,i,o,a,c,l={},u={},d,f,p){this.id=e,this.name=t,this.slug=r,this.logoUrl=n,this.imageUrl=s,this.hasImage=i,this.createdBy=o,this.createdAt=a,this.updatedAt=c,this.publicMetadata=l,this.privateMetadata=u,this.maxAllowedMemberships=d,this.adminDeleteEnabled=f,this.members_count=p}static fromJSON(e){return new _Organization(e.id,e.name,e.slug,e.logo_url,e.image_url,e.has_image,e.created_by,e.created_at,e.updated_at,e.public_metadata,e.private_metadata,e.max_allowed_memberships,e.admin_delete_enabled,e.members_count)}};(0,vs.deprecatedProperty)(vi,"logoUrl","Use `imageUrl` instead.");var Si=class _OrganizationInvitation{constructor(e,t,r,n,s,i,o,a={},c={}){this.id=e,this.emailAddress=t,this.role=r,this.organizationId=n,this.createdAt=s,this.updatedAt=i,this.status=o,this.publicMetadata=a,this.privateMetadata=c}static fromJSON(e){return new _OrganizationInvitation(e.id,e.email_address,e.role,e.organization_id,e.created_at,e.updated_at,e.status,e.public_metadata,e.private_metadata)}},Ii=class _OrganizationMembership{constructor(e,t,r={},n={},s,i,o,a){this.id=e,this.role=t,this.publicMetadata=r,this.privateMetadata=n,this.createdAt=s,this.updatedAt=i,this.organization=o,this.publicUserData=a}static fromJSON(e){return new _OrganizationMembership(e.id,e.role,e.public_metadata,e.private_metadata,e.created_at,e.updated_at,vi.fromJSON(e.organization),ki.fromJSON(e.public_user_data))}},ki=class _OrganizationMembershipPublicUserData{constructor(e,t,r,n,s,i,o){this.identifier=e,this.firstName=t,this.lastName=r,this.profileImageUrl=n,this.imageUrl=s,this.hasImage=i,this.userId=o}static fromJSON(e){return new _OrganizationMembershipPublicUserData(e.identifier,e.first_name,e.last_name,e.profile_image_url,e.image_url,e.has_image,e.user_id)}};(0,vs.deprecatedProperty)(ki,"profileImageUrl","Use `imageUrl` instead.");var Ti=class _PhoneNumber{constructor(e,t,r,n,s,i){this.id=e,this.phoneNumber=t,this.reservedForSecondFactor=r,this.defaultSecondFactor=n,this.verification=s,this.linkedTo=i}static fromJSON(e){return new _PhoneNumber(e.id,e.phone_number,e.reserved_for_second_factor,e.default_second_factor,e.verification&&mi.fromJSON(e.verification),e.linked_to.map((e=>hi.fromJSON(e))))}},Ei=class _RedirectUrl{constructor(e,t,r,n){this.id=e,this.url=t,this.createdAt=r,this.updatedAt=n}static fromJSON(e){return new _RedirectUrl(e.id,e.url,e.created_at,e.updated_at)}},Oi=class _SignInToken{constructor(e,t,r,n,s,i,o){this.id=e,this.userId=t,this.token=r,this.status=n,this.url=s,this.createdAt=i,this.updatedAt=o}static fromJSON(e){return new _SignInToken(e.id,e.user_id,e.token,e.status,e.url,e.created_at,e.updated_at)}},xi=class _SMSMessage{constructor(e,t,r,n,s,i,o){this.id=e,this.fromPhoneNumber=t,this.toPhoneNumber=r,this.message=n,this.status=s,this.phoneNumberId=i,this.data=o}static fromJSON(e){return new _SMSMessage(e.id,e.from_phone_number,e.to_phone_number,e.message,e.status,e.phone_number_id,e.data)}},Ci=class _Token{constructor(e){this.jwt=e}static fromJSON(e){return new _Token(e.jwt)}},Pi=class _Web3Wallet{constructor(e,t,r){this.id=e,this.web3Wallet=t,this.verification=r}static fromJSON(e){return new _Web3Wallet(e.id,e.web3_wallet,e.verification&&mi.fromJSON(e.verification))}},Ai=class _User{constructor(e,t,r,n,s,i,o,a,c,l,u,d,f,p,h,m,y,g,b,_,w,v={},S={},I={},k=[],T=[],O=[],x=[],C){this.id=e,this.passwordEnabled=t,this.totpEnabled=r,this.backupCodeEnabled=n,this.twoFactorEnabled=s,this.banned=i,this.createdAt=o,this.updatedAt=a,this.profileImageUrl=c,this.imageUrl=l,this.hasImage=u,this.gender=d,this.birthday=f,this.primaryEmailAddressId=p,this.primaryPhoneNumberId=h,this.primaryWeb3WalletId=m,this.lastSignInAt=y,this.externalId=g,this.username=b,this.firstName=_,this.lastName=w,this.publicMetadata=v,this.privateMetadata=S,this.unsafeMetadata=I,this.emailAddresses=k,this.phoneNumbers=T,this.web3Wallets=O,this.externalAccounts=x,this.createOrganizationEnabled=C}static fromJSON(e){return new _User(e.id,e.password_enabled,e.totp_enabled,e.backup_code_enabled,e.two_factor_enabled,e.banned,e.created_at,e.updated_at,e.profile_image_url,e.image_url,e.has_image,e.gender,e.birthday,e.primary_email_address_id,e.primary_phone_number_id,e.primary_web3_wallet_id,e.last_sign_in_at,e.external_id,e.username,e.first_name,e.last_name,e.public_metadata,e.private_metadata,e.unsafe_metadata,(e.email_addresses||[]).map((e=>yi.fromJSON(e))),(e.phone_numbers||[]).map((e=>Ti.fromJSON(e))),(e.web3_wallets||[]).map((e=>Pi.fromJSON(e))),(e.external_accounts||[]).map((e=>gi.fromJSON(e))),e.create_organization_enabled)}};function deserialize(e){return Array.isArray(e)?e.map((e=>jsonToObject(e))):function(e){return Array.isArray(e.data)&&void 0!==e.data}(e)?e.data.map((e=>jsonToObject(e))):jsonToObject(e)}function jsonToObject(e){if("string"!=typeof e&&"object"in e&&"deleted"in e)return fi.fromJSON(e);switch(e.object){case"allowlist_identifier":return li.fromJSON(e);case"client":return di.fromJSON(e);case"email_address":return yi.fromJSON(e);case"email":return pi.fromJSON(e);case"invitation":return bi.fromJSON(e);case"oauth_access_token":return wi.fromJSON(e);case"organization":return vi.fromJSON(e);case"organization_invitation":return Si.fromJSON(e);case"organization_membership":return Ii.fromJSON(e);case"phone_number":return Ti.fromJSON(e);case"redirect_url":return Ei.fromJSON(e);case"sign_in_token":return Oi.fromJSON(e);case"session":return ui.fromJSON(e);case"sms_message":return xi.fromJSON(e);case"token":return Ci.fromJSON(e);case"total_count":return function(e){return e.total_count}(e);case"user":return Ai.fromJSON(e);default:return e}}(0,vs.deprecatedProperty)(Ai,"profileImageUrl","Use `imageUrl` instead.");var withLegacyReturn=e=>async(...t)=>{const r=await e(...t);if(null===r.errors)return r.data;{const{errors:e,clerkTraceId:t}=r,{status:n,statusText:s}=r,i=new ei.ClerkAPIResponseError(s||"",{data:[],status:n||"",clerkTraceId:t});throw i.errors=e,i}};function getTraceId(e,t){if(e&&"object"==typeof e&&"clerk_trace_id"in e&&"string"==typeof e.clerk_trace_id)return e.clerk_trace_id;const r=t?.get("cf-ray");return r||""}function parseErrors(e){if(e&&"object"==typeof e&&"errors"in e){const t=e.errors;return t.length>0?t.map(parseError):[]}return[]}function parseError(e){return{code:e.code,message:e.message,longMessage:e.long_message,meta:{paramName:e?.meta?.param_name,sessionId:e?.meta?.session_id}}}function createBackendApiClient(e){const t=function(e){return withLegacyReturn((async t=>{const{apiKey:r,secretKey:n,httpOptions:s,apiUrl:i=ni,apiVersion:o=si,userAgent:a=ii}=e;r&&(0,vs.deprecated)("apiKey","Use `secretKey` instead."),s&&(0,vs.deprecated)("httpOptions","This option has been deprecated and will be removed with the next major release.\nA RequestInit init object used by the `request` method.");const{path:c,method:l,queryParams:u,headerParams:d,bodyParams:f,formData:p}=t,h=n||r;assertValidSecretKey(h);const m=joinPaths(i,o,c),y=new URL(m);if(u){const e=(0,ri.default)({...u});for(const[t,r]of Object.entries(e))r&&[r].flat().forEach((e=>y.searchParams.append(t,e)))}const g={Authorization:`Bearer ${h}`,"User-Agent":a,...d};let b;try{if(p)b=await Ls.fetch(y.href,{...s,method:l,headers:g,body:p});else{g["Content-Type"]="application/json";const e="GET"!==l&&f&&Object.keys(f).length>0?{body:JSON.stringify((0,ri.default)(f,{deep:!1}))}:null;b=await Ls.fetch(y.href,(0,ti.default)(s||{},{method:l,headers:g,...e}))}const e=b?.headers&&b.headers?.get(ci.Headers.ContentType)===ci.ContentTypes.Json,t=await(e?b.json():b.text());if(!b.ok)throw t;return{data:deserialize(t),errors:null}}catch(e){return e instanceof Error?{data:null,errors:[{code:"unexpected_error",message:e.message||"Unexpected error"}],clerkTraceId:getTraceId(e,b?.headers)}:{data:null,errors:parseErrors(e),status:b?.status,statusText:b?.statusText,clerkTraceId:getTraceId(e,b?.headers)}}}))}(e);return{allowlistIdentifiers:new us(t),clients:new fs(t),emailAddresses:new ms(t),emails:new gs(t),interstitial:new Ts(t),invitations:new Os(t),organizations:new Ds(t),phoneNumbers:new Ks(t),redirectUrls:new zs(t),sessions:new Ws(t),signInTokens:new Qs(t),smsMessages:new Gs(t),users:new Xs(t),domains:new ps(t)}}var Ni=Br,createDebug=e=>()=>{const t={...e};return t.apiKey=(t.apiKey||"").substring(0,7),t.secretKey=(t.secretKey||"").substring(0,7),t.jwtKey=(t.jwtKey||"").substring(0,7),{...t}};function signedInAuthObject(e,t,r){const{act:n,sid:s,org_id:i,org_role:o,org_slug:a,org_permissions:c,sub:l}=e,{apiKey:u,secretKey:d,apiUrl:f,apiVersion:p,token:h,session:m,user:y,organization:g}=t;u&&(0,Ni.deprecated)("apiKey","Use `secretKey` instead.");const{sessions:b}=createBackendApiClient({apiKey:u,secretKey:d,apiUrl:f,apiVersion:p});return{actor:n,sessionClaims:e,sessionId:s,session:m,userId:l,user:y,orgId:i,orgRole:o,orgSlug:a,orgPermissions:c,organization:g,getToken:createGetToken({sessionId:s,sessionToken:h,fetcher:(...e)=>b.getToken(...e)}),has:createHasAuthorization({orgId:i,orgRole:o,orgPermissions:c,userId:l}),debug:createDebug({...t,...r})}}function signedOutAuthObject(e){return e?.apiKey&&(0,Ni.deprecated)("apiKey","Use `secretKey` instead."),{sessionClaims:null,sessionId:null,session:null,userId:null,user:null,actor:null,orgId:null,orgRole:null,orgSlug:null,orgPermissions:null,organization:null,getToken:()=>Promise.resolve(null),has:()=>!1,debug:createDebug(e)}}function prunePrivateMetadata(e){return e&&(delete e.privateMetadata,delete e.private_metadata),e}function sanitizeAuthObject(e){const t=e.user?{...e.user}:e.user,r=e.organization?{...e.organization}:e.organization;return prunePrivateMetadata(t),prunePrivateMetadata(r),{...e,user:t,organization:r}}var makeAuthObjectSerializable=e=>{const{debug:t,getToken:r,has:n,...s}=e;return s},createGetToken=e=>{const{fetcher:t,sessionToken:r,sessionId:n}=e||{};return async(e={})=>n?e.template?t(n,e.template):r:null},createHasAuthorization=({orgId:e,orgRole:t,userId:r,orgPermissions:n})=>s=>{if(!s?.permission&&!s?.role)throw new Error('Missing parameters. `has` from `auth` or `getAuth` requires a permission or role key to be passed. Example usage: `has({permission: "org:posts:edit"`');return!!(e&&r&&t&&n)&&(s.permission?n.includes(s.permission):!!s.role&&t===s.role)},Ri=class _TokenVerificationError extends Error{constructor({action:e,message:t,reason:r}){super(t),Object.setPrototypeOf(this,_TokenVerificationError.prototype),this.reason=r,this.message=t,this.action=e}getFullMessage(){return`${[this.message,this.action].filter((e=>e)).join(" ")} (reason=${this.reason}, token-carrier=${this.tokenCarrier})`}};function loadInterstitialFromLocal(e){e.frontendApi&&(0,vs.deprecated)("frontendApi","Use `publishableKey` instead."),e.pkgVersion&&(0,vs.deprecated)("pkgVersion","Use `clerkJSVersion` instead."),e.frontendApi=(0,ws.parsePublishableKey)(e.publishableKey)?.frontendApi||e.frontendApi||"";const t=ks(e.frontendApi)?"":(0,bs.addClerkPrefix)(e.domain),{debugData:r,frontendApi:n,pkgVersion:s,clerkJSUrl:i,clerkJSVersion:o,publishableKey:a,proxyUrl:c,isSatellite:l=!1,domain:u,signInUrl:d}=e;return`\n    <head>\n        <meta charset="UTF-8" />\n        <style>\n          @media (prefers-color-scheme: dark) {\n            body {\n              background-color: black;\n            }\n          }\n        </style>\n    </head>\n    <body>\n        <script>\n            window.__clerk_frontend_api = '${n}';\n            window.__clerk_debug = ${JSON.stringify(r||{})};\n            ${c?`window.__clerk_proxy_url = '${c}'`:""}\n            ${u?`window.__clerk_domain = '${u}'`:""}\n            window.startClerk = async () => {\n                function formRedirect(){\n                    const form = '<form method="get" action="" name="redirect"></form>';\n                    document.body.innerHTML = document.body.innerHTML + form;\n\n                    const searchParams = new URLSearchParams(window.location.search);\n                    for (let paramTuple of searchParams) {\n                        const input = document.createElement("input");\n                        input.type = "hidden";\n                        input.name = paramTuple[0];\n                        input.value = paramTuple[1];\n                        document.forms.redirect.appendChild(input);\n                    }\n                    const url = new URL(window.location.origin + window.location.pathname + window.location.hash);\n                    window.history.pushState({}, '', url);\n\n                    document.forms.redirect.action = window.location.pathname + window.location.hash;\n                    document.forms.redirect.submit();\n                }\n\n                const Clerk = window.Clerk;\n                try {\n                    await Clerk.load({\n                        isSatellite: ${l},\n                        isInterstitial: true,\n                        signInUrl: ${d?`'${d}'`:void 0}\n                    });\n                    if(Clerk.loaded){\n                      if(window.location.href.indexOf("#") === -1){\n                        window.location.href = window.location.href;\n                      } else if (window.navigator.userAgent.toLowerCase().includes("firefox/")){\n                          formRedirect();\n                      } else {\n                          window.location.reload();\n                      }\n                    }\n                } catch (err) {\n                    console.error('Clerk: ', err);\n                }\n            };\n            (() => {\n                const script = document.createElement('script');\n                ${a?`script.setAttribute('data-clerk-publishable-key', '${a}');`:`script.setAttribute('data-clerk-frontend-api', '${n}');`}\n\n                ${u?`script.setAttribute('data-clerk-domain', '${u}');`:""}\n                ${c?`script.setAttribute('data-clerk-proxy-url', '${c}')`:""};\n                script.async = true;\n                script.src = '${i||(0,bs.getScriptUrl)(c||t||n,{pkgVersion:s,clerkJSVersion:o})}';\n                script.crossOrigin = 'anonymous';\n                script.addEventListener('load', startClerk);\n                document.body.appendChild(script);\n            })();\n        <\/script>\n    </body>\n`}function buildPublicInterstitialUrl(e){e.frontendApi&&(0,vs.deprecated)("frontendApi","Use `publishableKey` instead."),e.frontendApi=(0,ws.parsePublishableKey)(e.publishableKey)?.frontendApi||e.frontendApi||"";const{apiUrl:t,frontendApi:r,pkgVersion:n,clerkJSVersion:s,publishableKey:i,proxyUrl:o,isSatellite:a,domain:c,signInUrl:l}=e,u=new URL(t);return u.pathname=joinPaths(u.pathname,si,"/public/interstitial"),u.searchParams.append("clerk_js_version",s||(0,bs.getClerkJsMajorVersionOrTag)(r,n)),i?u.searchParams.append("publishable_key",i):u.searchParams.append("frontend_api",r),o&&u.searchParams.append("proxy_url",o),a&&u.searchParams.append("is_satellite","true"),u.searchParams.append("sign_in_url",l||""),ks(e.frontendApi)||u.searchParams.append("use_domain_for_script","true"),c&&u.searchParams.append("domain",c),u.href}var ji=zn,getHeader=(e,t)=>e.headers.get(t),getFirstValueFromHeader=e=>e?.split(",")[0],buildRequestUrl=(e,t)=>{const r=new URL(e.url),n=getHeader(e,ci.Headers.ForwardedProto),s=getHeader(e,ci.Headers.ForwardedHost),i=getHeader(e,ci.Headers.Host),o=r.protocol,a=buildOrigin({protocol:o,forwardedProto:n,forwardedHost:s,host:i||r.host});return new URL(t||r.pathname,a)},buildOrigin=({protocol:e,forwardedProto:t,forwardedHost:r,host:n})=>{const s=getFirstValueFromHeader(r)??n,i=getFirstValueFromHeader(t)??e?.replace(/[:/]/,"");return s&&i?`${i}://${s}`:""},createIsomorphicRequest=e=>{const t=e(Ls.Request,Ls.Headers),r=buildRequestUrl(t);return new Ls.Request(r,t)},buildRequest2=e=>{if(!e)return{};return{cookies:parseIsomorphicRequestCookies(e),headers:getHeaderFromIsomorphicRequest(e),searchParams:getSearchParamsFromIsomorphicRequest(e)}},parseIsomorphicRequestCookies=e=>{const t=e.headers&&e.headers?.get("cookie")?(0,ji.parse)(e.headers.get("cookie")):{};return e=>{const r=t?.[e];var n;if(void 0!==r)return(n=r)?n.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent):n}},getHeaderFromIsomorphicRequest=e=>t=>e?.headers?.get(t)||void 0,getSearchParamsFromIsomorphicRequest=e=>e?.url?new URL(e.url)?.searchParams:void 0,qi=(e=>(e.SignedIn="signed-in",e.SignedOut="signed-out",e.Interstitial="interstitial",e.Unknown="unknown",e))(qi||{});async function signedIn(e,t){const{apiKey:r,secretKey:n,apiUrl:s,apiVersion:i,cookieToken:o,frontendApi:a,proxyUrl:c,publishableKey:l,domain:u,isSatellite:d,headerToken:f,loadSession:p,loadUser:h,loadOrganization:m,signInUrl:y,signUpUrl:g,afterSignInUrl:b,afterSignUpUrl:_,token:w}=e,{sid:v,org_id:S,sub:I}=t,{sessions:k,users:T,organizations:O}=createBackendApiClient({apiKey:r,secretKey:n,apiUrl:s,apiVersion:i}),[x,C,P]=await Promise.all([p?k.getSession(v):Promise.resolve(void 0),h?T.getUser(I):Promise.resolve(void 0),m&&S?O.getOrganization({organizationId:S}):Promise.resolve(void 0)]),A=signedInAuthObject(t,{secretKey:n,apiKey:r,apiUrl:s,apiVersion:i,token:o||f||"",session:x,user:C,organization:P},{...e,status:"signed-in"});return{status:"signed-in",reason:null,message:null,frontendApi:a,proxyUrl:c,publishableKey:l,domain:u,isSatellite:d,signInUrl:y,signUpUrl:g,afterSignInUrl:b,afterSignUpUrl:_,isSignedIn:!0,isInterstitial:!1,isUnknown:!1,toAuth:()=>A,token:w}}function signedOut(e,t,r=""){const{frontendApi:n,publishableKey:s,proxyUrl:i,isSatellite:o,domain:a,signInUrl:c,signUpUrl:l,afterSignInUrl:u,afterSignUpUrl:d}=e;return{status:"signed-out",reason:t,message:r,frontendApi:n,proxyUrl:i,publishableKey:s,isSatellite:o,domain:a,signInUrl:c,signUpUrl:l,afterSignInUrl:u,afterSignUpUrl:d,isSignedIn:!1,isInterstitial:!1,isUnknown:!1,toAuth:()=>signedOutAuthObject({...e,status:"signed-out",reason:t,message:r}),token:null}}function interstitial(e,t,r=""){const{frontendApi:n,publishableKey:s,proxyUrl:i,isSatellite:o,domain:a,signInUrl:c,signUpUrl:l,afterSignInUrl:u,afterSignUpUrl:d}=e;return{status:"interstitial",reason:t,message:r,frontendApi:n,publishableKey:s,isSatellite:o,domain:a,proxyUrl:i,signInUrl:c,signUpUrl:l,afterSignInUrl:u,afterSignUpUrl:d,isSignedIn:!1,isInterstitial:!0,isUnknown:!1,toAuth:()=>null,token:null}}function checkCrossOrigin({originURL:e,host:t,forwardedHost:r,forwardedProto:n}){const s=buildOrigin({forwardedProto:n,forwardedHost:r,protocol:e.protocol,host:t});return s&&new URL(s).origin!==e.origin}var getErrorObjectByCode=(e,t)=>e?e.find((e=>e.code===t)):null,$i=Br,Mi={parse:(e,t)=>function(e,t,r={}){if(!t.codes){t.codes={};for(let e=0;e<t.chars.length;++e)t.codes[t.chars[e]]=e}if(!r.loose&&e.length*t.bits&7)throw new SyntaxError("Invalid padding");let n=e.length;for(;"="===e[n-1];)if(--n,!(r.loose||(e.length-n)*t.bits&7))throw new SyntaxError("Invalid padding");const s=new(r.out??Uint8Array)(n*t.bits/8|0);let i=0,o=0,a=0;for(let r=0;r<n;++r){const n=t.codes[e[r]];if(void 0===n)throw new SyntaxError("Invalid character "+e[r]);o=o<<t.bits|n,i+=t.bits,i>=8&&(i-=8,s[a++]=255&o>>i)}if(i>=t.bits||255&o<<8-i)throw new SyntaxError("Unexpected end of data");return s}(e,Bi,t),stringify:(e,t)=>function(e,t,r={}){const{pad:n=!0}=r,s=(1<<t.bits)-1;let i="",o=0,a=0;for(let r=0;r<e.length;++r)for(a=a<<8|255&e[r],o+=8;o>t.bits;)o-=t.bits,i+=t.chars[s&a>>o];o&&(i+=t.chars[s&a<<t.bits-o]);if(n)for(;i.length*t.bits&7;)i+="=";return i}(e,Bi,t)},Bi={chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bits:6};var Li={RS256:"SHA-256",RS384:"SHA-384",RS512:"SHA-512"},Ui="RSASSA-PKCS1-v1_5",Di={RS256:Ui,RS384:Ui,RS512:Ui},Zi=Object.keys(Li);function getCryptoAlgorithm(e){const t=Li[e],r=Di[e];if(!t||!r)throw new Error(`Unsupported algorithm ${e}, expected one of ${Zi.join(",")}.`);return{hash:{name:Li[e]},name:Di[e]}}var assertAudienceClaim=(e,t)=>{const r=[t].flat().filter((e=>!!e)),n=[e].flat().filter((e=>!!e));var s;if(r.length>0&&n.length>0)if("string"==typeof e){if(!r.includes(e))throw new Ri({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Invalid JWT audience claim (aud) ${JSON.stringify(e)}. Is not included in "${JSON.stringify(r)}".`})}else if(s=e,Array.isArray(s)&&s.length>0&&s.every((e=>"string"==typeof e))&&!e.some((e=>r.includes(e))))throw new Ri({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Invalid JWT audience claim array (aud) ${JSON.stringify(e)}. Is not included in "${JSON.stringify(r)}".`})},assertHeaderType=e=>{if(void 0!==e&&"JWT"!==e)throw new Ri({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-invalid",message:`Invalid JWT type ${JSON.stringify(e)}. Expected "JWT".`})},assertHeaderAlgorithm=e=>{if(!Zi.includes(e))throw new Ri({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-invalid-algorithm",message:`Invalid JWT algorithm ${JSON.stringify(e)}. Supported: ${Zi}.`})},assertSubClaim=e=>{if("string"!=typeof e)throw new Ri({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Subject claim (sub) is required and must be a string. Received ${JSON.stringify(e)}.`})},assertAuthorizedPartiesClaim=(e,t)=>{if(e&&t&&0!==t.length&&!t.includes(e))throw new Ri({reason:"token-invalid-authorized-parties",message:`Invalid JWT Authorized party claim (azp) ${JSON.stringify(e)}. Expected "${t}".`})},assertIssuerClaim=(e,t)=>{if("function"==typeof t&&!t(e))throw new Ri({reason:"token-invalid-issuer",message:"Failed JWT issuer resolver. Make sure that the resolver returns a truthy value."});if("string"==typeof t&&e&&e!==t)throw new Ri({reason:"token-invalid-issuer",message:`Invalid JWT issuer claim (iss) ${JSON.stringify(e)}. Expected "${t}".`})},assertExpirationClaim=(e,t)=>{if("number"!=typeof e)throw new Ri({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Invalid JWT expiry date claim (exp) ${JSON.stringify(e)}. Expected number.`});const r=new Date(Date.now()),n=new Date(0);n.setUTCSeconds(e);if(n.getTime()<=r.getTime()-t)throw new Ri({reason:"token-expired",message:`JWT is expired. Expiry date: ${n.toUTCString()}, Current date: ${r.toUTCString()}.`})},assertActivationClaim=(e,t)=>{if(void 0===e)return;if("number"!=typeof e)throw new Ri({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Invalid JWT not before date claim (nbf) ${JSON.stringify(e)}. Expected number.`});const r=new Date(Date.now()),n=new Date(0);n.setUTCSeconds(e);if(n.getTime()>r.getTime()+t)throw new Ri({reason:"token-not-active-yet",message:`JWT cannot be used prior to not before date claim (nbf). Not before date: ${n.toUTCString()}; Current date: ${r.toUTCString()};`})},assertIssuedAtClaim=(e,t)=>{if(void 0===e)return;if("number"!=typeof e)throw new Ri({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Invalid JWT issued at date claim (iat) ${JSON.stringify(e)}. Expected number.`});const r=new Date(Date.now()),n=new Date(0);n.setUTCSeconds(e);if(n.getTime()>r.getTime()+t)throw new Ri({reason:"token-not-active-yet",message:`JWT issued at date claim (iat) is in the future. Issued at date: ${n.toUTCString()}; Current date: ${r.toUTCString()};`})},Ki=Vn;function importKey(e,t,r){if("object"==typeof e)return Ls.crypto.subtle.importKey("jwk",e,t,!1,[r]);const n=function(e){const t=e.replace(/-----BEGIN.*?-----/g,"").replace(/-----END.*?-----/g,"").replace(/\s/g,""),r=(0,Ki.isomorphicAtob)(t),n=new ArrayBuffer(r.length),s=new Uint8Array(n);for(let e=0,t=r.length;e<t;e++)s[e]=r.charCodeAt(e);return s}(e),s="sign"===r?"pkcs8":"spki";return Ls.crypto.subtle.importKey(s,n,t,!1,[r])}var Fi=5e3;async function hasValidSignature(e,t){const{header:r,signature:n,raw:s}=e,i=(new TextEncoder).encode([s.header,s.payload].join(".")),o=getCryptoAlgorithm(r.alg),a=await importKey(t,o,"verify");return Ls.crypto.subtle.verify(o.name,a,n,i)}function decodeJwt(e){const t=(e||"").toString().split(".");if(3!==t.length)throw new Ri({reason:"token-invalid",message:"Invalid JWT form. A JWT consists of three parts separated by dots."});const[r,n,s]=t,i=new TextDecoder,o=JSON.parse(i.decode(Mi.parse(r,{loose:!0}))),a=JSON.parse(i.decode(Mi.parse(n,{loose:!0}))),c=Mi.parse(s,{loose:!0});return(0,$i.deprecatedObjectProperty)(a,"orgs",'Add orgs to your session token using the "user.organizations" shortcode in JWT Templates instead.',"decodeJwt:orgs"),{header:o,payload:a,signature:c,raw:{header:r,payload:n,signature:s,text:e}}}async function verifyJwt(e,{audience:t,authorizedParties:r,clockSkewInSeconds:n,clockSkewInMs:s,issuer:i,key:o}){n&&(0,vs.deprecated)("clockSkewInSeconds","Use `clockSkewInMs` instead.");const a=s||n||Fi,c=decodeJwt(e),{header:l,payload:u}=c,{typ:d,alg:f}=l;assertHeaderType(d),assertHeaderAlgorithm(f);const{azp:p,sub:h,aud:m,iss:y,iat:g,exp:b,nbf:_}=u;let w;assertSubClaim(h),assertAudienceClaim([m],[t]),assertAuthorizedPartiesClaim(p,r),assertIssuerClaim(y,i),assertExpirationClaim(b,a),assertActivationClaim(_,a),assertIssuedAtClaim(g,a);try{w=await hasValidSignature(c,o)}catch(e){throw new Ri({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Error verifying JWT signature. ${e}`})}if(!w)throw new Ri({reason:"token-invalid-signature",message:"JWT signature is invalid."});return u}function encodeJwtData(e){const t=JSON.stringify(e),r=(new TextEncoder).encode(t);return Mi.stringify(r,{pad:!1})}async function signJwt(e,t,r){if(!r.algorithm)throw new Error("No algorithm specified");const n=new TextEncoder,s=getCryptoAlgorithm(r.algorithm);if(!s)throw new Error(`Unsupported algorithm ${r.algorithm}`);const i=await importKey(t,s,"sign"),o=r.header||{typ:"JWT"};o.alg=r.algorithm,e.iat=Math.floor(Date.now()/1e3);const a=`${encodeJwtData(o)}.${encodeJwtData(e)}`,c=await Ls.crypto.subtle.sign(s,i,n.encode(a));return`${a}.${Mi.stringify(new Uint8Array(c),{pad:!1})}`}var zi={},Hi=0;function getFromCache(e){return zi[e]}function setInCache(e,t=36e5){zi[e.kid]=e,Hi=Date.now(),t>=0&&setTimeout((()=>{e?delete zi[e.kid]:zi={}}),t)}var Wi="local",Vi="-----BEGIN PUBLIC KEY-----",Qi="-----END PUBLIC KEY-----",Ji="MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA",Gi="IDAQAB";async function loadClerkJWKFromRemote({apiKey:e,secretKey:t,apiUrl:r=ni,apiVersion:n=si,issuer:s,kid:i,jwksCacheTtlInMs:o=36e5,skipJwksCache:a}){const c=!getFromCache(i)&&Date.now()-Hi>=1e3*oi;if(a||c){let i;const a=t||e;if(a)i=()=>async function(e,t,r){if(!t)throw new Ri({action:"Set the CLERK_SECRET_KEY or CLERK_API_KEY environment variable.",message:"Missing Clerk Secret Key or API Key. Go to https://dashboard.clerk.com and get your key for your instance.",reason:"jwk-remote-failed-to-load"});const n=new URL(e);n.pathname=joinPaths(n.pathname,r,"/jwks");const s=await Ls.fetch(n.href,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!s.ok){const e=await s.json(),t=getErrorObjectByCode(e?.errors,"clerk_key_invalid");if(t){const e="secret-key-invalid";throw new Ri({action:"Contact support@clerk.com",message:t.message,reason:e})}throw new Ri({action:"Contact support@clerk.com",message:`Error loading Clerk JWKS from ${n.href} with code=${s.status}`,reason:"jwk-remote-failed-to-load"})}return s.json()}(r,a,n);else{if(!s)throw new Ri({action:"Contact support@clerk.com",message:"Failed to load JWKS from Clerk Backend or Frontend API.",reason:"jwk-remote-failed-to-load"});i=()=>async function(e){const t=new URL(e);t.pathname=joinPaths(t.pathname,".well-known/jwks.json");const r=await Ls.fetch(t.href);if(!r.ok)throw new Ri({action:"Contact support@clerk.com",message:`Error loading Clerk JWKS from ${t.href} with code=${r.status}`,reason:"jwk-remote-failed-to-load"});return r.json()}(s)}const{keys:c}=await(0,_s.callWithRetry)(i);if(!c||!c.length)throw new Ri({action:"Contact support@clerk.com",message:"The JWKS endpoint did not contain any signing keys. Contact support@clerk.com.",reason:"jwk-remote-failed-to-load"});c.forEach((e=>setInCache(e,o)))}const l=getFromCache(i);if(!l){const e=Object.values(zi).map((e=>e.kid)).join(", ");throw new Ri({action:"Contact support@clerk.com",message:`Unable to find a signing key in JWKS that matches the kid='${i}' of the provided session token. Please make sure that the __session cookie or the HTTP authorization header contain a Clerk-generated session JWT.${e?` The following kid are available: ${e}`:""}`,reason:"jwk-remote-missing"})}return l}async function verifyToken(e,t){const{apiKey:r,secretKey:n,apiUrl:s,apiVersion:i,audience:o,authorizedParties:a,clockSkewInSeconds:c,clockSkewInMs:l,issuer:u,jwksCacheTtlInMs:d,jwtKey:f,skipJwksCache:p}=t;t.apiKey&&(0,vs.deprecated)("apiKey","Use `secretKey` instead.");const{header:h}=decodeJwt(e),{kid:m}=h;let y;if(f)y=function(e){if(!getFromCache(Wi)){if(!e)throw new Ri({action:"Set the CLERK_JWT_KEY environment variable.",message:"Missing local JWK.",reason:"jwk-local-missing"});setInCache({kid:"local",kty:"RSA",alg:"RS256",n:e.replace(/(\r\n|\n|\r)/gm,"").replace(Vi,"").replace(Qi,"").replace(Ji,"").replace(Gi,"").replace(/\+/g,"-").replace(/\//g,"_"),e:"AQAB"},-1)}return getFromCache(Wi)}(f);else if("string"==typeof u)y=await loadClerkJWKFromRemote({issuer:u,kid:m,jwksCacheTtlInMs:d,skipJwksCache:p});else{if(!r&&!n)throw new Ri({action:"Set the CLERK_JWT_KEY environment variable.",message:"Failed to resolve JWK during verification.",reason:"jwk-failed-to-resolve"});y=await loadClerkJWKFromRemote({apiKey:r,secretKey:n,apiUrl:s,apiVersion:i,kid:m,jwksCacheTtlInMs:d,skipJwksCache:p})}return await verifyJwt(e,{audience:o,authorizedParties:a,clockSkewInSeconds:c,clockSkewInMs:l,key:y,issuer:u})}var Yi=/^Mozilla\/|(Amazon CloudFront)/,isBrowser=e=>Yi.test(e||""),nonBrowserRequestInDevRule=e=>{const{apiKey:t,secretKey:r,userAgent:n}=e,s=r||t||"";if((0,ws.isDevelopmentFromApiKey)(s)&&!isBrowser(n))return signedOut(e,"header-missing-non-browser")},crossOriginRequestWithoutHeader=e=>{const{origin:t,host:r,forwardedHost:n,forwardedProto:s}=e;if(t&&checkCrossOrigin({originURL:new URL(t),host:r,forwardedHost:n,forwardedProto:s}))return signedOut(e,"header-missing-cors")},isPrimaryInDevAndRedirectsToSatellite=e=>{const{apiKey:t,secretKey:r,isSatellite:n,searchParams:s}=e,i=r||t||"";if((0,ws.isDevelopmentFromApiKey)(i)&&!n&&(o=s,o?.get("__clerk_satellite_url")))return interstitial(e,"primary-responds-to-syncing");var o},potentialFirstLoadInDevWhenUATMissing=e=>{const{apiKey:t,secretKey:r,clientUat:n}=e,s=r||t||"";if((0,ws.isDevelopmentFromApiKey)(s)&&!n)return interstitial(e,"uat-missing")},potentialRequestAfterSignInOrOutFromClerkHostedUiInDev=e=>{const{apiKey:t,secretKey:r,referrer:n,host:s,forwardedHost:i,forwardedProto:o}=e,a=n&&checkCrossOrigin({originURL:new URL(n),host:s,forwardedHost:i,forwardedProto:o}),c=r||t||"";if((0,ws.isDevelopmentFromApiKey)(c)&&a)return interstitial(e,"cross-origin-referrer")},potentialFirstRequestOnProductionEnvironment=e=>{const{apiKey:t,secretKey:r,clientUat:n,cookieToken:s}=e,i=r||t||"";if((0,ws.isProductionFromApiKey)(i)&&!n&&!s)return signedOut(e,"cookie-and-uat-missing")},isNormalSignedOutState=e=>{const{clientUat:t}=e;if("0"===t)return signedOut(e,"standard-signed-out")},hasPositiveClientUatButCookieIsMissing=e=>{const{clientUat:t,cookieToken:r}=e;if(t&&Number.parseInt(t)>0&&!r)return interstitial(e,"cookie-missing")},hasValidHeaderToken=async e=>{const{headerToken:t}=e,r=await verifyRequestState(e,t);return await signedIn({...e,token:t},r)},hasValidCookieToken=async e=>{const{cookieToken:t,clientUat:r}=e,n=await verifyRequestState(e,t),s=await signedIn({...e,token:t},n),i=s.toAuth().sessionClaims.iat<Number.parseInt(r);return!r||i?interstitial(e,"cookie-outdated"):s};async function runInterstitialRules(e,t){for(const r of t){const t=await r(e);if(t)return t}return signedOut(e,"unexpected-error")}async function verifyRequestState(e,t){const{isSatellite:r,proxyUrl:n}=e;let s;return s=r?null:n||(e=>e.startsWith("https://clerk.")||e.includes(".clerk.accounts")),verifyToken(t,{...e,issuer:s})}var isSatelliteAndNeedsSyncing=e=>{const{clientUat:t,isSatellite:r,searchParams:n,userAgent:s}=e,i=!t||"0"===t;return r&&i&&!isBrowser(s)?signedOut(e,"satellite-needs-syncing"):r&&i&&(o=n,"true"!==o?.get("__clerk_synced"))?interstitial(e,"satellite-needs-syncing"):void 0;var o};async function authenticateRequest$1(e){const{cookies:t,headers:r,searchParams:n}=buildRequest2(e?.request);function handleError(t,r){if(t instanceof Ri){t.tokenCarrier=r;return["token-expired","token-not-active-yet"].includes(t.reason)?"header"===r?function(e,t,r=""){const{frontendApi:n,publishableKey:s,isSatellite:i,domain:o,signInUrl:a,signUpUrl:c,afterSignInUrl:l,afterSignUpUrl:u}=e;return{status:"unknown",reason:t,message:r,frontendApi:n,publishableKey:s,isSatellite:i,domain:o,signInUrl:a,signUpUrl:c,afterSignInUrl:l,afterSignUpUrl:u,isSignedIn:!1,isInterstitial:!1,isUnknown:!0,toAuth:()=>null,token:null}}(e,t.reason,t.getFullMessage()):interstitial(e,t.reason,t.getFullMessage()):signedOut(e,t.reason,t.getFullMessage())}return signedOut(e,"unexpected-error",t.message)}return e.frontendApi&&(0,vs.deprecated)("frontendApi","Use `publishableKey` instead."),e.apiKey&&(0,vs.deprecated)("apiKey","Use `secretKey` instead."),assertValidSecretKey((e={...e,...loadOptionsFromHeaders(e,r),frontendApi:(0,ws.parsePublishableKey)(e.publishableKey)?.frontendApi||e.frontendApi,apiUrl:e.apiUrl||ni,apiVersion:e.apiVersion||si,cookieToken:e.cookieToken||t?.(ci.Cookies.Session),clientUat:e.clientUat||t?.(ci.Cookies.ClientUat),searchParams:e.searchParams||n||void 0}).secretKey||e.apiKey),e.isSatellite&&(function(e,t){if(!e&&(0,ws.isDevelopmentFromApiKey)(t))throw new Error("Missing signInUrl. Pass a signInUrl for dev instances if an app is satellite")}(e.signInUrl,e.secretKey||e.apiKey),e.signInUrl&&e.origin&&function(e,t){let r;try{r=new URL(e)}catch{throw new Error("The signInUrl needs to have a absolute url format.")}if(r.origin===t)throw new Error("The signInUrl needs to be on a different origin than your satellite application.")}(e.signInUrl,e.origin),function(e){if(!e)throw new Error("Missing domain and proxyUrl. A satellite application needs to specify a domain or a proxyUrl")}(e.proxyUrl||e.domain)),e.headerToken?async function(){try{return await runInterstitialRules(e,[hasValidHeaderToken])}catch(e){return handleError(e,"header")}}():async function(){try{return await runInterstitialRules(e,[crossOriginRequestWithoutHeader,nonBrowserRequestInDevRule,isSatelliteAndNeedsSyncing,isPrimaryInDevAndRedirectsToSatellite,potentialFirstRequestOnProductionEnvironment,potentialFirstLoadInDevWhenUATMissing,potentialRequestAfterSignInOrOutFromClerkHostedUiInDev,hasPositiveClientUatButCookieIsMissing,isNormalSignedOutState,hasValidCookieToken])}catch(e){return handleError(e,"cookie")}}()}var debugRequestState=e=>{const{frontendApi:t,isSignedIn:r,proxyUrl:n,isInterstitial:s,reason:i,message:o,publishableKey:a,isSatellite:c,domain:l}=e;return{frontendApi:t,isSignedIn:r,proxyUrl:n,isInterstitial:s,reason:i,message:o,publishableKey:a,isSatellite:c,domain:l}},loadOptionsFromHeaders=(e,t)=>{return t?{headerToken:(r=e.headerToken||t(ci.Headers.Authorization),r?.replace("Bearer ","")),origin:e.origin||t(ci.Headers.Origin),host:e.host||t(ci.Headers.Host),forwardedHost:e.forwardedHost||t(ci.Headers.ForwardedHost),forwardedPort:e.forwardedPort||t(ci.Headers.ForwardedPort),forwardedProto:e.forwardedProto||t(ci.Headers.CloudFrontForwardedProto)||t(ci.Headers.ForwardedProto),referrer:e.referrer||t(ci.Headers.Referrer),userAgent:e.userAgent||t(ci.Headers.UserAgent)}:{};var r};function createAuthenticateRequest(e){const{apiClient:t}=e,{apiKey:r="",secretKey:n="",jwtKey:s="",apiUrl:i=ni,apiVersion:o=si,frontendApi:a="",proxyUrl:c="",publishableKey:l="",isSatellite:u=!1,domain:d="",audience:f="",userAgent:p}=e.options;return{authenticateRequest:({apiKey:e,secretKey:t,audience:p,frontendApi:h,proxyUrl:m,publishableKey:y,jwtKey:g,isSatellite:b,domain:_,searchParams:w,...v})=>authenticateRequest$1({...v,apiKey:e||r,secretKey:t||n,audience:p||f,apiUrl:i,apiVersion:o,frontendApi:h||a,proxyUrl:m||c,publishableKey:y||l,isSatellite:b||u,domain:_||d,jwtKey:g||s,searchParams:w}),localInterstitial:({frontendApi:e,publishableKey:t,proxyUrl:r,isSatellite:n,domain:s,...i})=>loadInterstitialFromLocal({...i,frontendApi:e||a,proxyUrl:r||c,publishableKey:t||l,isSatellite:n||u,domain:s||d}),remotePublicInterstitial:({frontendApi:e,publishableKey:t,proxyUrl:r,isSatellite:n,domain:s,userAgent:o,...f})=>async function(e){e.frontendApi&&(0,vs.deprecated)("frontendApi","Use `publishableKey` instead."),e.pkgVersion&&(0,vs.deprecated)("pkgVersion","Use `clerkJSVersion` instead."),e.frontendApi=(0,ws.parsePublishableKey)(e.publishableKey)?.frontendApi||e.frontendApi||"";const t=buildPublicInterstitialUrl(e),r=await(0,_s.callWithRetry)((()=>Ls.fetch(buildPublicInterstitialUrl(e),{method:"GET",headers:{"Clerk-Backend-SDK":e.userAgent||ii}})));if(!r.ok)throw new Ri({action:"Contact support@clerk.com",message:`Error loading Clerk Interstitial from ${t} with code=${r.status}`,reason:"interstitial-remote-failed-to-load"});return r.text()}({...f,apiUrl:i,frontendApi:e||a,publishableKey:t||l,proxyUrl:r||c,isSatellite:n||u,domain:s||d,userAgent:o||p}),remotePrivateInterstitial:()=>t.interstitial.getInterstitial(),remotePublicInterstitialUrl:buildPublicInterstitialUrl,debugRequestState:debugRequestState}}var buildUrl=(e,t)=>{let r;if(e.startsWith("http"))r=new URL(e);else{if(!t||!t.startsWith("http"))throw new Error("destination url or return back url should be an absolute path url!");const n=new URL(t);r=new URL(e,n.origin)}return t&&r.searchParams.set("redirect_url",t),r.toString()};function redirect({redirectAdapter:e,signUpUrl:t,signInUrl:r,frontendApi:n,publishableKey:s}){n?(0,vs.deprecated)("frontendApi","Use `publishableKey` instead."):n=(0,ws.parsePublishableKey)(s)?.frontendApi;const i=function(e){if(!e)return"";const t=e.replace(/(clerk\.accountsstage\.)/,"accountsstage.").replace(/(clerk\.accounts\.|clerk\.)/,"accounts.");return`https://${t}`}(n);return{redirectToSignUp:({returnBackUrl:r}={})=>{t||i||Is.throwMissingPublishableKeyError();return e(buildUrl(t||`${i}/sign-up`,r))},redirectToSignIn:({returnBackUrl:t}={})=>{r||i||Is.throwMissingPublishableKeyError();return e(buildUrl(r||`${i}/sign-in`,t))}}}function Clerk$1(e){const t={...e},r=createBackendApiClient(t),n=createAuthenticateRequest({options:t,apiClient:r}),s={...r,...n,__unstable_options:t};return(0,ss.deprecatedObjectProperty)(s,"__unstable_options","Use `createClerkClient({...})` to create a new clerk instance instead."),s}function handleValueOrFn(e,t,r){return"function"==typeof e?e(t):void 0!==e?e:void 0!==r?r:void 0}function isHttpOrHttps(e){return/^http(s)?:\/\//.test(e||"")}function isProxyUrlRelative(e){return e.startsWith("/")}var loadClientEnv=()=>(process.env.CLERK_FRONTEND_API&&deprecated$1("CLERK_FRONTEND_API","Use `CLERK_PUBLISHABLE_KEY` instead."),{publishableKey:process.env.CLERK_PUBLISHABLE_KEY||"",frontendApi:process.env.CLERK_FRONTEND_API||"",clerkJSUrl:process.env.CLERK_JS||"",clerkJSVersion:process.env.CLERK_JS_VERSION||""}),loadApiEnv=()=>(process.env.CLERK_API_KEY&&deprecated$1("CLERK_API_KEY","Use `CLERK_SECRET_KEY` instead."),{secretKey:process.env.CLERK_SECRET_KEY||process.env.CLERK_API_KEY||"",apiKey:process.env.CLERK_API_KEY||"",apiUrl:process.env.CLERK_API_URL||"https://api.clerk.dev",apiVersion:process.env.CLERK_API_VERSION||"v1",domain:process.env.CLERK_DOMAIN||"",proxyUrl:process.env.CLERK_PROXY_URL||"",signInUrl:process.env.CLERK_SIGN_IN_URL||"",isSatellite:"true"===process.env.CLERK_IS_SATELLITE,jwtKey:process.env.CLERK_JWT_KEY||""});async function loadInterstitial({clerkClient:e,requestState:t}){const{clerkJSVersion:r,clerkJSUrl:n}=loadClientEnv();return t.publishableKey||t.frontendApi?e.localInterstitial({frontendApi:t.publishableKey?"":t.frontendApi,publishableKey:t.publishableKey,proxyUrl:t.proxyUrl,signInUrl:t.signInUrl,isSatellite:t.isSatellite,domain:t.domain,clerkJSVersion:r,clerkJSUrl:n}):await e.remotePrivateInterstitial()}var authenticateRequest=e=>{const{clerkClient:t,apiKey:r,secretKey:n,frontendApi:s,publishableKey:i,req:o,options:a}=e,{jwtKey:c,authorizedParties:l,audience:u}=a||{},d={...loadApiEnv(),...loadClientEnv()},f=ns.createIsomorphicRequest(((e,t)=>{const r=Object.keys(o.headers).reduce(((e,t)=>Object.assign(e,{[t]:o?.headers[t]})),{}),n=o.connection?.encrypted?"https":"http";return new e(new URL(o.url||"",`${n}://clerk-dummy`),{method:o.method,headers:new t(r)})})),p=ns.buildRequestUrl(f),h=handleValueOrFn(a?.isSatellite,p,d.isSatellite),m=handleValueOrFn(a?.domain,p)||d.domain,y=a?.signInUrl||d.signInUrl,g=absoluteProxyUrl(handleValueOrFn(a?.proxyUrl,p,d.proxyUrl),p.toString());if(h&&!g&&!m)throw new Error(Xi);if(h&&!isHttpOrHttps(y)&&isDevelopmentFromApiKey(n||r||""))throw new Error(eo);return t.authenticateRequest({audience:u,apiKey:r,secretKey:n,frontendApi:s,publishableKey:i,jwtKey:c,authorizedParties:l,proxyUrl:g,isSatellite:h,domain:m,signInUrl:y,request:f})},handleUnknownCase=(e,t)=>{t.isUnknown&&(e.writeHead(401,{"Content-Type":"text/html"}),e.end())},handleInterstitialCase=(e,t,r)=>{t.isInterstitial&&(e.writeHead(401,{"Content-Type":"text/html"}),e.end(r))},decorateResponseWithObservabilityHeaders=(e,t)=>{t.message&&e.setHeader(ns.constants.Headers.AuthMessage,encodeURIComponent(t.message)),t.reason&&e.setHeader(ns.constants.Headers.AuthReason,encodeURIComponent(t.reason)),t.status&&e.setHeader(ns.constants.Headers.AuthStatus,encodeURIComponent(t.status))},isDevelopmentFromApiKey=e=>e.startsWith("test_")||e.startsWith("sk_test_"),absoluteProxyUrl=(e,t)=>{return e&&(!(r=e)||isHttpOrHttps(r)||isProxyUrlRelative(r))&&isProxyUrlRelative(e)?new URL(e,t).toString():e;var r},Xi="Missing domain and proxyUrl. A satellite application needs to specify a domain or a proxyUrl",eo="\nInvalid signInUrl. A satellite application requires a signInUrl for development instances.\nCheck if signInUrl is missing from your configuration or if it is not an absolute URL.";function Clerk(e){const t=ns.Clerk(e),r=(e=>{const{clerkClient:t,frontendApi:r="",apiKey:n="",secretKey:s="",publishableKey:i=""}=e;return(e={})=>async(o,a,c)=>{const l=await authenticateRequest({clerkClient:t,apiKey:n,secretKey:s,frontendApi:r,publishableKey:i,req:o,options:e});if(decorateResponseWithObservabilityHeaders(a,l),l.isUnknown)return handleUnknownCase(a,l);if(l.isInterstitial){const e=await loadInterstitial({clerkClient:t,requestState:l});return handleInterstitialCase(a,l,e)}o.auth={...l.toAuth(),claims:l.toAuth().sessionClaims},c()}})({...e,clerkClient:t}),n=(e=>{const{clerkClient:t,frontendApi:r="",apiKey:n="",secretKey:s="",publishableKey:i=""}=e;return(e={})=>async(o,a,c)=>{const l=await authenticateRequest({clerkClient:t,apiKey:n,secretKey:s,frontendApi:r,publishableKey:i,req:o,options:e});if(decorateResponseWithObservabilityHeaders(a,l),l.isUnknown)return handleUnknownCase(a,l);if(l.isInterstitial){const e=await loadInterstitial({clerkClient:t,requestState:l});return handleInterstitialCase(a,l,e)}if(l.isSignedIn)return o.auth={...l.toAuth(),claims:l.toAuth().sessionClaims},void c();c(new Error("Unauthenticated"))}})({...e,clerkClient:t});return Object.assign(t,{expressWithAuth:r,expressRequireAuth:n,verifyToken:(t,r)=>ns.verifyToken(t,{issuer:e=>e.startsWith("https://clerk.")||e.includes(".clerk.accounts"),...e,...r}),...createBasePropForRedwoodCompatibility()})}var createBasePropForRedwoodCompatibility=()=>({base:{verifySessionToken:e=>{const{jwtKey:t}=loadApiEnv(),{payload:r}=ns.decodeJwt(e);return ns.verifyToken(e,{issuer:r.iss,jwtKey:t})}}}),to={},ro=new Proxy(to,{get(e,t){if(!!to.authenticateRequest)return to[t];const r={...loadApiEnv(),...loadClientEnv()};return r.secretKey?(to=Clerk({...r,userAgent:"@clerk/clerk-sdk-node"}))[t]:Clerk({...r,userAgent:"@clerk/clerk-sdk-node"})[t]},set:()=>!1});const noop=()=>{};function createInnerProxy(e,t){return new Proxy(noop,{get(r,n){if("string"==typeof n&&"then"!==n)return createInnerProxy(e,[...t,n])},apply(r,n,s){const i="apply"===t[t.length-1];return e({args:i?s.length>=2?s[1]:[]:s,path:i?t.slice(0,-1):t})}})}const createRecursiveProxy=e=>createInnerProxy(e,[]);function mergeWithoutOverrides(e,...t){const r=Object.assign(Object.create(null),e);for(const e of t)for(const t in e){if(t in r&&r[t]!==e[t])throw new Error(`Duplicate key ${t}`);r[t]=e[t]}return r}function isObject(e){return!!e&&!Array.isArray(e)&&"object"==typeof e}function omitPrototype(e){return Object.assign(Object.create(null),e)}const no={PARSE_ERROR:-32700,BAD_REQUEST:-32600,INTERNAL_SERVER_ERROR:-32603,NOT_IMPLEMENTED:-32603,UNAUTHORIZED:-32001,FORBIDDEN:-32003,NOT_FOUND:-32004,METHOD_NOT_SUPPORTED:-32005,TIMEOUT:-32008,CONFLICT:-32009,PRECONDITION_FAILED:-32012,PAYLOAD_TOO_LARGE:-32013,UNPROCESSABLE_CONTENT:-32022,TOO_MANY_REQUESTS:-32029,CLIENT_CLOSED_REQUEST:-32099},so=function(e){const t=Object.create(null);for(const r in e){t[e[r]]=r}return t}(no),io={PARSE_ERROR:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,FORBIDDEN:403,METHOD_NOT_SUPPORTED:405,TIMEOUT:408,CONFLICT:409,PRECONDITION_FAILED:412,PAYLOAD_TOO_LARGE:413,UNPROCESSABLE_CONTENT:422,TOO_MANY_REQUESTS:429,CLIENT_CLOSED_REQUEST:499,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501};function getStatusCodeFromKey(e){return io[e]??500}function getHTTPStatusCodeFromError(e){return getStatusCodeFromKey(e.code)}function getErrorShape(e){const{path:t,error:r,config:n}=e,{code:s}=e.error,i={message:r.message,code:no[s],data:{code:s,httpStatus:getHTTPStatusCodeFromError(r)}};return n.isDev&&"string"==typeof e.error.stack&&(i.data.stack=e.error.stack),"string"==typeof t&&(i.data.path=t),n.errorFormatter({...e,shape:i})}class UnknownCauseError extends Error{}function getTRPCErrorFromUnknown(e){if(e instanceof TRPCError)return e;if(e instanceof Error&&"TRPCError"===e.name)return e;const t=new TRPCError({code:"INTERNAL_SERVER_ERROR",cause:e});return e instanceof Error&&e.stack&&(t.stack=e.stack),t}class TRPCError extends Error{constructor(e){const t=function(e){if(e instanceof Error)return e;const t=typeof e;if("undefined"!==t&&"function"!==t&&null!==e){if("object"!==t)return new Error(String(e));if(isObject(e)){const t=new UnknownCauseError;for(const r in e)t[r]=e[r];return t}}}(e.cause);super(e.message??t?.message??e.code,{cause:t}),this.code=e.code,this.name="TRPCError",this.cause||(this.cause=t)}}const defaultFormatter=({shape:e})=>e;const oo={input:{serialize:e=>e,deserialize:e=>e},output:{serialize:e=>e,deserialize:e=>e}};function transformTRPCResponseItem(e,t){return"error"in t?{...t,error:e.transformer.output.serialize(t.error)}:"data"in t.result?{...t,result:{...t.result,data:e.transformer.output.serialize(t.result.data)}}:t}function transformTRPCResponse(e,t){return Array.isArray(t)?t.map((t=>transformTRPCResponseItem(e,t))):transformTRPCResponseItem(e,t)}const ao={_ctx:null,_errorShape:null,_meta:null,queries:{},mutations:{},subscriptions:{},errorFormatter:defaultFormatter,transformer:oo},co=["then"];function createRouterFactory(e){return function(t){const r=new Set(Object.keys(t).filter((e=>co.includes(e))));if(r.size>0)throw new Error("Reserved words used in `router({})` call: "+Array.from(r).join(", "));const n=omitPrototype({}),s=function step(e,t=[]){const r=omitPrototype({});for(const[i,o]of Object.entries(e??{})){if((s=o)._def&&"router"in s._def){r[i]=step(o._def.record,[...t,i]);continue}if(!isProcedure(o)){r[i]=step(o,[...t,i]);continue}const e=[...t,i].join(".");if(n[e])throw new Error(`Duplicate key: ${e}`);n[e]=o,r[i]=o}var s;return r}(t),i={_config:e,router:!0,procedures:n,...ao,record:s};return{...s,_def:i,createCaller(e){const t=createRecursiveProxy((({path:t,args:r})=>{const n=t.join("."),s=i.procedures[n];return s({path:n,getRawInput:async()=>r[0],ctx:e,type:s._def.type})}));return t}}}}function isProcedure(e){return"function"==typeof e}function mergeRouters(...e){const t=mergeWithoutOverrides({},...e.map((e=>e._def.record))),r=createRouterFactory({errorFormatter:e.reduce(((e,t)=>{if(t._def._config.errorFormatter&&t._def._config.errorFormatter!==defaultFormatter){if(e!==defaultFormatter&&e!==t._def._config.errorFormatter)throw new Error("You seem to have several error formatters");return t._def._config.errorFormatter}return e}),defaultFormatter),transformer:e.reduce(((e,t)=>{if(t._def._config.transformer&&t._def._config.transformer!==oo){if(e!==oo&&e!==t._def._config.transformer)throw new Error("You seem to have several transformers");return t._def._config.transformer}return e}),oo),isDev:e.every((e=>e._def._config.isDev)),allowOutsideOfServer:e.every((e=>e._def._config.allowOutsideOfServer)),isServer:e.every((e=>e._def._config.isServer)),$types:e[0]?._def._config.$types})(t);return r}const lo="middlewareMarker";function createMiddlewareFactory(){function createMiddlewareInner(e){return{_middlewares:e,unstable_pipe(t){const r="_middlewares"in t?t._middlewares:[t];return createMiddlewareInner([...e,...r])}}}return function(e){return createMiddlewareInner([e])}}function createInputMiddleware(e){const inputMiddleware=async function(t){let r;const n=await t.getRawInput();try{r=await e(n)}catch(e){throw new TRPCError({code:"BAD_REQUEST",cause:e})}const s=isObject(t.input)&&isObject(r)?{...t.input,...r}:r;return t.next({input:s})};return inputMiddleware._type="input",inputMiddleware}function createOutputMiddleware(e){const outputMiddleware=async function({next:t}){const r=await t();if(!r.ok)return r;try{const t=await e(r.data);return{...r,data:t}}catch(e){throw new TRPCError({message:"Output validation failed",code:"INTERNAL_SERVER_ERROR",cause:e})}};return outputMiddleware._type="output",outputMiddleware}function getParseFn(e){const t=e;if("function"==typeof t)return t;if("function"==typeof t.parseAsync)return t.parseAsync.bind(t);if("function"==typeof t.parse)return t.parse.bind(t);if("function"==typeof t.validateSync)return t.validateSync.bind(t);if("function"==typeof t.create)return t.create.bind(t);if("function"==typeof t.assert)return e=>(t.assert(e),e);throw new Error("Could not find a validator fn")}function createNewBuilder(e,t){const{middlewares:r=[],inputs:n,meta:s,...i}=t;return createBuilder({...mergeWithoutOverrides(e,i),inputs:[...e.inputs,...n??[]],middlewares:[...e.middlewares,...r],meta:e.meta&&s?{...e.meta,...s}:s??e.meta})}function createBuilder(e={}){const t={procedure:!0,inputs:[],middlewares:[],...e};return{_def:t,input(e){const r=getParseFn(e);return createNewBuilder(t,{inputs:[e],middlewares:[createInputMiddleware(r)]})},output(e){const r=getParseFn(e);return createNewBuilder(t,{output:e,middlewares:[createOutputMiddleware(r)]})},meta:e=>createNewBuilder(t,{meta:e}),use(e){const r="_middlewares"in e?e._middlewares:[e];return createNewBuilder(t,{middlewares:r})},query:e=>createResolver({...t,type:"query"},e),mutation:e=>createResolver({...t,type:"mutation"},e),subscription:e=>createResolver({...t,type:"subscription"},e)}}function createResolver(e,t){return function(e){async function procedure(t){if(!t||!("getRawInput"in t))throw new Error(uo);async function callRecursive(r={index:0,ctx:t.ctx}){try{const n=e.middlewares[r.index];return await n({ctx:r.ctx,type:t.type,path:t.path,getRawInput:r.getRawInput??t.getRawInput,meta:e.meta,input:r.input,next(e){const t=e;return callRecursive({index:r.index+1,ctx:t&&"ctx"in t?{...r.ctx,...t.ctx}:r.ctx,input:t&&"input"in t?t.input:r.input,getRawInput:t&&"getRawInput"in t?t.getRawInput:r.getRawInput})}})}catch(e){return{ok:!1,error:getTRPCErrorFromUnknown(e),marker:lo}}}const r=await callRecursive();if(!r)throw new TRPCError({code:"INTERNAL_SERVER_ERROR",message:"No result from middlewares - did you forget to `return next()`?"});if(!r.ok)throw r.error;return r.data}return procedure._def=e,procedure}(createNewBuilder(e,{resolver:t,middlewares:[async function(e){const r=await t(e);return{marker:lo,ok:!0,data:r,ctx:e.ctx}}]})._def)}const uo="\nThis is a client-only function.\nIf you want to call this function on the server, see https://trpc.io/docs/v11/server/server-side-calls\n".trim();class TRPCBuilder{context(){return new TRPCBuilder}meta(){return new TRPCBuilder}create(e){const t={transformer:(n=e?.transformer??oo,"input"in n?n:{input:n,output:n}),isDev:e?.isDev??"production"!==globalThis.process?.env?.NODE_ENV,allowOutsideOfServer:e?.allowOutsideOfServer??!1,errorFormatter:e?.errorFormatter??defaultFormatter,isServer:e?.isServer??true,$types:(r=e=>{throw new Error(`Tried to access "$types.${e}" which is not available at runtime`)},new Proxy(noop,{get(e,t){if("string"==typeof t&&"then"!==t)return r(t)}}))};var r,n;if(!(e?.isServer??true)&&!0!==e?.allowOutsideOfServer)throw new Error("You're trying to use @trpc/server in a non-server environment. This is not supported by default.");return{_config:t,procedure:createBuilder({meta:e?.defaultMeta}),middleware:createMiddlewareFactory(),router:createRouterFactory(t),mergeRouters:mergeRouters,createCallerFactory:function(e){const t=e._def;return function(e){const r=createRecursiveProxy((({path:r,args:n})=>{const s=r.join("."),i=t.procedures[s],callProc=e=>i({path:s,getRawInput:async()=>n[0],ctx:e,type:i._def.type});if("function"==typeof e){const t=e();return t instanceof Promise?t.then(callProc):callProc(t)}return callProc(e)}));return r}}}}}const fo=new TRPCBuilder;var po={exports:{}};const ho=getDefaultExportFromNamespaceIfNotNamed(Ge);!function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r={posix:!0,win32:!0,platform:!0};t.win32=t.posix=t.platform=t.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=_getRequireWildcardCache(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=s?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(ho);function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache=function(e){return e?r:t})(e)}Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));const s={...n,platform:"posix",posix:void 0,win32:void 0};s.posix=s,s.win32=s,t.posix=s,t.win32=s,t.platform="posix",e.exports=s}(po,po.exports);var mo=po.exports,yo=mo.relative,depd_1=function(e){if(!e)throw new TypeError("argument namespace is required");var t=callSiteLocation(getStack()[1])[0];function deprecate(e){log.call(deprecate,e)}return deprecate._file=t,deprecate._ignored=function(e){if(process.noDeprecation)return!0;return containsNamespace(process.env.NO_DEPRECATION||"",e)}(e),deprecate._namespace=e,deprecate._traced=function(e){if(process.traceDeprecation)return!0;return containsNamespace(process.env.TRACE_DEPRECATION||"",e)}(e),deprecate._warned=Object.create(null),deprecate.function=wrapfunction,deprecate.property=wrapproperty,deprecate},go=process.cwd();function containsNamespace(e,t){for(var r=e.split(/[ ,]+/),n=String(t).toLowerCase(),s=0;s<r.length;s++){var i=r[s];if(i&&("*"===i||i.toLowerCase()===n))return!0}return!1}function createStackString(e){var t=this.name+": "+this.namespace;this.message&&(t+=" deprecated "+this.message);for(var r=0;r<e.length;r++)t+="\n    at "+e[r].toString();return t}function log(e,t){var r,n,s=(r=process,n="deprecation",("function"!=typeof r.listenerCount?r.listeners(n).length:r.listenerCount(n))>0);if(s||!this._ignored){var i,o,a,c,l=0,u=!1,d=getStack(),f=this._file;for(t?(c=t,(a=callSiteLocation(d[1])).name=c.name,f=a[0]):a=c=callSiteLocation(d[l=2]);l<d.length;l++)if((o=(i=callSiteLocation(d[l]))[0])===f)u=!0;else if(o===this._file)f=this._file;else if(u)break;var p=i?c.join(":")+"__"+i.join(":"):void 0;if(void 0===p||!(p in this._warned)){this._warned[p]=!0;var h=e;if(h||(h=a!==c&&a.name?defaultMessage(a):defaultMessage(c)),s){var m=DeprecationError(this._namespace,h,d.slice(l));process.emit("deprecation",m)}else{var y=(process.stderr.isTTY?formatColor:formatPlain).call(this,h,i,d.slice(l));process.stderr.write(y+"\n","utf8")}}}}function callSiteLocation(e){var t=e.getFileName()||"<anonymous>",r=e.getLineNumber(),n=e.getColumnNumber();e.isEval()&&(t=e.getEvalOrigin()+", "+t);var s=[t,r,n];return s.callSite=e,s.name=e.getFunctionName(),s}function defaultMessage(e){var t=e.callSite,r=e.name;r||(r="<anonymous@"+formatLocation(e)+">");var n=t.getThis(),s=n&&t.getTypeName();return"Object"===s&&(s=void 0),"Function"===s&&(s=n.name||s),s&&t.getMethodName()?s+"."+r:r}function formatPlain(e,t,r){var n=(new Date).toUTCString()+" "+this._namespace+" deprecated "+e;if(this._traced){for(var s=0;s<r.length;s++)n+="\n    at "+r[s].toString();return n}return t&&(n+=" at "+formatLocation(t)),n}function formatColor(e,t,r){var n="[36;1m"+this._namespace+"[22;39m [33;1mdeprecated[22;39m [0m"+e+"[39m";if(this._traced){for(var s=0;s<r.length;s++)n+="\n    [36mat "+r[s].toString()+"[39m";return n}return t&&(n+=" [36m"+formatLocation(t)+"[39m"),n}function formatLocation(e){return yo(go,e[0])+":"+e[1]+":"+e[2]}function getStack(){var e=Error.stackTraceLimit,t={},r=Error.prepareStackTrace;Error.prepareStackTrace=prepareObjectStackTrace,Error.stackTraceLimit=Math.max(10,e),Error.captureStackTrace(t);var n=t.stack.slice(1);return Error.prepareStackTrace=r,Error.stackTraceLimit=e,n}function prepareObjectStackTrace(e,t){return t}function wrapfunction(e,t){if("function"!=typeof e)throw new TypeError("argument fn must be a function");var r=function(e){for(var t="",r=0;r<e;r++)t+=", arg"+r;return t.substr(2)}(e.length),n=callSiteLocation(getStack()[1]);return n.name=e.name,new Function("fn","log","deprecate","message","site",'"use strict"\nreturn function ('+r+") {log.call(deprecate, message, site)\nreturn fn.apply(this, arguments)\n}")(e,log,this,t,n)}function wrapproperty(e,t,r){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new TypeError("argument obj must be object");var n=Object.getOwnPropertyDescriptor(e,t);if(!n)throw new TypeError("must call property on owner object");if(!n.configurable)throw new TypeError("property must be configurable");var s=this,i=callSiteLocation(getStack()[1]);i.name=t,"value"in n&&(n=function(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t),s=n.value;return n.get=function(){return s},n.writable&&(n.set=function(e){return s=e}),delete n.value,delete n.writable,Object.defineProperty(e,t,n),n}(e,t));var o=n.get,a=n.set;"function"==typeof o&&(n.get=function(){return log.call(s,r,i),o.apply(this,arguments)}),"function"==typeof a&&(n.set=function(){return log.call(s,r,i),a.apply(this,arguments)}),Object.defineProperty(e,t,n)}function DeprecationError(e,t,r){var n,s=new Error;return Object.defineProperty(s,"constructor",{value:DeprecationError}),Object.defineProperty(s,"message",{configurable:!0,enumerable:!1,value:t,writable:!0}),Object.defineProperty(s,"name",{enumerable:!1,configurable:!0,value:"DeprecationError",writable:!0}),Object.defineProperty(s,"namespace",{configurable:!0,enumerable:!1,value:e,writable:!0}),Object.defineProperty(s,"stack",{configurable:!0,enumerable:!1,get:function(){return void 0!==n?n:n=createStackString.call(this,r)},set:function(e){n=e}}),s}var bo={exports:{}},_o={};Object.defineProperty(_o,"__esModule",{value:!0}),_o.subtle=_o.randomUUID=_o.getRandomValues=void 0,_o.subtle=globalThis.crypto?.subtle;_o.randomUUID=()=>globalThis.crypto?.randomUUID();_o.getRandomValues=e=>globalThis.crypto?.getRandomValues(e);var wo={},vo={};function createNotImplementedError(e){throw new Error(`[unenv] ${e} is not implemented yet!`)}Object.defineProperty(vo,"__esModule",{value:!0}),vo.createNotImplementedError=createNotImplementedError,vo.mergeFns=function(...e){return function(...t){for(const r of e)r(...t)}},vo.notImplemented=function(e){return Object.assign((()=>{throw createNotImplementedError(e)}),{__unenv__:!0})},vo.notImplementedClass=function(e){return class{__unenv__=!0;constructor(){throw new Error(`[unenv] ${e} is not implemented yet!`)}}},vo.rawHeaders=function(e){const t=[];for(const r in e)if(Array.isArray(e[r]))for(const n of e[r])t.push(r,n);else t.push(r,e[r]);return t},Object.defineProperty(wo,"__esModule",{value:!0}),wo.webcrypto=wo.verify=wo.timingSafeEqual=wo.sign=wo.setFips=wo.setEngine=wo.secureHeapUsed=wo.scryptSync=wo.scrypt=wo.randomInt=wo.randomFillSync=wo.randomFill=wo.randomBytes=wo.publicEncrypt=wo.publicDecrypt=wo.pseudoRandomBytes=wo.privateEncrypt=wo.privateDecrypt=wo.pbkdf2Sync=wo.pbkdf2=wo.hkdfSync=wo.hkdf=wo.getHashes=wo.getFips=wo.getDiffieHellman=wo.getCurves=wo.getCiphers=wo.getCipherInfo=wo.generatePrimeSync=wo.generatePrime=wo.generateKeySync=wo.generateKeyPairSync=wo.generateKeyPair=wo.generateKey=wo.fips=wo.diffieHellman=wo.createVerify=wo.createSign=wo.createSecretKey=wo.createPublicKey=wo.createPrivateKey=wo.createHmac=wo.createHash=wo.createECDH=wo.createDiffieHellmanGroup=wo.createDiffieHellman=wo.createDecipheriv=wo.createDecipher=wo.createCipheriv=wo.createCipher=wo.constants=wo.checkPrimeSync=wo.checkPrime=wo.X509Certificate=wo.Verify=wo.Sign=wo.KeyObject=wo.Hmac=wo.Hash=wo.ECDH=wo.DiffieHellmanGroup=wo.DiffieHellman=wo.Decipheriv=wo.Decipher=wo.Cipheriv=wo.Cipher=wo.Certificate=void 0;var So=vo,Io=_o;wo.webcrypto=new Proxy(globalThis.crypto,{get:(e,t)=>"CryptoKey"===t?globalThis.CryptoKey:"function"==typeof globalThis.crypto[t]?globalThis.crypto[t].bind(globalThis.crypto):globalThis.crypto[t]});wo.randomBytes=(e,t)=>{const r=u.alloc(e,0,void 0);for(let t=0;t<e;t+=65536)(0,Io.getRandomValues)(Uint8Array.prototype.slice.call(r,t,t+65536));if("function"!=typeof t)return r;t(null,r)},wo.fips=!1,wo.constants={},wo.checkPrime=(0,So.notImplemented)("crypto.checkPrime"),wo.checkPrimeSync=(0,So.notImplemented)("crypto.checkPrimeSync"),wo.createCipher=(0,So.notImplemented)("crypto.createCipher"),wo.createDecipher=(0,So.notImplemented)("crypto.createDecipher"),wo.pseudoRandomBytes=(0,So.notImplemented)("crypto.pseudoRandomBytes"),wo.createCipheriv=(0,So.notImplemented)("crypto.createCipheriv"),wo.createDecipheriv=(0,So.notImplemented)("crypto.createDecipheriv"),wo.createDiffieHellman=(0,So.notImplemented)("crypto.createDiffieHellman"),wo.createDiffieHellmanGroup=(0,So.notImplemented)("crypto.createDiffieHellmanGroup"),wo.createECDH=(0,So.notImplemented)("crypto.createECDH"),wo.createHash=(0,So.notImplemented)("crypto.createHash"),wo.createHmac=(0,So.notImplemented)("crypto.createHmac"),wo.createPrivateKey=(0,So.notImplemented)("crypto.createPrivateKey"),wo.createPublicKey=(0,So.notImplemented)("crypto.createPublicKey"),wo.createSecretKey=(0,So.notImplemented)("crypto.createSecretKey"),wo.createSign=(0,So.notImplemented)("crypto.createSign"),wo.createVerify=(0,So.notImplemented)("crypto.createVerify"),wo.diffieHellman=(0,So.notImplemented)("crypto.diffieHellman"),wo.generatePrime=(0,So.notImplemented)("crypto.generatePrime"),wo.generatePrimeSync=(0,So.notImplemented)("crypto.generatePrimeSync"),wo.getCiphers=(0,So.notImplemented)("crypto.getCiphers"),wo.getCipherInfo=(0,So.notImplemented)("crypto.getCipherInfo"),wo.getCurves=(0,So.notImplemented)("crypto.getCurves"),wo.getDiffieHellman=(0,So.notImplemented)("crypto.getDiffieHellman"),wo.getHashes=(0,So.notImplemented)("crypto.getHashes"),wo.hkdf=(0,So.notImplemented)("crypto.hkdf"),wo.hkdfSync=(0,So.notImplemented)("crypto.hkdfSync"),wo.pbkdf2=(0,So.notImplemented)("crypto.pbkdf2"),wo.pbkdf2Sync=(0,So.notImplemented)("crypto.pbkdf2Sync"),wo.generateKeyPair=(0,So.notImplemented)("crypto.generateKeyPair"),wo.generateKeyPairSync=(0,So.notImplemented)("crypto.generateKeyPairSync"),wo.generateKey=(0,So.notImplemented)("crypto.generateKey"),wo.generateKeySync=(0,So.notImplemented)("crypto.generateKeySync"),wo.privateDecrypt=(0,So.notImplemented)("crypto.privateDecrypt"),wo.privateEncrypt=(0,So.notImplemented)("crypto.privateEncrypt"),wo.publicDecrypt=(0,So.notImplemented)("crypto.publicDecrypt"),wo.publicEncrypt=(0,So.notImplemented)("crypto.publicEncrypt"),wo.randomFill=(0,So.notImplemented)("crypto.randomFill"),wo.randomFillSync=(0,So.notImplemented)("crypto.randomFillSync"),wo.randomInt=(0,So.notImplemented)("crypto.randomInt"),wo.scrypt=(0,So.notImplemented)("crypto.scrypt"),wo.scryptSync=(0,So.notImplemented)("crypto.scryptSync"),wo.sign=(0,So.notImplemented)("crypto.sign"),wo.setEngine=(0,So.notImplemented)("crypto.setEngine"),wo.timingSafeEqual=(0,So.notImplemented)("crypto.timingSafeEqual"),wo.getFips=(0,So.notImplemented)("crypto.getFips"),wo.setFips=(0,So.notImplemented)("crypto.setFips"),wo.verify=(0,So.notImplemented)("crypto.verify"),wo.secureHeapUsed=(0,So.notImplemented)("crypto.secureHeapUsed"),wo.Certificate=(0,So.notImplementedClass)("crypto.Certificate"),wo.Cipher=(0,So.notImplementedClass)("crypto.Cipher"),wo.Cipheriv=(0,So.notImplementedClass)("crypto.Cipheriv"),wo.Decipher=(0,So.notImplementedClass)("crypto.Decipher"),wo.Decipheriv=(0,So.notImplementedClass)("crypto.Decipheriv"),wo.DiffieHellman=(0,So.notImplementedClass)("crypto.DiffieHellman"),wo.DiffieHellmanGroup=(0,So.notImplementedClass)("crypto.DiffieHellmanGroup"),wo.ECDH=(0,So.notImplementedClass)("crypto.ECDH"),wo.Hash=(0,So.notImplementedClass)("crypto.Hash"),wo.Hmac=(0,So.notImplementedClass)("crypto.Hmac"),wo.KeyObject=(0,So.notImplementedClass)("crypto.KeyObject"),wo.Sign=(0,So.notImplementedClass)("crypto.Sign"),wo.Verify=(0,So.notImplementedClass)("crypto.Verify"),wo.X509Certificate=(0,So.notImplementedClass)("crypto.X509Certificate"),function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r={},n=_interopRequireWildcard(_o);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var s=_interopRequireWildcard(wo);function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache=function(e){return e?r:t})(e)}function _interopRequireWildcard(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=_getRequireWildcardCache(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=s?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))})),e.exports={...n,...s}}(bo,bo.exports);var ko=bo.exports,To=ko;var lib=function(e,t){var r=String(e),n=String(t),s=To.pseudoRandomBytes(32);return function(e,t){if(e.length!==t.length)return!1;if(To.timingSafeEqual)return To.timingSafeEqual(e,t);for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(To.createHmac("sha256",s).update(r).digest(),To.createHmac("sha256",s).update(n).digest())&&e===t},Eo=lib,Oo=ko;function Keygrip$1(e,t,r){if(t||(t="sha1"),r||(r="base64"),!(this instanceof Keygrip$1))return new Keygrip$1(e,t,r);if(!e||!(0 in e))throw new Error("Keys must be provided.");function sign(e,n){return Oo.createHmac(t,n).update(e).digest(r).replace(/\/|\+|=/g,(function(e){return{"/":"_","+":"-","=":""}[e]}))}this.sign=function(t){return sign(t,e[0])},this.verify=function(e,t){return this.index(e,t)>-1},this.index=function(t,r){for(var n=0,s=e.length;n<s;n++)if(Eo(r,sign(t,e[n])))return n;return-1}}Keygrip$1.sign=Keygrip$1.verify=Keygrip$1.index=function(){throw new Error("Usage: require('keygrip')(<array-of-keys>)")};var xo=Keygrip$1,Co={exports:{}},Po={};Object.defineProperty(Po,"__esModule",{value:!0}),Po.maxHeaderSize=Po.STATUS_CODES=Po.METHODS=void 0,Po.METHODS=["ACL","BIND","CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LINK","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PRI","PROPFIND","PROPPATCH","PURGE","PUT","REBIND","REPORT","SEARCH","SOURCE","SUBSCRIBE","TRACE","UNBIND","UNLINK","UNLOCK","UNSUBSCRIBE"],Po.STATUS_CODES={100:"Continue",101:"Switching Protocols",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a Teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Too Early",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"},Po.maxHeaderSize=16384;var Ao={},No={},Ro={},jo={},qo={exports:{}},$o={};Object.defineProperty($o,"__esModule",{value:!0}),$o.EventEmitter=void 0,$o.once=function(e,t){return new Promise((function(r,n){function errorListener(r){e.removeListener(t,resolver),n(r)}function resolver(){"function"==typeof e.removeListener&&e.removeListener("error",errorListener),r(Array.prototype.slice.call(arguments))}_eventTargetAgnosticAddListener(e,t,resolver,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&_eventTargetAgnosticAddListener(e,"error",t,r)}(e,errorListener,{once:!0})}))};let Mo=10;class EventEmitter{__unenv__=!0;_events=Object.create(null);_maxListeners;static get defaultMaxListeners(){return Mo}static set defaultMaxListeners(e){if("number"!=typeof e||e<0||Number.isNaN(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");Mo=e}setMaxListeners(e){if("number"!=typeof e||e<0||Number.isNaN(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this}getMaxListeners(){return _getMaxListeners(this)}emit(e,...t){if(!this._events[e]||0===this._events[e].length)return!1;if("error"===e){let e;if(t.length>0&&(e=t[0]),e instanceof Error)throw e;const r=new Error("Unhandled error."+(e?" ("+e.message+")":""));throw r.context=e,r}for(const r of this._events[e])(r.listener||r).apply(this,t);return!0}addListener(e,t){return _addListener(this,e,t,!1)}on(e,t){return _addListener(this,e,t,!1)}prependListener(e,t){return _addListener(this,e,t,!0)}once(e,t){return this.on(e,_wrapOnce(this,e,t))}prependOnceListener(e,t){return this.prependListener(e,_wrapOnce(this,e,t))}removeListener(e,t){return function(e,t,r){if(_checkListener(r),!e._events[t]||0===e._events[t].length)return e;const n=e._events[t].length;if(e._events[t]=e._events[t].filter((e=>e!==r)),n===e._events[t].length)return e;e._events.removeListener&&e.emit("removeListener",t,r.listener||r);0===e._events[t].length&&delete e._events[t];return e}(this,e,t)}off(e,t){return this.removeListener(e,t)}removeAllListeners(e){return function(e,t){if(!e._events[t]||0===e._events[t].length)return e;if(e._events.removeListener)for(const r of e._events[t])e.emit("removeListener",t,r.listener||r);return delete e._events[t],e}(this,e)}listeners(e){return _listeners(this,e,!0)}rawListeners(e){return _listeners(this,e,!1)}listenerCount(e){return this.rawListeners(e).length}eventNames(){return Object.keys(this._events)}}function _addListener(e,t,r,n){_checkListener(r),void 0!==e._events.newListener&&e.emit("newListener",t,r.listener||r),e._events[t]||(e._events[t]=[]),n?e._events[t].unshift(r):e._events[t].push(r);const s=_getMaxListeners(e);if(s>0&&e._events[t].length>s&&!e._events[t].warned){e._events[t].warned=!0;const r=new Error(`[unenv] Possible EventEmitter memory leak detected. ${e._events[t].length} ${t} listeners added. Use emitter.setMaxListeners() to increase limit`);r.name="MaxListenersExceededWarning",r.emitter=e,r.type=t,r.count=e._events[t]?.length,console.warn(r)}return e}function _wrapOnce(e,t,r){let n=!1;const wrapper=(...s)=>{if(!n)return e.removeListener(t,wrapper),n=!0,0===s.length?r.call(e):r.apply(e,s)};return wrapper.listener=r,wrapper}function _getMaxListeners(e){return e._maxListeners??EventEmitter.defaultMaxListeners}function _listeners(e,t,r){let n=e._events[t];return"function"==typeof n&&(n=[n]),r?n.map((e=>e.listener||e)):n}function _checkListener(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function _eventTargetAgnosticAddListener(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,r)}}$o.EventEmitter=EventEmitter,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.once=t.default=t.EventEmitter=void 0;var r=$o;const n=t.EventEmitter=globalThis.EventEmitter||r.EventEmitter,s=t.once=r.once;e.exports={EventEmitter:n,once:s}}(qo,qo.exports);var Bo=qo.exports;Object.defineProperty(jo,"__esModule",{value:!0}),jo._Readable=jo.Readable=void 0;var Lo=vo,Uo=Bo;class _Readable extends Uo.EventEmitter{__unenv__=!0;readableEncoding=null;readableEnded=!0;readableFlowing=!1;readableHighWaterMark=0;readableLength=0;readableObjectMode=!1;readableAborted=!1;readableDidRead=!1;closed=!1;errored=null;readable=!1;destroyed=!1;static from(e,t){return new _Readable(t)}constructor(e){super()}_read(e){}read(e){}setEncoding(e){return this}pause(){return this}resume(){return this}isPaused(){return!0}unpipe(e){return this}unshift(e,t){}wrap(e){return this}push(e,t){return!1}_destroy(e,t){this.removeAllListeners()}destroy(e){return this.destroyed=!0,this._destroy(e),this}pipe(e,t){return{}}compose(e,t){throw new Error("[unenv] Method not implemented.")}[Symbol.asyncDispose](){return this.destroy(),Promise.resolve()}async*[Symbol.asyncIterator](){throw(0,Lo.createNotImplementedError)("Readable.asyncIterator")}iterator(e){throw(0,Lo.createNotImplementedError)("Readable.iterator")}map(e,t){throw(0,Lo.createNotImplementedError)("Readable.map")}filter(e,t){throw(0,Lo.createNotImplementedError)("Readable.filter")}forEach(e,t){throw(0,Lo.createNotImplementedError)("Readable.forEach")}reduce(e,t,r){throw(0,Lo.createNotImplementedError)("Readable.reduce")}find(e,t){throw(0,Lo.createNotImplementedError)("Readable.find")}findIndex(e,t){throw(0,Lo.createNotImplementedError)("Readable.findIndex")}some(e,t){throw(0,Lo.createNotImplementedError)("Readable.some")}toArray(e){throw(0,Lo.createNotImplementedError)("Readable.toArray")}every(e,t){throw(0,Lo.createNotImplementedError)("Readable.every")}flatMap(e,t){throw(0,Lo.createNotImplementedError)("Readable.flatMap")}drop(e,t){throw(0,Lo.createNotImplementedError)("Readable.drop")}take(e,t){throw(0,Lo.createNotImplementedError)("Readable.take")}asIndexedPairs(e){throw(0,Lo.createNotImplementedError)("Readable.asIndexedPairs")}}jo._Readable=_Readable,jo.Readable=globalThis.Readable||_Readable;var Do={};Object.defineProperty(Do,"__esModule",{value:!0}),Do.Writable=void 0;var Zo=Bo;class _Writable extends Zo.EventEmitter{__unenv__=!0;writable=!0;writableEnded=!1;writableFinished=!1;writableHighWaterMark=0;writableLength=0;writableObjectMode=!1;writableCorked=0;closed=!1;errored=null;writableNeedDrain=!1;destroyed=!1;_data;_encoding="utf-8";constructor(e){super()}pipe(e,t){return{}}_write(e,t,r){if(this.writableEnded)r&&r();else{if(void 0===this._data)this._data=e;else{const r="string"==typeof this._data?u.from(this._data,this._encoding||t||"utf8"):this._data,n="string"==typeof e?u.from(e,t||this._encoding||"utf8"):e;this._data=u.concat([r,n])}this._encoding=t,r&&r()}}_writev(e,t){}_destroy(e,t){}_final(e){}write(e,t,r){const n="string"==typeof t?this._encoding:"utf-8",s="function"==typeof t?t:"function"==typeof r?r:void 0;return this._write(e,n,s),!0}setDefaultEncoding(e){return this}end(e,t,r){const n="function"==typeof e?e:"function"==typeof t?t:"function"==typeof r?r:void 0;if(this.writableEnded)return n&&n(),this;const s=e===n?void 0:e;if(s){const e=t===n?void 0:t;this.write(s,e,n)}return this.writableEnded=!0,this.writableFinished=!0,this.emit("close"),this.emit("finish"),this}cork(){}uncork(){}destroy(e){return this.destroyed=!0,delete this._data,this.removeAllListeners(),this}compose(e,t){throw new Error("[h3] Method not implemented.")}}Do.Writable=globalThis.Writable||_Writable,Object.defineProperty(Ro,"__esModule",{value:!0}),Ro._Duplex=Ro.Duplex=void 0;var Ko=vo,Fo=jo,zo=Do;const Ho=class{allowHalfOpen=!0;_destroy;constructor(e=new Fo.Readable,t=new zo.Writable){Object.assign(this,e),Object.assign(this,t),this._destroy=(0,Ko.mergeFns)(e._destroy,t._destroy)}};function getDuplex(){return Object.assign(Ho.prototype,Fo.Readable.prototype),Object.assign(Ho.prototype,zo.Writable.prototype),Ho}const Wo=Ro._Duplex=getDuplex();Ro.Duplex=globalThis.Duplex||Wo,Object.defineProperty(No,"__esModule",{value:!0}),No.SocketAddress=No.Socket=void 0;var Vo=Ro;class Socket extends Vo.Duplex{__unenv__=!0;bufferSize=0;bytesRead=0;bytesWritten=0;connecting=!1;destroyed=!1;pending=!1;localAddress="";localPort=0;remoteAddress="";remoteFamily="";remotePort=0;autoSelectFamilyAttemptedAddresses=[];readyState="readOnly";constructor(e){super()}write(e,t,r){return!1}connect(e,t,r){return this}end(e,t,r){return this}setEncoding(e){return this}pause(){return this}resume(){return this}setTimeout(e,t){return this}setNoDelay(e){return this}setKeepAlive(e,t){return this}address(){return{}}unref(){return this}ref(){return this}destroySoon(){this.destroy()}resetAndDestroy(){const e=new Error("ERR_SOCKET_CLOSED");return e.code="ERR_SOCKET_CLOSED",this.destroy(e),this}}No.Socket=Socket;No.SocketAddress=class{__unenv__=!0;address;family;port;flowlabel;constructor(e){this.address=e.address,this.family=e.family,this.port=e.port,this.flowlabel=e.flowlabel}},Object.defineProperty(Ao,"__esModule",{value:!0}),Ao.IncomingMessage=void 0;var Qo=No,Jo=jo,Go=vo;class IncomingMessage extends Jo.Readable{__unenv__={};aborted=!1;httpVersion="1.1";httpVersionMajor=1;httpVersionMinor=1;complete=!0;connection;socket;headers={};trailers={};method="GET";url="/";statusCode=200;statusMessage="";closed=!1;errored=null;readable=!1;constructor(e){super(),this.socket=this.connection=e||new Qo.Socket}get rawHeaders(){return(0,Go.rawHeaders)(this.headers)}get rawTrailers(){return[]}setTimeout(e,t){return this}get headersDistinct(){return _distinct(this.headers)}get trailersDistinct(){return _distinct(this.trailers)}}function _distinct(e){const t={};for(const[r,n]of Object.entries(e))r&&(t[r]=(Array.isArray(n)?n:[n]).filter(Boolean));return t}Ao.IncomingMessage=IncomingMessage;var Yo={};Object.defineProperty(Yo,"__esModule",{value:!0}),Yo.ServerResponse=void 0;var Xo=Do;class ServerResponse extends Xo.Writable{__unenv__=!0;statusCode=200;statusMessage="";upgrading=!1;chunkedEncoding=!1;shouldKeepAlive=!1;useChunkedEncodingByDefault=!1;sendDate=!1;finished=!1;headersSent=!1;strictContentLength=!1;connection=null;socket=null;req;_headers={};constructor(e){super(),this.req=e}assignSocket(e){e._httpMessage=this,this.socket=e,this.connection=e,this.emit("socket",e),this._flush()}_flush(){this.flushHeaders()}detachSocket(e){}writeContinue(e){}writeHead(e,t,r){e&&(this.statusCode=e),"string"==typeof t&&(this.statusMessage=t,t=void 0);const n=r||t;if(n)if(Array.isArray(n));else for(const e in n)this.setHeader(e,n[e]);return this.headersSent=!0,this}writeProcessing(){}setTimeout(e,t){return this}appendHeader(e,t){e=e.toLowerCase();const r=this._headers[e],n=[...Array.isArray(r)?r:[r],...Array.isArray(t)?t:[t]].filter(Boolean);return this._headers[e]=n.length>1?n:n[0],this}setHeader(e,t){return this._headers[e.toLowerCase()]=t,this}getHeader(e){return this._headers[e.toLowerCase()]}getHeaders(){return this._headers}getHeaderNames(){return Object.keys(this._headers)}hasHeader(e){return e.toLowerCase()in this._headers}removeHeader(e){delete this._headers[e.toLowerCase()]}addTrailers(e){}flushHeaders(){}writeEarlyHints(e,t){"function"==typeof t&&t()}}Yo.ServerResponse=ServerResponse,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r={createServer:!0,request:!0,get:!0,Server:!0,OutgoingMessage:!0,ClientRequest:!0,Agent:!0,globalAgent:!0,validateHeaderName:!0,validateHeaderValue:!0,setMaxIdleHTTPParsers:!0};t.validateHeaderValue=t.validateHeaderName=t.setMaxIdleHTTPParsers=t.request=t.globalAgent=t.get=t.default=t.createServer=t.Server=t.OutgoingMessage=t.ClientRequest=t.Agent=void 0;var n,s=vo,i=(n=et)&&n.__esModule?n:{default:n},o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=_getRequireWildcardCache(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=s?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(Po);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var a=Ao;Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var c=Yo;function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache=function(e){return e?r:t})(e)}Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===c[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}}))}));const l=t.createServer=(0,s.notImplemented)("http.createServer"),u=t.request=(0,s.notImplemented)("http.request"),d=t.get=(0,s.notImplemented)("http.get"),f=t.Server=i.default.__createMock__("http.Server"),p=t.OutgoingMessage=i.default.__createMock__("http.OutgoingMessage"),h=t.ClientRequest=i.default.__createMock__("http.ClientRequest"),m=t.Agent=i.default.__createMock__("http.Agent"),y=t.globalAgent=new m,g=t.validateHeaderName=(0,s.notImplemented)("http.validateHeaderName"),b=t.validateHeaderValue=(0,s.notImplemented)("http.validateHeaderValue"),_=t.setMaxIdleHTTPParsers=(0,s.notImplemented)("http.setMaxIdleHTTPParsers");e.exports={...o,IncomingMessage:a.IncomingMessage,ServerResponse:c.ServerResponse,createServer:l,request:u,get:d,Server:f,OutgoingMessage:p,ClientRequest:h,Agent:m,globalAgent:y,validateHeaderName:g,validateHeaderValue:b,setMaxIdleHTTPParsers:_}}(Co,Co.exports);var ea=Co.exports,ta=depd_1("cookies"),ra=xo,na=ea,sa=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,ia=/^(?:low|medium|high)$/i,oa=Object.create(null),aa=/[\^$\\.*+?()[\]{}|]/g,ca=/[;=]/,la=/[;]/,ua=/^(?:lax|none|strict)$/i;function Cookies(e,t,r){if(!(this instanceof Cookies))return new Cookies(e,t,r);this.secure=void 0,this.request=e,this.response=t,r&&(Array.isArray(r)?(ta('"keys" argument; provide using options {"keys": [...]}'),this.keys=new ra(r)):r.constructor&&"Keygrip"===r.constructor.name?(ta('"keys" argument; provide using options {"keys": keygrip}'),this.keys=r):(this.keys=Array.isArray(r.keys)?new ra(r.keys):r.keys,this.secure=r.secure))}function Cookie(e,t,r){if(!sa.test(e)||ca.test(e))throw new TypeError("argument name is invalid");if(t&&(!sa.test(t)||la.test(t)))throw new TypeError("argument value is invalid");for(var e in this.name=e,this.value=t||"",r)this[e]=r[e];if(this.value||(this.expires=new Date(0),this.maxAge=null),this.path&&!sa.test(this.path))throw new TypeError("option path is invalid");if(this.domain&&!sa.test(this.domain))throw new TypeError("option domain is invalid");if("number"==typeof this.maxAge?isNaN(this.maxAge)||!isFinite(this.maxAge):this.maxAge)throw new TypeError("option maxAge is invalid");if(this.priority&&!ia.test(this.priority))throw new TypeError("option priority is invalid");if(this.sameSite&&!0!==this.sameSite&&!ua.test(this.sameSite))throw new TypeError("option sameSite is invalid")}function pushCookie(e,t){if(t.overwrite)for(var r=e.length-1;r>=0;r--)0===e[r].indexOf(t.name+"=")&&e.splice(r,1);e.push(t.toHeader())}Cookies.prototype.get=function(e,t){var r,n,s,i,o,a,c=e+".sig",l=t&&void 0!==t.signed?t.signed:!!this.keys;if((r=this.request.headers.cookie)&&(n=r.match(function(e){oa[e]||(oa[e]=new RegExp("(?:^|;) *"+e.replace(aa,"\\$&")+"=([^;]*)"));return oa[e]}(e)),n)){if('"'===(s=n[1])[0]&&(s=s.slice(1,-1)),!t||!l)return s;if(i=this.get(c)){if(o=e+"="+s,!this.keys)throw new Error(".keys required for signed cookies");if(!((a=this.keys.index(o,i))<0))return a&&this.set(c,this.keys.sign(o),{signed:!1}),s;this.set(c,null,{path:"/",signed:!1})}}},Cookies.prototype.set=function(e,t,r){var n=this.response,s=this.request,i=n.getHeader("Set-Cookie")||[],o=new Cookie(e,t,r),a=r&&void 0!==r.signed?r.signed:!!this.keys,c=void 0===this.secure?"https"===s.protocol||function(e){return e.socket?e.socket.encrypted:e.connection.encrypted}(s):Boolean(this.secure);if("string"==typeof i&&(i=[i]),!c&&r&&r.secure)throw new Error("Cannot send secure cookie over unencrypted connection");if(o.secure=r&&void 0!==r.secure?r.secure:c,r&&"secureProxy"in r&&(ta('"secureProxy" option; use "secure" option, provide "secure" to constructor if needed'),o.secure=r.secureProxy),pushCookie(i,o),r&&a){if(!this.keys)throw new Error(".keys required for signed cookies");o.value=this.keys.sign(o.toString()),o.name+=".sig",pushCookie(i,o)}return(n.set?na.OutgoingMessage.prototype.setHeader:n.setHeader).call(n,"Set-Cookie",i),this},Cookie.prototype.path="/",Cookie.prototype.expires=void 0,Cookie.prototype.domain=void 0,Cookie.prototype.httpOnly=!0,Cookie.prototype.partitioned=!1,Cookie.prototype.priority=void 0,Cookie.prototype.sameSite=!1,Cookie.prototype.secure=!1,Cookie.prototype.overwrite=!1,Cookie.prototype.toString=function(){return this.name+"="+this.value},Cookie.prototype.toHeader=function(){var e=this.toString();return this.maxAge&&(this.expires=new Date(Date.now()+this.maxAge)),this.path&&(e+="; path="+this.path),this.expires&&(e+="; expires="+this.expires.toUTCString()),this.domain&&(e+="; domain="+this.domain),this.priority&&(e+="; priority="+this.priority.toLowerCase()),this.sameSite&&(e+="; samesite="+(!0===this.sameSite?"strict":this.sameSite.toLowerCase())),this.secure&&(e+="; secure"),this.httpOnly&&(e+="; httponly"),this.partitioned&&(e+="; partitioned"),e},Object.defineProperty(Cookie.prototype,"maxage",{configurable:!0,enumerable:!0,get:function(){return this.maxAge},set:function(e){return this.maxAge=e}}),ta.property(Cookie.prototype,"maxage",'"maxage"; use "maxAge" instead'),Cookies.connect=Cookies.express=function(e){return function(t,r,n){t.cookies=r.cookies=new Cookies(t,r,{keys:e}),n()}},Cookies.Cookie=Cookie;const da=getDefaultExportFromCjs(Cookies);class DoubleIndexedKV{constructor(){this.keyToValue=new Map,this.valueToKey=new Map}set(e,t){this.keyToValue.set(e,t),this.valueToKey.set(t,e)}getByKey(e){return this.keyToValue.get(e)}getByValue(e){return this.valueToKey.get(e)}clear(){this.keyToValue.clear(),this.valueToKey.clear()}}class Registry{constructor(e){this.generateIdentifier=e,this.kv=new DoubleIndexedKV}register(e,t){this.kv.getByValue(e)||(t||(t=this.generateIdentifier(e)),this.kv.set(t,e))}clear(){this.kv.clear()}getIdentifier(e){return this.kv.getByValue(e)}getValue(e){return this.kv.getByKey(e)}}class ClassRegistry extends Registry{constructor(){super((e=>e.name)),this.classToAllowedProps=new Map}register(e,t){"object"==typeof t?(t.allowProps&&this.classToAllowedProps.set(e,t.allowProps),super.register(e,t.identifier)):super.register(e,t)}getAllowedProps(e){return this.classToAllowedProps.get(e)}}function find(e,t){const r=function(e){if("values"in Object)return Object.values(e);const t=[];for(const r in e)e.hasOwnProperty(r)&&t.push(e[r]);return t}(e);if("find"in r)return r.find(t);const n=r;for(let e=0;e<n.length;e++){const r=n[e];if(t(r))return r}}function forEach(e,t){Object.entries(e).forEach((([e,r])=>t(r,e)))}function includes(e,t){return-1!==e.indexOf(t)}function findArr(e,t){for(let r=0;r<e.length;r++){const n=e[r];if(t(n))return n}}class CustomTransformerRegistry{constructor(){this.transfomers={}}register(e){this.transfomers[e.name]=e}findApplicable(e){return find(this.transfomers,(t=>t.isApplicable(e)))}findByName(e){return this.transfomers[e]}}const isUndefined=e=>void 0===e,isPlainObject$1=e=>"object"==typeof e&&null!==e&&(e!==Object.prototype&&(null===Object.getPrototypeOf(e)||Object.getPrototypeOf(e)===Object.prototype)),isEmptyObject=e=>isPlainObject$1(e)&&0===Object.keys(e).length,isArray$1=e=>Array.isArray(e),isMap=e=>e instanceof Map,isSet=e=>e instanceof Set,isSymbol=e=>"Symbol"===(e=>Object.prototype.toString.call(e).slice(8,-1))(e),isNaNValue=e=>"number"==typeof e&&isNaN(e),isPrimitive=e=>(e=>"boolean"==typeof e)(e)||(e=>null===e)(e)||isUndefined(e)||(e=>"number"==typeof e&&!isNaN(e))(e)||(e=>"string"==typeof e)(e)||isSymbol(e),escapeKey=e=>e.replace(/\./g,"\\."),stringifyPath=e=>e.map(String).map(escapeKey).join("."),parsePath=e=>{const t=[];let r="";for(let n=0;n<e.length;n++){let s=e.charAt(n);if("\\"===s&&"."===e.charAt(n+1)){r+=".",n++;continue}"."===s?(t.push(r),r=""):r+=s}const n=r;return t.push(n),t};function simpleTransformation(e,t,r,n){return{isApplicable:e,annotation:t,transform:r,untransform:n}}const fa=[simpleTransformation(isUndefined,"undefined",(()=>null),(()=>{})),simpleTransformation((e=>"bigint"==typeof e),"bigint",(e=>e.toString()),(e=>"undefined"!=typeof BigInt?BigInt(e):(console.error("Please add a BigInt polyfill."),e))),simpleTransformation((e=>e instanceof Date&&!isNaN(e.valueOf())),"Date",(e=>e.toISOString()),(e=>new Date(e))),simpleTransformation((e=>e instanceof Error),"Error",((e,t)=>{const r={name:e.name,message:e.message};return t.allowedErrorProps.forEach((t=>{r[t]=e[t]})),r}),((e,t)=>{const r=new Error(e.message);return r.name=e.name,r.stack=e.stack,t.allowedErrorProps.forEach((t=>{r[t]=e[t]})),r})),simpleTransformation((e=>e instanceof RegExp),"regexp",(e=>""+e),(e=>{const t=e.slice(1,e.lastIndexOf("/")),r=e.slice(e.lastIndexOf("/")+1);return new RegExp(t,r)})),simpleTransformation(isSet,"set",(e=>[...e.values()]),(e=>new Set(e))),simpleTransformation(isMap,"map",(e=>[...e.entries()]),(e=>new Map(e))),simpleTransformation((e=>{return isNaNValue(e)||((t=e)===1/0||t===-1/0);var t}),"number",(e=>isNaNValue(e)?"NaN":e>0?"Infinity":"-Infinity"),Number),simpleTransformation((e=>0===e&&1/e==-1/0),"number",(()=>"-0"),Number),simpleTransformation((e=>e instanceof URL),"URL",(e=>e.toString()),(e=>new URL(e)))];function compositeTransformation(e,t,r,n){return{isApplicable:e,annotation:t,transform:r,untransform:n}}const pa=compositeTransformation(((e,t)=>{if(isSymbol(e)){return!!t.symbolRegistry.getIdentifier(e)}return!1}),((e,t)=>["symbol",t.symbolRegistry.getIdentifier(e)]),(e=>e.description),((e,t,r)=>{const n=r.symbolRegistry.getValue(t[1]);if(!n)throw new Error("Trying to deserialize unknown symbol");return n})),ha=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,Uint8ClampedArray].reduce(((e,t)=>(e[t.name]=t,e)),{}),ma=compositeTransformation((e=>ArrayBuffer.isView(e)&&!(e instanceof DataView)),(e=>["typed-array",e.constructor.name]),(e=>[...e]),((e,t)=>{const r=ha[t[1]];if(!r)throw new Error("Trying to deserialize unknown typed array");return new r(e)}));function isInstanceOfRegisteredClass(e,t){if(e?.constructor){return!!t.classRegistry.getIdentifier(e.constructor)}return!1}const ya=compositeTransformation(isInstanceOfRegisteredClass,((e,t)=>["class",t.classRegistry.getIdentifier(e.constructor)]),((e,t)=>{const r=t.classRegistry.getAllowedProps(e.constructor);if(!r)return{...e};const n={};return r.forEach((t=>{n[t]=e[t]})),n}),((e,t,r)=>{const n=r.classRegistry.getValue(t[1]);if(!n)throw new Error("Trying to deserialize unknown class - check https://github.com/blitz-js/superjson/issues/116#issuecomment-773996564");return Object.assign(Object.create(n.prototype),e)})),ga=compositeTransformation(((e,t)=>!!t.customTransformerRegistry.findApplicable(e)),((e,t)=>["custom",t.customTransformerRegistry.findApplicable(e).name]),((e,t)=>t.customTransformerRegistry.findApplicable(e).serialize(e)),((e,t,r)=>{const n=r.customTransformerRegistry.findByName(t[1]);if(!n)throw new Error("Trying to deserialize unknown custom value");return n.deserialize(e)})),ba=[ya,pa,ga,ma],transformValue=(e,t)=>{const r=findArr(ba,(r=>r.isApplicable(e,t)));if(r)return{value:r.transform(e,t),type:r.annotation(e,t)};const n=findArr(fa,(r=>r.isApplicable(e,t)));return n?{value:n.transform(e,t),type:n.annotation}:void 0},_a={};fa.forEach((e=>{_a[e.annotation]=e}));const getNthKey=(e,t)=>{const r=e.keys();for(;t>0;)r.next(),t--;return r.next().value};function validatePath(e){if(includes(e,"__proto__"))throw new Error("__proto__ is not allowed as a property");if(includes(e,"prototype"))throw new Error("prototype is not allowed as a property");if(includes(e,"constructor"))throw new Error("constructor is not allowed as a property")}const setDeep=(e,t,r)=>{if(validatePath(t),0===t.length)return r(e);let n=e;for(let e=0;e<t.length-1;e++){const r=t[e];if(isArray$1(n)){n=n[+r]}else if(isPlainObject$1(n))n=n[r];else if(isSet(n)){n=getNthKey(n,+r)}else if(isMap(n)){if(e===t.length-2)break;const s=+r,i=0==+t[++e]?"key":"value",o=getNthKey(n,s);switch(i){case"key":n=o;break;case"value":n=n.get(o)}}}const s=t[t.length-1];if(isArray$1(n)?n[+s]=r(n[+s]):isPlainObject$1(n)&&(n[s]=r(n[s])),isSet(n)){const e=getNthKey(n,+s),t=r(e);e!==t&&(n.delete(e),n.add(t))}if(isMap(n)){const e=+t[t.length-2],i=getNthKey(n,e);switch(0==+s?"key":"value"){case"key":{const e=r(i);n.set(e,n.get(i)),e!==i&&n.delete(i);break}case"value":n.set(i,r(n.get(i)))}}return e};function traverse(e,t,r=[]){if(!e)return;if(!isArray$1(e))return void forEach(e,((e,n)=>traverse(e,t,[...r,...parsePath(n)])));const[n,s]=e;s&&forEach(s,((e,n)=>{traverse(e,t,[...r,...parsePath(n)])})),t(n,r)}function applyValueAnnotations(e,t,r){return traverse(t,((t,n)=>{e=setDeep(e,n,(e=>((e,t,r)=>{if(!isArray$1(t)){const n=_a[t];if(!n)throw new Error("Unknown transformation: "+t);return n.untransform(e,r)}switch(t[0]){case"symbol":return pa.untransform(e,t,r);case"class":return ya.untransform(e,t,r);case"custom":return ga.untransform(e,t,r);case"typed-array":return ma.untransform(e,t,r);default:throw new Error("Unknown transformation: "+t)}})(e,t,r)))})),e}function applyReferentialEqualityAnnotations(e,t){function apply(t,r){const n=((e,t)=>{validatePath(t);for(let r=0;r<t.length;r++){const n=t[r];if(isSet(e))e=getNthKey(e,+n);else if(isMap(e)){const s=+n,i=0==+t[++r]?"key":"value",o=getNthKey(e,s);switch(i){case"key":e=o;break;case"value":e=e.get(o)}}else e=e[n]}return e})(e,parsePath(r));t.map(parsePath).forEach((t=>{e=setDeep(e,t,(()=>n))}))}if(isArray$1(t)){const[r,n]=t;r.forEach((t=>{e=setDeep(e,parsePath(t),(()=>e))})),n&&forEach(n,apply)}else forEach(t,apply);return e}const walker=(e,t,r,n,s=[],i=[],o=new Map)=>{const a=isPrimitive(e);if(!a){!function(e,t,r){const n=r.get(e);n?n.push(t):r.set(e,[t])}(e,s,t);const r=o.get(e);if(r)return n?{transformedValue:null}:r}if(!((e,t)=>isPlainObject$1(e)||isArray$1(e)||isMap(e)||isSet(e)||isInstanceOfRegisteredClass(e,t))(e,r)){const t=transformValue(e,r),n=t?{transformedValue:t.value,annotations:[t.type]}:{transformedValue:e};return a||o.set(e,n),n}if(includes(i,e))return{transformedValue:null};const c=transformValue(e,r),l=c?.value??e,u=isArray$1(l)?[]:{},d={};forEach(l,((a,c)=>{if("__proto__"===c||"constructor"===c||"prototype"===c)throw new Error(`Detected property ${c}. This is a prototype pollution risk, please remove it from your object.`);const l=walker(a,t,r,n,[...s,c],[...i,e],o);u[c]=l.transformedValue,isArray$1(l.annotations)?d[c]=l.annotations:isPlainObject$1(l.annotations)&&forEach(l.annotations,((e,t)=>{d[escapeKey(c)+"."+t]=e}))}));const f=isEmptyObject(d)?{transformedValue:u,annotations:c?[c.type]:void 0}:{transformedValue:u,annotations:c?[c.type,d]:d};return a||o.set(e,f),f};function getType(e){return Object.prototype.toString.call(e).slice(8,-1)}function isArray(e){return"Array"===getType(e)}function copy(e,t={}){if(isArray(e))return e.map((e=>copy(e,t)));if(!function(e){if("Object"!==getType(e))return!1;const t=Object.getPrototypeOf(e);return!!t&&t.constructor===Object&&t===Object.prototype}(e))return e;return[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)].reduce(((r,n)=>{if(isArray(t.props)&&!t.props.includes(n))return r;return function(e,t,r,n,s){const i={}.propertyIsEnumerable.call(n,t)?"enumerable":"nonenumerable";"enumerable"===i&&(e[t]=r),s&&"nonenumerable"===i&&Object.defineProperty(e,t,{value:r,enumerable:!1,writable:!0,configurable:!0})}(r,n,copy(e[n],t),e,t.nonenumerable),r}),{})}class SuperJSON{constructor({dedupe:e=!1}={}){this.classRegistry=new ClassRegistry,this.symbolRegistry=new Registry((e=>e.description??"")),this.customTransformerRegistry=new CustomTransformerRegistry,this.allowedErrorProps=[],this.dedupe=e}serialize(e){const t=new Map,r=walker(e,t,this,this.dedupe),n={json:r.transformedValue};r.annotations&&(n.meta={...n.meta,values:r.annotations});const s=function(e,t){const r={};let n;return e.forEach((e=>{if(e.length<=1)return;t||(e=e.map((e=>e.map(String))).sort(((e,t)=>e.length-t.length)));const[s,...i]=e;0===s.length?n=i.map(stringifyPath):r[stringifyPath(s)]=i.map(stringifyPath)})),n?isEmptyObject(r)?[n]:[n,r]:isEmptyObject(r)?void 0:r}(t,this.dedupe);return s&&(n.meta={...n.meta,referentialEqualities:s}),n}deserialize(e){const{json:t,meta:r}=e;let n=copy(t);return r?.values&&(n=applyValueAnnotations(n,r.values,this)),r?.referentialEqualities&&(n=applyReferentialEqualityAnnotations(n,r.referentialEqualities)),n}stringify(e){return JSON.stringify(this.serialize(e))}parse(e){return this.deserialize(JSON.parse(e))}registerClass(e,t){this.classRegistry.register(e,t)}registerSymbol(e,t){this.symbolRegistry.register(e,t)}registerCustom(e,t){this.customTransformerRegistry.register({name:t,...e})}allowErrorProps(...e){this.allowedErrorProps.push(...e)}}SuperJSON.defaultInstance=new SuperJSON,SuperJSON.serialize=SuperJSON.defaultInstance.serialize.bind(SuperJSON.defaultInstance),SuperJSON.deserialize=SuperJSON.defaultInstance.deserialize.bind(SuperJSON.defaultInstance),SuperJSON.stringify=SuperJSON.defaultInstance.stringify.bind(SuperJSON.defaultInstance),SuperJSON.parse=SuperJSON.defaultInstance.parse.bind(SuperJSON.defaultInstance),SuperJSON.registerClass=SuperJSON.defaultInstance.registerClass.bind(SuperJSON.defaultInstance),SuperJSON.registerSymbol=SuperJSON.defaultInstance.registerSymbol.bind(SuperJSON.defaultInstance),SuperJSON.registerCustom=SuperJSON.defaultInstance.registerCustom.bind(SuperJSON.defaultInstance),SuperJSON.allowErrorProps=SuperJSON.defaultInstance.allowErrorProps.bind(SuperJSON.defaultInstance),SuperJSON.serialize,SuperJSON.deserialize,SuperJSON.stringify,SuperJSON.parse,SuperJSON.registerClass,SuperJSON.registerCustom,SuperJSON.registerSymbol,SuperJSON.allowErrorProps;const wa=new TextDecoder("utf-8");function decode(e){return e?wa.decode(uint8Array(e)):""}function uint8Array(e){return Uint8Array.from(function(e){return e.split("").map((e=>e.charCodeAt(0)))}(e))}function format(e,t){return Array.isArray(t)?function(e,t){let r=0;return e.replace(/\?/g,(e=>r<t.length?sanitize(t[r++]):e))}(e,t):function(e,t){return e.replace(/:(\w+)/g,((e,r)=>function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(t,r)?sanitize(t[r]):e))}(e,t)}function sanitize(e){return null==e?"null":["number","bigint"].includes(typeof e)?String(e):"boolean"==typeof e?e?"true":"false":"string"==typeof e?quote(e):Array.isArray(e)?e.map(sanitize).join(", "):e instanceof Date?quote(e.toISOString().slice(0,-1)):e instanceof Uint8Array?(t=e,`0x${Array.from(t).map((e=>e.toString(16).padStart(2,"0"))).join("")}`):quote(e.toString());var t}function quote(e){return`'${function(e){return e.replace(va,replacement)}(e)}'`}const va=/[\0\b\n\r\t\x1a\\"']/g;function replacement(e){switch(e){case'"':return'\\"';case"'":return"\\'";case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\\t";case"\\":return"\\\\";case"\0":return"\\0";case"\b":return"\\b";case"":return"\\Z";default:return""}}class DatabaseError extends Error{constructor(e,t,r){super(e),this.status=t,this.name="DatabaseError",this.body=r}}class Tx{constructor(e){this.conn=e}async execute(e,t=null,r={as:"object"}){return this.conn.execute(e,t,r)}}class Connection{constructor(e){if(this.config=e,this.fetch=e.fetch||fetch,this.session=null,e.url){const t=new URL(e.url);this.config.username=t.username,this.config.password=t.password,this.config.host=t.hostname,this.url=function(e){const t=`${function(e){return"http:"===e?e:"https:"}(e.protocol)}//`;return new URL(e.pathname,`${t}${e.host}`).toString()}(t)}else this.url=new URL(`https://${this.config.host}`).toString()}async transaction(e){const t=new Connection(this.config),r=new Tx(t);try{await r.execute("BEGIN");const t=await e(r);return await r.execute("COMMIT"),t}catch(e){throw await r.execute("ROLLBACK"),e}}async refresh(){await this.createSession()}async execute(e,t=null,r={as:"object"}){const n=new URL("/psdb.v1alpha1.Database/Execute",this.url),s=this.config.format||format,i=t?s(e,t):e,o=await postJSON(this.config,this.fetch,n,{query:i,session:this.session}),{result:a,session:c,error:l,timing:u}=o;if(c&&(this.session=c),l)throw new DatabaseError(l.message,400,l);const d=a?.rowsAffected?parseInt(a.rowsAffected,10):0,f=a?.insertId??"0",p=a?.fields??[];for(const e of p)e.type||(e.type="NULL");const h=r.cast||this.config.cast||cast,m=a?function(e,t,r){const n=e.fields??[],s=e.rows??[];return s.map((e=>"array"===r?function(e,t,r){const n=decodeRow(t);return e.map(((e,t)=>r(e,n[t])))}(n,e,t):function(e,t,r){const n=decodeRow(t);return e.reduce(((e,t,s)=>(e[t.name]=r(t,n[s]),e)),{})}(n,e,t)))}(a,h,r.as||"object"):[],y=p.map((e=>e.name)),g=p.reduce(((e,{name:t,type:r})=>({...e,[t]:r})),{}),b=u??0;return{headers:y,types:g,fields:p,rows:m,rowsAffected:d,insertId:f,size:m.length,statement:i,time:1e3*b}}async createSession(){const e=new URL("/psdb.v1alpha1.Database/CreateSession",this.url),{session:t}=await postJSON(this.config,this.fetch,e);return this.session=t,t}}async function postJSON(e,t,r,n={}){const s=btoa(`${e.username}:${e.password}`),i=await t(r.toString(),{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json","User-Agent":"database-js/1.16.0",Authorization:`Basic ${s}`},cache:"no-store"});if(i.ok)return await i.json();{let e=null;try{const t=(await i.json()).error;e=new DatabaseError(t.message,i.status,t)}catch{e=new DatabaseError(i.statusText,i.status,{code:"internal",message:i.statusText})}throw e}}function decodeRow(e){const t=e.values?atob(e.values):"";let r=0;return e.lengths.map((e=>{const n=parseInt(e,10);if(n<0)return null;const s=t.substring(r,r+n);return r+=n,s}))}function cast(e,t){if(null==t)return t;switch(e.type){case"INT8":case"INT16":case"INT24":case"INT32":case"UINT8":case"UINT16":case"UINT24":case"UINT32":case"YEAR":return parseInt(t,10);case"FLOAT32":case"FLOAT64":return parseFloat(t);case"DECIMAL":case"INT64":case"UINT64":case"DATE":case"TIME":case"DATETIME":case"TIMESTAMP":return t;case"BLOB":case"BIT":case"GEOMETRY":return uint8Array(t);case"BINARY":case"VARBINARY":return function(e){return((e.flags??0)&Sa.ISTEXT)===Sa.ISTEXT}(e)?t:uint8Array(t);case"JSON":return t?JSON.parse(decode(t)):t;default:return decode(t)}}var Sa;!function(e){e[e.NONE=0]="NONE",e[e.ISINTEGRAL=256]="ISINTEGRAL",e[e.ISUNSIGNED=512]="ISUNSIGNED",e[e.ISFLOAT=1024]="ISFLOAT",e[e.ISQUOTED=2048]="ISQUOTED",e[e.ISTEXT=4096]="ISTEXT",e[e.ISBINARY=8192]="ISBINARY"}(Sa||(Sa={}));class PlanetScalePreparedQuery extends PreparedQuery{constructor(e,t,r,n,s,i){super(),this.client=e,this.queryString=t,this.params=r,this.logger=n,this.fields=s,this.customResultMapper=i}static[st]="PlanetScalePreparedQuery";rawQuery={as:"object"};query={as:"array"};async execute(e={}){const t=function(e,t){return e.map((e=>{if(is(e,Placeholder)){if(!(e.name in t))throw new Error(`No value for placeholder "${e.name}" was provided`);return t[e.name]}return e}))}(this.params,e);this.logger.logQuery(this.queryString,t);const{fields:r,client:n,queryString:s,rawQuery:i,query:o,joinsNotNullableMap:a,customResultMapper:c}=this;if(!r&&!c)return n.execute(s,t,i);const{rows:l}=await n.execute(s,t,o);return c?c(l):l.map((e=>function(e,t,r){const n={},s=e.reduce(((e,{path:s,field:i},o)=>{let a;a=is(i,Column)?i:is(i,SQL)?i.decoder:i.sql.decoder;let c=e;for(const[e,l]of s.entries())if(e<s.length-1)l in c||(c[l]={}),c=c[l];else{const e=t[o],u=c[l]=null===e?null:a.mapFromDriverValue(e);if(r&&is(i,Column)&&2===s.length){const e=s[0];e in n?"string"==typeof n[e]&&n[e]!==getTableName(i.table)&&(n[e]=!1):n[e]=null===u&&getTableName(i.table)}}return e}),{});if(r&&Object.keys(n).length>0)for(const[e,t]of Object.entries(n))"string"!=typeof t||r[t]||(s[e]=null);return s}(r,e,a)))}iterator(e){throw new Error("Streaming is not supported by the PlanetScale Serverless driver")}}class PlanetscaleSession extends MySqlSession{constructor(e,t,r,n,s={}){super(t),this.baseClient=e,this.schema=n,this.options=s,this.client=r??e,this.logger=s.logger??new NoopLogger}static[st]="PlanetscaleSession";logger;client;prepareQuery(e,t,r){return new PlanetScalePreparedQuery(this.client,e.sql,e.params,this.logger,t,r)}async query(e,t){return this.logger.logQuery(e,t),await this.client.execute(e,t,{as:"array"})}async queryObjects(e,t){return this.client.execute(e,t,{as:"object"})}all(e){const t=this.dialect.sqlToQuery(e);return this.logger.logQuery(t.sql,t.params),this.client.execute(t.sql,t.params,{as:"object"}).then((e=>e.rows))}transaction(e){return this.baseClient.transaction((t=>{const r=new PlanetscaleSession(this.baseClient,this.dialect,t,this.schema,this.options),n=new PlanetScaleTransaction(this.dialect,r,this.schema);return e(n)}))}}class PlanetScaleTransaction extends MySqlTransaction{static[st]="PlanetScaleTransaction";constructor(e,t,r,n=0){super(e,t,r,n,"planetscale")}async transaction(e){const t=`sp${this.nestedIndex+1}`,r=new PlanetScaleTransaction(this.dialect,this.session,this.schema,this.nestedIndex+1);await r.execute(sql.raw(`savepoint ${t}`));try{const n=await e(r);return await r.execute(sql.raw(`release savepoint ${t}`)),n}catch(e){throw await r.execute(sql.raw(`rollback to savepoint ${t}`)),e}}}const deserializeInputValue=(e,t)=>void 0!==e?t.input.deserialize(e):e,getJsonContentTypeInputs=e=>{const t=function(e){const{req:t}=e;try{if("GET"===t.method){if(!t.query.has("input"))return;const e=t.query.get("input");return JSON.parse(e)}return e.preprocessedBody||"string"!=typeof t.body?t.body:0===t.body.length?void 0:JSON.parse(t.body)}catch(e){throw new TRPCError({code:"PARSE_ERROR",cause:e})}}(e),r=e.router._def._config.transformer;if(!e.isBatchCall)return{0:deserializeInputValue(t,r)};if(null==t||"object"!=typeof t||Array.isArray(t))throw new TRPCError({code:"BAD_REQUEST",message:'"input" needs to be an object when doing a batch call'});const n={};for(const e in t){const s=e,i=t[s],o=deserializeInputValue(i,r);n[s]=o}return n},Ia={GET:"query",POST:"mutation"},ka={getInputs:getJsonContentTypeInputs};function initResponse(e){const{ctx:t,paths:r,type:n,responseMeta:s,untransformedJSON:i,errors:o=[]}=e;let a=i?function(e){const t=Array.isArray(e)?e:[e],r=new Set(t.map((e=>{if("error"in e){const t=e.error.data;return"number"==typeof t.httpStatus?t.httpStatus:getStatusCodeFromKey(so[e.error.code])}return 200})));return 1!==r.size?207:r.values().next().value}(i):200;const c={"Content-Type":"application/json"},l=!i,u=l?[]:Array.isArray(i)?i:[i],d=s?.({ctx:t,paths:r,type:n,data:u,errors:o,eagerGeneration:l})??{};for(const[e,t]of Object.entries(d.headers??{}))c[e]=t;return d.status&&(a=d.status),{status:a,headers:c}}function caughtErrorToData(e,t){const{router:r,req:n,onError:s}=t.opts,i=getTRPCErrorFromUnknown(e);s?.({error:i,path:t.path,input:t.input,ctx:t.ctx,type:t.type,req:n});const o={error:getErrorShape({config:r._def._config,error:i,type:t.type,path:t.path,input:t.input,ctx:t.ctx})},a=transformTRPCResponse(r._def._config,o);return{error:i,untransformedJSON:o,body:JSON.stringify(a)}}async function resolveHTTPResponse(e){const{router:t,req:r,unstable_onHead:n,unstable_onChunk:s}=e;if("HEAD"===r.method){const e={status:204};return n?.(e,!1),s?.([-1,""]),e}const i=e.contentTypeHandler??ka,o=e.batching?.enabled??!0,a=Ia[r.method]??"unknown";let c,l;const u=!!r.query.get("batch"),d=u&&n&&s&&"stream"===r.headers["trpc-batch-mode"];try{if(e.error)throw e.error;if(u&&!o)throw new Error("Batching is not enabled on the server");if("subscription"===a)throw new TRPCError({message:"Subscriptions should use wsLink",code:"METHOD_NOT_SUPPORTED"});if("unknown"===a)throw new TRPCError({message:`Unexpected request method ${r.method}`,code:"METHOD_NOT_SUPPORTED"});const f=await i.getInputs({isBatchCall:u,req:r,router:t,preprocessedBody:e.preprocessedBody??!1});l=u?decodeURIComponent(e.path).split(","):[e.path];const p={isBatchCall:u,calls:l.map(((e,t)=>({path:e,type:a,input:f[t]??void 0})))};c=await e.createContext({info:p});const h=[],m=l.map((async(t,r)=>{const n=f[r];try{const r=await function(e){const{type:t,path:r}=e,n=e.procedures[r];if(!n||!isProcedure(n)||n._def.type!==t)throw new TRPCError({code:"NOT_FOUND",message:`No "${t}"-procedure on path "${r}"`});return n(e)}({procedures:e.router._def.procedures,path:t,getRawInput:async()=>n,ctx:c,type:a});return{result:{data:r}}}catch(r){const s=getTRPCErrorFromUnknown(r);return h.push(s),e.onError?.({error:s,path:t,input:n,ctx:c,type:a,req:e.req}),{error:getErrorShape({config:e.router._def._config,error:s,type:a,path:t,input:n,ctx:c})}}}));if(!d){const r=await Promise.all(m),i=initResponse({ctx:c,paths:l,type:a,responseMeta:e.responseMeta,untransformedJSON:r,errors:h});n?.(i,!1);const o=u?r:r[0],d=transformTRPCResponse(t._def._config,o),f=JSON.stringify(d);return s?.([-1,f]),{status:i.status,headers:i.headers,body:f}}n(initResponse({ctx:c,paths:l,type:a,responseMeta:e.responseMeta}),!0);const y=new Map(m.map(((e,t)=>[t,e.then((e=>[t,e]))])));for(const r of l){const[r,n]=await Promise.race(y.values());y.delete(r);try{const e=transformTRPCResponse(t._def._config,n);s([r,JSON.stringify(e)])}catch(t){const n=l[r],i=f[r],{body:o}=caughtErrorToData(t,{opts:e,ctx:c,type:a,path:n,input:i});s([r,o])}}return}catch(t){const{error:r,untransformedJSON:i,body:o}=caughtErrorToData(t,{opts:e,ctx:c,type:a}),u=initResponse({ctx:c,paths:l,type:a,responseMeta:e.responseMeta,untransformedJSON:i,errors:[r]});return n?.(u,!1),s?.([-1,o]),{status:u.status,headers:u.headers,body:o}}}const Ta=(Ea={isMatch:e=>!!e.req.headers["content-type"]?.startsWith("application/json"),getBody:async function(e){const{req:t,maxBodySize:r=1/0}=e;return new Promise((e=>{if("body"in t)return void e({ok:!0,data:t.body,preprocessed:!!t.headers["content-type"]?.startsWith("application/json")});let n="",s=!1;t.on("data",(function(t){n+=t,s=!0,n.length>r&&e({ok:!1,error:new TRPCError({code:"PAYLOAD_TOO_LARGE"})})})),t.on("end",(()=>{e({ok:!0,data:s?n:void 0,preprocessed:!1})}))}))},getInputs:getJsonContentTypeInputs},()=>Ea);var Ea;const Oa=Ta();var xa={exports:{}},Ca={exports:{}},Pa={};Object.defineProperty(Pa,"__esModule",{value:!0}),Pa.WriteStream=Pa.StatsFs=Pa.Stats=Pa.ReadStream=Pa.FileWriteStream=Pa.FileReadStream=Pa.Dirent=Pa.Dir=void 0;var Aa,Na=(Aa=et)&&Aa.__esModule?Aa:{default:Aa};Pa.Dir=Na.default.__createMock__("fs.Dir"),Pa.Dirent=Na.default.__createMock__("fs.Dirent"),Pa.Stats=Na.default.__createMock__("fs.Stats"),Pa.ReadStream=Na.default.__createMock__("fs.ReadStream"),Pa.WriteStream=Na.default.__createMock__("fs.WriteStream"),Pa.FileReadStream=Na.default.__createMock__("fs.FileReadStream"),Pa.FileWriteStream=Na.default.__createMock__("fs.FileWriteStream"),Pa.StatsFs=Na.default.__createMock__("fs.StatsFs");var Ra={};Object.defineProperty(Ra,"__esModule",{value:!0}),Ra.constants=Ra.X_OK=Ra.W_OK=Ra.R_OK=Ra.F_OK=void 0,Ra.F_OK=0,Ra.R_OK=4,Ra.W_OK=2,Ra.X_OK=1,Ra.constants=Object.create({UV_FS_SYMLINK_DIR:1,UV_FS_SYMLINK_JUNCTION:2,O_RDONLY:0,O_WRONLY:1,O_RDWR:2,UV_DIRENT_UNKNOWN:0,UV_DIRENT_FILE:1,UV_DIRENT_DIR:2,UV_DIRENT_LINK:3,UV_DIRENT_FIFO:4,UV_DIRENT_SOCKET:5,UV_DIRENT_CHAR:6,UV_DIRENT_BLOCK:7,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:64,O_EXCL:128,UV_FS_O_FILEMAP:0,O_NOCTTY:256,O_TRUNC:512,O_APPEND:1024,O_DIRECTORY:65536,O_NOATIME:262144,O_NOFOLLOW:131072,O_SYNC:1052672,O_DSYNC:4096,O_DIRECT:16384,O_NONBLOCK:2048,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_FS_COPYFILE_EXCL:1,COPYFILE_EXCL:1,UV_FS_COPYFILE_FICLONE:2,COPYFILE_FICLONE:2,UV_FS_COPYFILE_FICLONE_FORCE:4,COPYFILE_FICLONE_FORCE:4});var ja={},qa={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.chown=t.chmod=t.appendFile=t.access=void 0,Object.defineProperty(t,"constants",{enumerable:!0,get:function(){return n.constants}}),t.writeFile=t.watch=t.utimes=t.unlink=t.truncate=t.symlink=t.statfs=t.stat=t.rmdir=t.rm=t.rename=t.realpath=t.readlink=t.readdir=t.readFile=t.opendir=t.open=t.mkdtemp=t.mkdir=t.lutimes=t.lstat=t.link=t.lchown=t.lchmod=t.default=t.cp=t.copyFile=void 0;var r=vo,n=Ra;t.access=(0,r.notImplemented)("fs.access"),t.copyFile=(0,r.notImplemented)("fs.copyFile"),t.cp=(0,r.notImplemented)("fs.cp"),t.open=(0,r.notImplemented)("fs.open"),t.opendir=(0,r.notImplemented)("fs.opendir"),t.rename=(0,r.notImplemented)("fs.rename"),t.truncate=(0,r.notImplemented)("fs.truncate"),t.rm=(0,r.notImplemented)("fs.rm"),t.rmdir=(0,r.notImplemented)("fs.rmdir"),t.mkdir=(0,r.notImplemented)("fs.mkdir"),t.readdir=(0,r.notImplemented)("fs.readdir"),t.readlink=(0,r.notImplemented)("fs.readlink"),t.symlink=(0,r.notImplemented)("fs.symlink"),t.lstat=(0,r.notImplemented)("fs.lstat"),t.stat=(0,r.notImplemented)("fs.stat"),t.link=(0,r.notImplemented)("fs.link"),t.unlink=(0,r.notImplemented)("fs.unlink"),t.chmod=(0,r.notImplemented)("fs.chmod"),t.lchmod=(0,r.notImplemented)("fs.lchmod"),t.lchown=(0,r.notImplemented)("fs.lchown"),t.chown=(0,r.notImplemented)("fs.chown"),t.utimes=(0,r.notImplemented)("fs.utimes"),t.lutimes=(0,r.notImplemented)("fs.lutimes"),t.realpath=(0,r.notImplemented)("fs.realpath"),t.mkdtemp=(0,r.notImplemented)("fs.mkdtemp"),t.writeFile=(0,r.notImplemented)("fs.writeFile"),t.appendFile=(0,r.notImplemented)("fs.appendFile"),t.readFile=(0,r.notImplemented)("fs.readFile"),t.watch=(0,r.notImplemented)("fs.watch"),t.statfs=(0,r.notImplemented)("fs.statfs"),e.exports={}}(qa,qa.exports);var $a=qa.exports;Object.defineProperty(ja,"__esModule",{value:!0}),ja.writevSync=ja.writev=ja.writeSync=ja.writeFileSync=ja.writeFile=ja.write=ja.watchFile=ja.watch=ja.utimesSync=ja.utimes=ja.unwatchFile=ja.unlinkSync=ja.unlink=ja.truncateSync=ja.truncate=ja.symlinkSync=ja.symlink=ja.statfsSync=ja.statfs=ja.statSync=ja.stat=ja.rmdirSync=ja.rmdir=ja.rmSync=ja.rm=ja.renameSync=ja.rename=ja.realpathSync=ja.realpath=ja.readvSync=ja.readv=ja.readlinkSync=ja.readlink=ja.readdirSync=ja.readdir=ja.readSync=ja.readFileSync=ja.readFile=ja.read=ja.opendirSync=ja.opendir=ja.openSync=ja.openAsBlob=ja.open=ja.mkdtempSync=ja.mkdtemp=ja.mkdirSync=ja.mkdir=ja.lutimesSync=ja.lutimes=ja.lstatSync=ja.lstat=ja.linkSync=ja.link=ja.lchownSync=ja.lchown=ja.lchmodSync=ja.lchmod=ja.futimesSync=ja.futimes=ja.ftruncateSync=ja.ftruncate=ja.fsyncSync=ja.fsync=ja.fstatSync=ja.fstat=ja.fdatasyncSync=ja.fdatasync=ja.fchownSync=ja.fchown=ja.fchmodSync=ja.fchmod=ja.existsSync=ja.exists=ja.createWriteStream=ja.createReadStream=ja.cpSync=ja.cp=ja.copyFileSync=ja.copyFile=ja.closeSync=ja.close=ja.chownSync=ja.chown=ja.chmodSync=ja.chmod=ja.appendFileSync=ja.appendFile=ja.accessSync=ja.access=ja._toUnixTimestamp=void 0;var Ma=vo,Ba=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=_getRequireWildcardCache(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=s?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}($a);function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache=function(e){return e?r:t})(e)}function notImplementedAsync(e){const t=(0,Ma.notImplemented)(e);return t.__promisify__=()=>(0,Ma.notImplemented)(e+".__promisify__"),t.native=t,t}function callbackify(e){const fnc=function(...t){const r=t.pop();e().catch((e=>r(e))).then((e=>r(void 0,e)))};return fnc.__promisify__=e,fnc.native=fnc,fnc}ja.access=callbackify(Ba.access),ja.appendFile=callbackify(Ba.appendFile),ja.chown=callbackify(Ba.chown),ja.chmod=callbackify(Ba.chmod),ja.copyFile=callbackify(Ba.copyFile),ja.cp=callbackify(Ba.cp),ja.lchown=callbackify(Ba.lchown),ja.lchmod=callbackify(Ba.lchmod),ja.link=callbackify(Ba.link),ja.lstat=callbackify(Ba.lstat),ja.lutimes=callbackify(Ba.lutimes),ja.mkdir=callbackify(Ba.mkdir),ja.mkdtemp=callbackify(Ba.mkdtemp),ja.realpath=callbackify(Ba.realpath),ja.open=callbackify(Ba.open),ja.opendir=callbackify(Ba.opendir),ja.readdir=callbackify(Ba.readdir),ja.readFile=callbackify(Ba.readFile),ja.readlink=callbackify(Ba.readlink),ja.rename=callbackify(Ba.rename),ja.rm=callbackify(Ba.rm),ja.rmdir=callbackify(Ba.rmdir),ja.stat=callbackify(Ba.stat),ja.symlink=callbackify(Ba.symlink),ja.truncate=callbackify(Ba.truncate),ja.unlink=callbackify(Ba.unlink),ja.utimes=callbackify(Ba.utimes),ja.writeFile=callbackify(Ba.writeFile),ja.statfs=callbackify(Ba.statfs),ja.close=notImplementedAsync("fs.close"),ja.createReadStream=notImplementedAsync("fs.createReadStream"),ja.createWriteStream=notImplementedAsync("fs.createWriteStream"),ja.exists=notImplementedAsync("fs.exists"),ja.fchown=notImplementedAsync("fs.fchown"),ja.fchmod=notImplementedAsync("fs.fchmod"),ja.fdatasync=notImplementedAsync("fs.fdatasync"),ja.fstat=notImplementedAsync("fs.fstat"),ja.fsync=notImplementedAsync("fs.fsync"),ja.ftruncate=notImplementedAsync("fs.ftruncate"),ja.futimes=notImplementedAsync("fs.futimes"),ja.lstatSync=notImplementedAsync("fs.lstatSync"),ja.read=notImplementedAsync("fs.read"),ja.readv=notImplementedAsync("fs.readv"),ja.realpathSync=notImplementedAsync("fs.realpathSync"),ja.statSync=notImplementedAsync("fs.statSync"),ja.unwatchFile=notImplementedAsync("fs.unwatchFile"),ja.watch=notImplementedAsync("fs.watch"),ja.watchFile=notImplementedAsync("fs.watchFile"),ja.write=notImplementedAsync("fs.write"),ja.writev=notImplementedAsync("fs.writev"),ja._toUnixTimestamp=notImplementedAsync("fs._toUnixTimestamp"),ja.openAsBlob=notImplementedAsync("fs.openAsBlob"),ja.appendFileSync=(0,Ma.notImplemented)("fs.appendFileSync"),ja.accessSync=(0,Ma.notImplemented)("fs.accessSync"),ja.chownSync=(0,Ma.notImplemented)("fs.chownSync"),ja.chmodSync=(0,Ma.notImplemented)("fs.chmodSync"),ja.closeSync=(0,Ma.notImplemented)("fs.closeSync"),ja.copyFileSync=(0,Ma.notImplemented)("fs.copyFileSync"),ja.cpSync=(0,Ma.notImplemented)("fs.cpSync");ja.existsSync=()=>!1,ja.fchownSync=(0,Ma.notImplemented)("fs.fchownSync"),ja.fchmodSync=(0,Ma.notImplemented)("fs.fchmodSync"),ja.fdatasyncSync=(0,Ma.notImplemented)("fs.fdatasyncSync"),ja.fstatSync=(0,Ma.notImplemented)("fs.fstatSync"),ja.fsyncSync=(0,Ma.notImplemented)("fs.fsyncSync"),ja.ftruncateSync=(0,Ma.notImplemented)("fs.ftruncateSync"),ja.futimesSync=(0,Ma.notImplemented)("fs.futimesSync"),ja.lchownSync=(0,Ma.notImplemented)("fs.lchownSync"),ja.lchmodSync=(0,Ma.notImplemented)("fs.lchmodSync"),ja.linkSync=(0,Ma.notImplemented)("fs.linkSync"),ja.lutimesSync=(0,Ma.notImplemented)("fs.lutimesSync"),ja.mkdirSync=(0,Ma.notImplemented)("fs.mkdirSync"),ja.mkdtempSync=(0,Ma.notImplemented)("fs.mkdtempSync"),ja.openSync=(0,Ma.notImplemented)("fs.openSync"),ja.opendirSync=(0,Ma.notImplemented)("fs.opendirSync"),ja.readdirSync=(0,Ma.notImplemented)("fs.readdirSync"),ja.readSync=(0,Ma.notImplemented)("fs.readSync"),ja.readvSync=(0,Ma.notImplemented)("fs.readvSync"),ja.readFileSync=(0,Ma.notImplemented)("fs.readFileSync"),ja.readlinkSync=(0,Ma.notImplemented)("fs.readlinkSync"),ja.renameSync=(0,Ma.notImplemented)("fs.renameSync"),ja.rmSync=(0,Ma.notImplemented)("fs.rmSync"),ja.rmdirSync=(0,Ma.notImplemented)("fs.rmdirSync"),ja.symlinkSync=(0,Ma.notImplemented)("fs.symlinkSync"),ja.truncateSync=(0,Ma.notImplemented)("fs.truncateSync"),ja.unlinkSync=(0,Ma.notImplemented)("fs.unlinkSync"),ja.utimesSync=(0,Ma.notImplemented)("fs.utimesSync"),ja.writeFileSync=(0,Ma.notImplemented)("fs.writeFileSync"),ja.writeSync=(0,Ma.notImplemented)("fs.writeSync"),ja.writevSync=(0,Ma.notImplemented)("fs.writevSync"),ja.statfsSync=(0,Ma.notImplemented)("fs.statfsSync"),function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r={promises:!0};t.promises=t.default=void 0;var n=_interopRequireWildcard(Pa);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var s=_interopRequireWildcard(Ra);Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))}));var i=_interopRequireWildcard(ja);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var o=_interopRequireWildcard($a);function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache=function(e){return e?r:t})(e)}function _interopRequireWildcard(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=_getRequireWildcardCache(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=s?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}const a=t.promises=o;e.exports={...n,...s,...i,promises:a}}(Ca,Ca.exports);const La=Ca.exports,Ua=mo,Da=et,Za=ko,Ka={name:"dotenv",version:"16.4.4",description:"Loads environment variables from .env file",main:"lib/main.js",types:"lib/main.d.ts",exports:{".":{types:"./lib/main.d.ts",require:"./lib/main.js",default:"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},scripts:{"dts-check":"tsc --project tests/types/tsconfig.json",lint:"standard","lint-readme":"standard-markdown",pretest:"npm run lint && npm run dts-check",test:"tap tests/*.js --100 -Rspec","test:coverage":"tap --coverage-report=lcov",prerelease:"npm test",release:"standard-version"},repository:{type:"git",url:"git://github.com/motdotla/dotenv.git"},funding:"https://dotenvx.com",keywords:["dotenv","env",".env","environment","variables","config","settings"],readmeFilename:"README.md",license:"BSD-2-Clause",devDependencies:{"@definitelytyped/dtslint":"^0.0.133","@types/node":"^18.11.3",decache:"^4.6.1",sinon:"^14.0.1",standard:"^17.0.0","standard-markdown":"^7.1.0","standard-version":"^9.5.0",tap:"^16.3.0",tar:"^6.1.11",typescript:"^4.8.4"},engines:{node:">=12"},browser:{fs:!1}}.version,Fa=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/gm;function _debug(e){console.log(`[dotenv@${Ka}][DEBUG] ${e}`)}function _dotenvKey(e){return e&&e.DOTENV_KEY&&e.DOTENV_KEY.length>0?e.DOTENV_KEY:process.env.DOTENV_KEY&&process.env.DOTENV_KEY.length>0?process.env.DOTENV_KEY:""}function _instructions(e,t){let r;try{r=new URL(t)}catch(e){if("ERR_INVALID_URL"===e.code){const e=new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development");throw e.code="INVALID_DOTENV_KEY",e}throw e}const n=r.password;if(!n){const e=new Error("INVALID_DOTENV_KEY: Missing key part");throw e.code="INVALID_DOTENV_KEY",e}const s=r.searchParams.get("environment");if(!s){const e=new Error("INVALID_DOTENV_KEY: Missing environment part");throw e.code="INVALID_DOTENV_KEY",e}const i=`DOTENV_VAULT_${s.toUpperCase()}`,o=e.parsed[i];if(!o){const e=new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${i} in your .env.vault file.`);throw e.code="NOT_FOUND_DOTENV_ENVIRONMENT",e}return{ciphertext:o,key:n}}function _vaultPath(e){let t=null;if(e&&e.path&&e.path.length>0)if(Array.isArray(e.path))for(const r of e.path)La.existsSync(r)&&(t=r.endsWith(".vault")?r:`${r}.vault`);else t=e.path.endsWith(".vault")?e.path:`${e.path}.vault`;else t=Ua.resolve(process.cwd(),".env.vault");return La.existsSync(t)?t:null}function _resolveHome(e){return"~"===e[0]?Ua.join(Da.homedir(),e.slice(1)):e}const za={configDotenv:function(e){const t=Ua.resolve(process.cwd(),".env");let r="utf8";const n=Boolean(e&&e.debug);e&&e.encoding?r=e.encoding:n&&_debug("No encoding is specified. UTF-8 is used by default");let s=[];if(e&&e.path){if(Array.isArray(e.path))for(const t of e.path)La.existsSync(t)&&s.push(_resolveHome(t));else La.existsSync(e.path)&&(s=[_resolveHome(e.path)]);s.length||(s=[t])}const i=s.length?s:[t],o={};try{for(const t of i){const n=za.parse(La.readFileSync(t,{encoding:r}));za.populate(o,n,e)}let t=process.env;e&&null!=e.processEnv&&(t=e.processEnv),za.populate(t,o,e)}catch(e){return n&&_debug(`Failed to load ${i} ${e.message}`),{error:e}}return{parsed:o}},_configVault:function(e){var t;t="Loading env from encrypted .env.vault",console.log(`[dotenv@${Ka}][INFO] ${t}`);const r=za._parseVault(e);let n=process.env;return e&&null!=e.processEnv&&(n=e.processEnv),za.populate(n,r,e),{parsed:r}},_parseVault:function(e){const t=_vaultPath(e),r=za.configDotenv({path:t});if(!r.parsed){const e=new Error(`MISSING_DATA: Cannot parse ${t} for an unknown reason`);throw e.code="MISSING_DATA",e}const n=_dotenvKey(e).split(","),s=n.length;let i;for(let e=0;e<s;e++)try{const t=_instructions(r,n[e].trim());i=za.decrypt(t.ciphertext,t.key);break}catch(t){if(e+1>=s)throw t}return za.parse(i)},config:function(e){if(0===_dotenvKey(e).length)return za.configDotenv(e);const t=_vaultPath(e);return t?za._configVault(e):(r=`You set DOTENV_KEY but you are missing a .env.vault file at ${t}. Did you forget to build it?`,console.log(`[dotenv@${Ka}][WARN] ${r}`),za.configDotenv(e));var r},decrypt:function(e,t){const r=u.from(t.slice(-64),"hex");let n=u.from(e,"base64");const s=n.subarray(0,12),i=n.subarray(-16);n=n.subarray(12,-16);try{const e=Za.createDecipheriv("aes-256-gcm",r,s);return e.setAuthTag(i),`${e.update(n)}${e.final()}`}catch(e){const t=e instanceof RangeError,r="Invalid key length"===e.message,n="Unsupported state or unable to authenticate data"===e.message;if(t||r){const e=new Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)");throw e.code="INVALID_DOTENV_KEY",e}if(n){const e=new Error("DECRYPTION_FAILED: Please check your DOTENV_KEY");throw e.code="DECRYPTION_FAILED",e}throw e}},parse:function(e){const t={};let r,n=e.toString();for(n=n.replace(/\r\n?/gm,"\n");null!=(r=Fa.exec(n));){const e=r[1];let n=r[2]||"";n=n.trim();const s=n[0];n=n.replace(/^(['"`])([\s\S]*)\1$/gm,"$2"),'"'===s&&(n=n.replace(/\\n/g,"\n"),n=n.replace(/\\r/g,"\r")),t[e]=n}return t},populate:function(e,t,r={}){const n=Boolean(r&&r.debug),s=Boolean(r&&r.override);if("object"!=typeof t){const e=new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");throw e.code="OBJECT_REQUIRED",e}for(const r of Object.keys(t))Object.prototype.hasOwnProperty.call(e,r)?(!0===s&&(e[r]=t[r]),n&&_debug(!0===s?`"${r}" is already defined and WAS overwritten`:`"${r}" is already defined and was NOT overwritten`)):e[r]=t[r]}};xa.exports.configDotenv=za.configDotenv,xa.exports._configVault=za._configVault,xa.exports._parseVault=za._parseVault,xa.exports.config=za.config,xa.exports.decrypt=za.decrypt,xa.exports.parse=za.parse,xa.exports.populate=za.populate,xa.exports=za;const Ha=getDefaultExportFromCjs(xa.exports),Wa=mysqlTable("profile",{userId:varchar("user_id",{length:256}).notNull().primaryKey(),name:varchar("name",{length:50}).notNull(),handle:varchar("handle",{length:20}).notNull().unique(),imageUrl:varchar("image_url",{length:256}),bio:varchar("bio",{length:200}),createdAt:timestamp("created_at").defaultNow().notNull(),updatedAt:timestamp("updated_at").defaultNow().onUpdateNow().notNull()}),Va=relations(Wa,(({many:e})=>({ratings:e(Qa),followers:e(Ja)}))),Qa=mysqlTable("ratings",{resourceId:varchar("resource_id",{length:256}).notNull(),userId:varchar("user_id",{length:256}).notNull(),rating:function(e,t){return new MySqlTinyIntBuilder(e,t)}("rating").notNull(),content:function(e,t={}){return new MySqlTextBuilder(e,"text",t)}("content"),category:function(e,t){if(0===t.length)throw new Error(`You have an empty array for "${e}" enum values`);return new MySqlEnumColumnBuilder(e,t)}("category",["ALBUM","SONG","ARTIST"]).notNull(),createdAt:timestamp("created_at").defaultNow().notNull(),updatedAt:timestamp("updated_at").defaultNow().onUpdateNow().notNull()},(e=>({pk_ratings:primaryKey({columns:[e.resourceId,e.userId]})}))),Ja=mysqlTable("followers",{userId:varchar("user_id",{length:256}).notNull(),followingId:varchar("following_id",{length:256}).notNull()},(e=>({pk_ratings:primaryKey({columns:[e.userId,e.followingId]})}))),Ga=relations(Ja,(({one:e})=>({user:e(Wa,{fields:[Ja.userId],references:[Wa.userId]}),following:e(Wa,{fields:[Ja.followingId],references:[Wa.userId]})}))),Ya=relations(Qa,(({one:e})=>({profile:e(Wa,{fields:[Qa.userId],references:[Wa.userId]})}))),Xa=Object.freeze(Object.defineProperty({__proto__:null,followers:Ja,profile:Wa,profileRelations:Va,ratings:Qa,ratingsRelations:Ya,userFollowRelation:Ga},Symbol.toStringTag,{value:"Module"})),ec=["artists","artist","albums","album","songs","song","about","terms","onboard","api","list","playlist","support","contact","friends","messages","recommendations","notifications","settings","search","home"],tc=Rr.string().min(1,"Must be at least 1 character").max(50,"Must be less than 50 characters"),rc=Rr.string().min(1,"Must be at least 1 character").max(20,"Must be less than 20 characters").regex(/^[a-zA-Z0-9_]+$/i,"Must be letters, numbers, or _").refine((e=>!ec.includes(e.toLowerCase())||"Handle is reserved")),nc=Rr.string().max(200,"Must be less than 200 characters"),sc=b$1(Wa,{name:tc,handle:rc,bio:nc.nullable()}).pick({name:!0,handle:!0,imageUrl:!0,bio:!0}),ic=sc.extend({oldHandle:Rr.string().optional()});console.log(process.env.DATABASE_URL);const oc=function(e){return new Connection(e)}({url:process.env.DATABASE_URL}),ac=function(e,t={}){const r=new MySqlDialect;let n,s;if(!0===t.logger?n=new DefaultLogger:!1!==t.logger&&(n=t.logger),t.schema){const e=function(e,t){1===Object.keys(e).length&&"default"in e&&!is(e.default,Table)&&(e=e.default);const r={},n={},s={};for(const[o,a]of Object.entries(e))if("object"==typeof(i=a)&&null!==i&&pt in i){const e=a[Table.Symbol.Name],t=n[e];r[e]=o,s[o]={tsName:o,dbName:a[Table.Symbol.Name],schema:a[Table.Symbol.Schema],columns:a[Table.Symbol.Columns],relations:t?.relations??{},primaryKey:t?.primaryKey??[]};for(const e of Object.values(a[Table.Symbol.Columns]))e.primary&&s[o].primaryKey.push(e);const i=a[Table.Symbol.ExtraConfigBuilder]?.(a);if(i)for(const e of Object.values(i))is(e,mt)&&s[o].primaryKey.push(...e.columns)}else if(is(a,Relations)){const e=a.table[Table.Symbol.Name],i=r[e],o=a.config(t(a.table));let c;for(const[t,r]of Object.entries(o))i?s[i].relations[t]=r:(e in n||(n[e]={relations:{},primaryKey:c}),n[e].relations[t]=r)}var i;return{tables:s,tableNamesMap:r}}(t.schema,createTableRelationsHelpers);s={fullSchema:t.schema,schema:e.tables,tableNamesMap:e.tableNamesMap}}const i=new PlanetscaleSession(e,r,void 0,s,{logger:n});return new MySqlDatabase(r,i,s,"planetscale")}(oc,{schema:Xa}),cc=fo.context().create({transformer:SuperJSON});cc.createCallerFactory;const lc=cc.procedure,uc=cc.router,dc=cc.procedure.use((({ctx:e,next:t})=>{if(!e.userId)throw new TRPCError({code:"UNAUTHORIZED",message:"You must be logged in to access this resource."});return t({ctx:{...e,userId:e.userId}})})),fc=uc({get:lc.input(Rr.string()).query((async({ctx:{db:e},input:t})=>{var r;return null!=(r=await e.query.profile.findFirst({where:eq(Wa.handle,t)}))?r:null})),me:dc.query((async({ctx:{db:e,userId:t}})=>{var r;return null!=(r=await e.query.profile.findFirst({where:eq(Wa.userId,t)}))?r:null})),distribution:lc.input(Rr.string()).query((async({ctx:{db:e},input:t})=>(await e.select({rating:Qa.rating,rating_count:count(Qa.rating)}).from(Qa).where(eq(Qa.userId,t)).groupBy(Qa.rating).orderBy(Qa.rating)).reduce(((e,{rating:t,rating_count:r})=>(e[t-1]=r,e)),Array(10).fill(0)))),followCount:lc.input(Rr.object({userId:Rr.string(),type:Rr.literal("followers").or(Rr.literal("following"))})).query((async({ctx:{db:e},input:{userId:t,type:r}})=>{if(!await e.query.profile.findFirst({where:eq(Wa.userId,t)}))throw new Error("User Doesn't Exist");let n;return n="followers"===r?await e.select({count:sql`count(*)`.mapWith(Number)}).from(Ja).where(eq(Ja.followingId,t)):await e.select({count:sql`count(*)`.mapWith(Number)}).from(Ja).where(eq(Ja.userId,t)),n.length?n[0].count:0})),isFollowing:dc.input(Rr.string()).query((async({ctx:{db:e,userId:t},input:r})=>!(!t||t===r)&&!!await e.query.followers.findFirst({where:and(eq(Ja.userId,t),eq(Ja.followingId,r))}))),followProfiles:lc.input(Rr.object({profileId:Rr.string(),type:Rr.literal("followers").or(Rr.literal("following"))})).query((async({ctx:{db:e,userId:t},input:{profileId:r,type:n}})=>{const s=!!await e.query.profile.findFirst({where:eq(Wa.userId,r)});if(console.log(`\n\n\n${s}\n\n\n`),!s)throw new Error("User Doesn't Exist");return"followers"===n?(await e.query.followers.findMany({where:eq(Ja.followingId,r),with:{user:{extras:{isFollowing:sql`exists(select 1 from followers where user_id = ${t} and following_id = ${Ja.userId})`.as("isFollowing")}}}})).map((({user:e,userId:t,followingId:r})=>({userId:t,followingId:r,profile:e}))):(await e.query.followers.findMany({where:eq(Ja.userId,r),with:{following:{extras:{isFollowing:sql`exists(select 1 from followers where user_id = ${t} and following_id = ${Ja.userId})`.as("isFollowing")}}}})).map((({following:e,userId:t,followingId:r})=>({userId:t,followingId:r,profile:e})))})),create:dc.input(sc).mutation((async({ctx:{db:e,userId:t},input:r})=>{await e.insert(Wa).values({...r,userId:t}),await ro.users.updateUser(t,{publicMetadata:{onboarded:!0}})})),update:dc.input(ic).mutation((async({ctx:{db:e,userId:t},input:r})=>{await e.update(Wa).set(r).where(eq(Wa.userId,t))})),follow:dc.input(Rr.string()).mutation((async({ctx:{db:e,userId:t},input:r})=>{if(t===r)throw new Error("User Cannot Follow Themselves");if((await e.select().from(Ja).where(and(eq(Ja.userId,t),eq(Ja.followingId,r)))).length>0)throw new Error("User Already Follows");await e.insert(Ja).values({userId:t,followingId:r})})),unFollow:dc.input(Rr.string()).mutation((async({ctx:{db:e,userId:t},input:r})=>{if(t===r)throw new Error("User Cannot unFollow Themselves");if(!((await e.select().from(Ja).where(and(eq(Ja.userId,t),eq(Ja.followingId,r)))).length>0))throw new Error("User Doesn't Follow");await e.delete(Ja).where(and(eq(Ja.userId,t),eq(Ja.followingId,r)))})),handleExists:lc.input(Rr.string()).query((async({ctx:{db:e},input:t})=>!!await e.query.profile.findFirst({where:eq(Wa.handle,t)}))),search:lc.input(Rr.string()).query((async({ctx:{db:e},input:t})=>await e.query.profile.findMany({where:or(like(Wa.handle,`%${t}%`),like(Wa.name,`%${t}%`))})))});Rr.object({resourceId:Rr.string(),average:Rr.string().nullable(),total:Rr.number()});const pc=b$1(Qa,{rating:Rr.number().min(1).max(10),content:Rr.string().min(1).max(1e4)}),hc=pc.pick({resourceId:!0,category:!0}),mc=pc.pick({resourceId:!0,category:!0,rating:!0}).extend({rating:pc.shape.rating.nullable()}),yc=pc.pick({resourceId:!0,category:!0,content:!0,rating:!0});pc.pick({category:!0});const gc=Rr.object({cursor:Rr.number().min(1).max(100).optional(),limit:Rr.number().optional()}),bc=uc({get:lc.input(hc).query((async({ctx:{db:e},input:{resourceId:t,category:r}})=>({...(await e.select({average:avg(Qa.rating),total:count(Qa.rating)}).from(Qa).where(and(eq(Qa.resourceId,t),eq(Qa.category,r))))[0],resourceId:t}))),list:lc.input(hc.array()).query((async({ctx:{db:e},input:t})=>await e.select({average:avg(Qa.rating),total:count(Qa.rating),resourceId:Qa.resourceId}).from(Qa).where(inArray(Qa.resourceId,t.map((e=>e.resourceId)))).groupBy(Qa.resourceId))),trending:lc.query((async({ctx:{db:e}})=>await e.select({total:count(Qa.rating),resourceId:Qa.resourceId}).from(Qa).where(and(eq(Qa.category,"ALBUM"),gt(Qa.createdAt,new Date(Date.now()-6048e5)))).groupBy(Qa.resourceId).orderBy((({total:e})=>desc(e))).limit(20))),top:lc.query((async({ctx:{db:e}})=>await e.select({average:avg(Qa.rating),resourceId:Qa.resourceId}).from(Qa).where(eq(Qa.category,"ALBUM")).groupBy(Qa.resourceId).orderBy((({average:e})=>desc(e))).limit(20))),feed:uc({recent:lc.input(gc).query((async({ctx:{db:e},input:{limit:t=20,page:r=1}})=>await e.query.ratings.findMany({where:isNotNull(Qa.content),limit:t,offset:(r-1)*t,orderBy:(e,{desc:t})=>[t(e.createdAt)],with:{profile:!0}}))),following:dc.input(gc).query((async({ctx:{db:e,userId:t},input:{limit:r=20,page:n=1}})=>{const s=await e.query.followers.findMany({where:eq(Ja.userId,t)});return 0===s.length?[]:await e.query.ratings.findMany({where:and(inArray(Qa.userId,s.map((e=>e.followingId))),isNotNull(Qa.content)),limit:r,offset:(n-1)*r,orderBy:(e,{desc:t})=>[t(e.createdAt)],with:{profile:!0}})})),community:lc.input(gc.extend({resource:hc})).query((async({ctx:{db:e},input:{limit:t=20,cursor:r=0,resource:{resourceId:n,category:s}}})=>{const i=await e.query.ratings.findMany({where:and(eq(Qa.resourceId,n),eq(Qa.category,s),isNotNull(Qa.content)),limit:t+1,offset:r,orderBy:(e,{desc:t})=>[t(e.createdAt)],with:{profile:!0}});let o;return i.length>t&&(i.pop(),o=r+i.length),{items:i,nextCursor:o}}))}),user:uc({get:dc.input(hc).query((async({ctx:{db:e,userId:t},input:{resourceId:r,category:n}})=>await e.query.ratings.findFirst({where:and(eq(Qa.resourceId,r),eq(Qa.category,n),eq(Qa.userId,t))})||null)),getList:dc.input(hc.array()).query((async({ctx:{db:e,userId:t},input:r})=>await e.query.ratings.findMany({where:and(inArray(Qa.resourceId,r.map((e=>e.resourceId))),eq(Qa.userId,t))}))),recent:lc.input(gc.extend({profileId:Rr.string(),rating:Rr.number().optional(),category:Rr.enum(["ALBUM","SONG"]).optional()})).query((async({ctx:{db:e},input:{limit:t=20,page:r=1,rating:n,category:s,profileId:i}})=>{let o;return r<1&&(r=1),o=n&&s?and(eq(Qa.userId,i),eq(Qa.rating,n),eq(Qa.category,s)):s?and(eq(Qa.userId,i),eq(Qa.category,s)):n?and(eq(Qa.userId,i),eq(Qa.rating,n)):eq(Qa.userId,i),await e.query.ratings.findMany({limit:t,offset:(r-1)*t,orderBy:desc(Qa.updatedAt),where:o,with:{profile:!0}})}))}),rate:dc.input(mc).mutation((async({ctx:{db:e,userId:t},input:{rating:r,resourceId:n,category:s}})=>{null===r?await e.delete(Qa).where(and(eq(Qa.userId,t),eq(Qa.resourceId,n),eq(Qa.category,s))):await e.insert(Qa).values({rating:r,resourceId:n,category:s,userId:t}).onDuplicateKeyUpdate({set:{rating:r,resourceId:n,category:s,userId:t}})})),review:dc.input(yc).mutation((async({ctx:{db:e,userId:t},input:r})=>{await e.insert(Qa).values({...r,userId:t}).onDuplicateKeyUpdate({set:{...r,userId:t}})}))}),_c=uc({ratings:bc,profiles:fc,test:lc.query((async()=>"Hello World"))});Ha.config();const wc=(Sc={router:_c,createContext:async e=>{const t=new da(e.req,e.res).get("__session");if(!t)return{db:ac,userId:null};const r=ns.decodeJwt(t);return{db:ac,userId:r.payload.sub}}},async(e,t)=>{const r=function(e){const t=e.startsWith("/")?`http://127.0.0.1${e}`:e;return new URL(t)}(e.url).pathname.slice(1);await async function(e){return(e.middleware??((e,t,r)=>r()))(e.req,e.res,(async t=>{if(t)throw t;const r=e.req.query?new URLSearchParams(e.req.query):new URLSearchParams(e.req.url.split("?")[1]),n=Oa,s=(e.experimental_contentTypeHandlers??[n]).find((t=>t.isMatch({...e,query:r})))??n,i=await s.getBody({...e,query:r}),o={method:e.req.method,headers:e.req.headers,query:r,body:i.ok?i.data:void 0};let a,c=!1;return await resolveHTTPResponse({batching:e.batching,responseMeta:e.responseMeta,path:e.path,createContext:async t=>await(e.createContext?.({...e,...t})),router:e.router,req:o,error:i.ok?null:i.error,preprocessedBody:!!i.ok&&i.preprocessed,onError(t){e?.onError?.({...t,req:e.req})},contentTypeHandler:s,unstable_onHead:(t,r)=>{!("status"in t)||e.res.statusCode&&200!==e.res.statusCode||(e.res.statusCode=t.status);for(const[r,n]of Object.entries(t.headers??{}))void 0!==n&&e.res.setHeader(r,n);if(r){e.res.setHeader("Transfer-Encoding","chunked");const t=e.res.getHeader("Vary");e.res.setHeader("Vary",t?"trpc-batch-mode, "+t:"trpc-batch-mode"),c=!0,a=function(){let e=!0;function format(t,r){const n=e?"{":",";return e=!1,`${n}"${t}":${r}\n`}return format.end=()=>"}",format}(),e.res.flushHeaders()}},unstable_onChunk:([t,r])=>{-1===t?e.res.end(r):(e.res.write(a(t,r)),e.res.flush?.())}}),c&&(e.res.write(a.end()),e.res.end()),e.res}))}({...Sc,...Sc,req:e,res:t,path:r})}),vc=function(e){if(isEventHandler(e))return e;if("function"!=typeof e)throw new TypeError("Invalid handler. It should be a function:",e);return de((t=>function(e,t,r){const n=e.length>2;return new Promise(((s,i)=>{const next=e=>(n&&(r.off("close",next),r.off("error",next)),e?i(createError(e)):s(void 0));try{const i=e(t,r,next);n&&void 0===i?(r.once("close",next),r.once("error",next)):s(i)}catch(e){next(e)}}))}(e,t.node.req,t.node.res)))}(((e,t)=>(e.url=e.url.replace("/trpc",""),wc(e,t))));var Sc;const Ic=[{route:"/trpc",handler:vc,lazy:!1,middleware:!0,method:void 0},{route:"/",handler:de((e=>'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="UTF-8" />\n    <link rel="icon" type="image/svg+xml" href="/vite.svg" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <title>Vite + React + TS</title>\n    <script type="module" crossorigin src="/assets/index-BWMo8qqn.js"><\/script>\n    <link rel="stylesheet" crossorigin href="/assets/index-s0wDVhqY.css">\n    <script src="/manifest.js"><\/script>\n  </head>\n  <body class="flex h-[100svh] flex-col">\n    <div id="app"></div>\n  </body>\n</html>\n\n')),lazy:!1,middleware:!0,method:void 0}];const kc=function(){const e=useRuntimeConfig(),t=new Hookable,captureError=(e,r={})=>{const n=t.callHookParallel("error",e,r).catch((e=>{console.error("Error while capturing another error",e)}));if(r.event&&isEvent(r.event)){const t=r.event.context.nitro?.errors;t&&t.push({error:e,context:r}),r.event.waitUntil&&r.event.waitUntil(n)}},r=createApp({debug:destr(!1),onError:(e,t)=>(captureError(e,{event:t,tags:["request"]}),errorHandler(e,t)),onRequest:async e=>{await kc.hooks.callHook("request",e).catch((t=>{captureError(t,{event:e,tags:["request"]})}))},onBeforeResponse:async(e,t)=>{await kc.hooks.callHook("beforeResponse",e,t).catch((t=>{captureError(t,{event:e,tags:["request","response"]})}))},onAfterResponse:async(e,t)=>{await kc.hooks.callHook("afterResponse",e,t).catch((t=>{captureError(t,{event:e,tags:["request","response"]})}))}}),n=function(e={}){const t=createRouter$1({}),r={};let n;const s={},addRoute=(e,n,i)=>{let o=r[e];if(o||(r[e]=o={path:e,handlers:{}},t.insert(e,o)),Array.isArray(i))for(const t of i)addRoute(e,n,t);else o.handlers[i]=toEventHandler(n,0,e);return s};s.use=s.add=(e,t,r)=>addRoute(e,t,r||"all");for(const e of fe)s[e]=(t,r)=>s.add(t,r,e);return s.handler=de((r=>{let s=r.path||"/";const i=s.indexOf("?");-1!==i&&(s=s.slice(0,Math.max(0,i)));const o=t.lookup(s);if(!o||!o.handlers){if(e.preemptive||e.preemtive)throw createError({statusCode:404,name:"Not Found",statusMessage:`Cannot find any route matching ${r.path||"/"}.`});return}const a=(r.node.req.method||"get").toLowerCase();let c=o.handlers[a]||o.handlers.all;if(!c){n||(n=toRouteMatcher(t));const e=n.matchAll(s).reverse();for(const t of e){if(t.handlers[a]){c=t.handlers[a],o.handlers[a]=o.handlers[a]||c;break}if(t.handlers.all){c=t.handlers.all,o.handlers.all=o.handlers.all||c;break}}}if(!c){if(e.preemptive||e.preemtive)throw createError({statusCode:405,name:"Method Not Allowed",statusMessage:`Method ${a} is not allowed on this route.`});return}r.context.matchedRoute=o;const l=o.params||{};return r.context.params=l,Promise.resolve(c(r)).then((t=>void 0===t&&(e.preemptive||e.preemtive)?null:t))})),s}({preemptive:!0}),s=(i=toNodeListener(r),function(e){const t=new ee,r=new te(t);if(t.url=e.url||"/",t.method=e.method||"GET",t.headers={},e.headers){const r="function"==typeof e.headers.entries?e.headers.entries():Object.entries(e.headers);for(const[e,n]of r)n&&(t.headers[e.toLowerCase()]=n)}return t.headers.host=t.headers.host||e.host||"localhost",t.connection.encrypted=t.connection.encrypted||"https"===e.protocol,t.body=e.body||null,t.__unenv__=e.context,i(t,r).then((()=>{let e=r._data;(Se.has(r.statusCode)||"HEAD"===t.method.toUpperCase())&&(e=null,delete r._headers["content-length"]);const n={body:e,headers:r._headers,status:r.statusCode,statusText:r.statusMessage};return t.destroy(),r.destroy(),n}))});var i;const o=function(e,t=global.fetch){return async function(r,n){const s=r.toString();if(!s.startsWith("/"))return t(s,n);try{const t=await e({url:s,...n});return new Response(t.body,{status:t.status,statusText:t.statusText,headers:Object.fromEntries(Object.entries(t.headers).map((([e,t])=>[e,Array.isArray(t)?t.join(","):String(t)||""])))})}catch(e){return new Response(e.toString(),{status:Number.parseInt(e.statusCode||e.code)||500,statusText:e.statusText})}}}(s,globalThis.fetch),localFetch=(e,t)=>o(e,t).then((e=>function(e){return e.headers.has("set-cookie")?new Response(e.body,{status:e.status,statusText:e.statusText,headers:normalizeCookieHeaders(e.headers)}):e}(e))),a=createFetch$1({fetch:localFetch,Headers:we,defaults:{baseURL:e.app.baseURL}});globalThis.$fetch=a,r.use(createRouteRulesHandler({localFetch:localFetch})),r.use(de((e=>{e.context.nitro=e.context.nitro||{errors:[]};const t=e.node.req?.__unenv__;t&&Object.assign(e.context,t),e.fetch=(t,r)=>fetchWithEvent(e,t,r,{fetch:localFetch}),e.$fetch=(t,r)=>fetchWithEvent(e,t,r,{fetch:a}),e.waitUntil=r=>{e.context.nitro._waitUntilPromises||(e.context.nitro._waitUntilPromises=[]),e.context.nitro._waitUntilPromises.push(r),t?.waitUntil&&t.waitUntil(r)},e.captureError=(t,r)=>{captureError(t,{event:e,...r})}})));for(const t of Ic){let s=t.lazy?lazyEventHandler(t.handler):t.handler;if(t.middleware||!t.route){const n=(e.app.baseURL+(t.route||"/")).replace(/\/+/g,"/");r.use(n,s)}else{const e=getRouteRulesForPath(t.route.replace(/:\w+|\*\*/g,"_"));e.cache&&(s=cachedEventHandler(s,{group:"nitro/routes",...e.cache})),n.use(t.route,s,t.method)}}r.use(e.app.baseURL,n.handler);const c={hooks:t,h3App:r,router:n,localCall:s,localFetch:localFetch,captureError:captureError};for(const e of nt)try{e(c)}catch(e){throw captureError(e,{tags:["plugin"]}),e}return c}(),useNitroApp=()=>kc;async function handleEvent(e,t){const r=new URL(e.url);let n;return e.body&&(n=await e.arrayBuffer()),kc.localFetch(r.pathname+r.search,{host:r.hostname,protocol:r.protocol,headers:e.headers,method:e.method,body:n,context:{vercel:{event:t}}})}export{handleEvent as default};
//# sourceMappingURL=index.mjs.map
